<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<!-- 2018-07-04 Wed 22:27 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<title>深入理解 GNU GRUB - 02 boot.S 2.4 boot.S详细注释</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="yanyg" />
<link rel="stylesheet" type="text/css" href="../r/org-code.css" />
<link rel="stylesheet" type="text/css" href="../r/blog-bluetopbar.css" />
<script type="text/javascript" src="../r/MathJax.js?config=TeX-AMS_HTML"> </script>
<script type="text/javascript" src="../r/bootstrap.min.js"></script>
<script type="text/javascript" src="../r/jquery.stickytableheaders.min.js"></script>
</head>
<body>
<div id="preamble" class="status">
<a href="../index.html">Yanyg - SAN Software Engineer</a>
<div class="sitelinks">
  <a href="archives.html">Archives</a> |
  <a href="theindex.html">Index</a> |
  <a href="tags.html">TAGS</a> |
  <a href="https://github.com/yygcode">Github</a> |
  <a href="../about.html">About Me</a>
</div>
</div>
<div id="content">
<h1 class="title">深入理解 GNU GRUB - 02 boot.S 2.4 boot.S详细注释</h1>
<p>
本文最初发布于CSDN：<a href="https://blog.csdn.net/cppgp/article/details/6361020">https://blog.csdn.net/cppgp/article/details/6361020</a>
</p>

<p>
boot.S位于grub-1.98/boot/i386/pc/目录，采用AT&amp;T汇编语法编写。
</p>
<div class="org-src-container">
<pre class="src src-asm"><span class="org-comment-delimiter">/* </span><span class="org-comment">-*-Asm-*- */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> *  GRUB  --  GRand Unified Bootloader</span>
<span class="org-comment"> *  Copyright (C) 1999,2000,2001,2002,2005,2006,2007,2008,2009  Free Software Foundation, Inc.</span>
<span class="org-comment"> *</span>
<span class="org-comment"> *  GRUB is free software: you can redistribute it and/or modify</span>
<span class="org-comment"> *  it under the terms of the GNU General Public License as published by</span>
<span class="org-comment"> *  the Free Software Foundation, either version 3 of the License, or</span>
<span class="org-comment"> *  (at your option) any later version.</span>
<span class="org-comment"> *</span>
<span class="org-comment"> *  GRUB is distributed in the hope that it will be useful,</span>
<span class="org-comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="org-comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="org-comment"> *  GNU General Public License for more details.</span>
<span class="org-comment"> *</span>
<span class="org-comment"> *  You should have received a copy of the GNU General Public License</span>
<span class="org-comment"> *  along with GRUB.  If not, see <a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">&lt;http://www.gnu.org/licenses/&gt;.</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> */</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment-delimiter"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">/*</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * cppgp &#27880;&#37322;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * &#26085;&#26399;: 2011-04-22</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * Email</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *    cppgp@qq.com,</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *    yanyg02@163.com</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * GRUB version:</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *    gnu grub-1.98</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> */</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment-delimiter"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">/*</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * boot.S</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * 0x1FF&#20301;&#32622;&#20026;0xAA).</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *  SP=0x2000 --&gt; stack</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *  DL=boot-disk-driver</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> *  DS=SS=0 --&gt; data segment and stack segment</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> */</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment-delimiter"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">/*</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  * &#20851;&#20110;&#23439;LOCAL</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  * &#25551;&#36848;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  *  #define LOCAL(sym)</a> <a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">L_ ## sym</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">  */</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">

</a><span class="org-preprocessor"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">#include</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> </a><span class="org-string"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">&lt;grub/symbol.h&gt;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-preprocessor"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">#include</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> </a><span class="org-string"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">&lt;grub/boot.h&gt;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-preprocessor"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">#include</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h"> </a><span class="org-string"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
/*
 * boot.S
 *
 * boot.S&#29983;&#25104;boot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;kernel_sector&#25152;&#22312;LBA&#22320;&#22336;,
 * kernel_sector&#21344;&#29992;8&#23383;&#33410;, &#39318;&#20808;&#26159;&#20302;4&#23383;&#33410;,&#28982;&#21518;&#26159;&#39640;4&#23383;&#33410;,
 * &#23427;&#25351;&#26126;diskboot.img&#25152;&#22312;&#32477;&#23545;&#25159;&#21306;&#20301;&#32622;.
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * boot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x7C00~0x7DFF, &#24182;&#20197;CS:IP=0x0000:0x7C00
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;diskboot.img&#21040;&#20869;&#23384;0x8000&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;.
 *
 * boot.img&#20445;&#23384;&#30913;&#30424;&#21442;&#25968;&#21644;&#27169;&#24335;&#21040;BPB(BIOS parameter block)&#22359;.
 * diskboot.img&#21644;kernel.img&#37117;&#29992;&#21040;&#36825;&#20123;&#21442;&#25968;.
 *
 * boot.img&#35774;&#32622;&#22534;&#26632;&#21644;&#19968;&#20123;&#23492;&#23384;&#22120;, diskboot.img&#21644;kernel.img&#37117;
 * &#20351;&#29992;&#21040;&#36825;&#20123;&#35774;&#32622;. &#21253;&#25324;:
 *  SP=0x2000 --&gt; stack
 *  DL=boot-disk-driver
 *  SI=DAP --&gt; disk address packet, -1(%si) is mode of disk read
 *  DS=SS=0 --&gt; data segment and stack segment
 */
/*
  *
  * &#20851;&#20110;&#23439;LOCAL
  *
  * &#25152;&#22312;&#25991;&#20214;:   grub-1.98/include/grub/symbol.h
  *
  * &#25551;&#36848;
  *  #define LOCAL(sym)	L_ ## sym
  *      ##&#22312;C&#35821;&#35328;&#20013;&#20854;&#31896;&#36148;&#20316;&#29992;
  *      LOCAL(sym)&#22312;sym&#31526;&#21495;&#21069;&#38468;&#21152;L_
  *      &#23427;&#20197;&#19968;&#31181;&#26356;&#26131;&#35835;&#30340;&#26041;&#24335;&#26263;&#31034;&#36825;&#26159;&#19968;&#20010;&#23616;&#37096;(&#26412;&#22320;)&#31526;&#21495;
  *      &#20363;&#22914;, LOCAL(after_BPB)&#31561;&#20215;&#20110;L_after_BPB
  *
  */

#include &lt;grub/symbol.h&gt;
#include &lt;grub/boot.h&gt;
#include &lt;grub/machine/boot.h">&lt;grub/machine/boot.h&gt;</a></span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> *  defines for the code go here</span>
<span class="org-comment"> */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">Print message string */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * MSG&#23439;&#35774;&#32622;&#28304;&#20018;&#25351;&#38024;&#24182;&#35843;&#29992;LOCAL(message)&#20989;&#25968;</span>
<span class="org-comment"> *    LOCAL(message)&#20989;&#25968;&#36890;&#36807;BIOS INT 10H, AH=0EH</span>
<span class="org-comment"> *    &#21521;&#32456;&#31471;&#36755;&#20986;&#25552;&#31034;&#20449;&#24687;</span>
<span class="org-comment"> * &#20851;&#20110;BIOS INT 10H, AH=0EH&#21442;&#32771;2.1.6&#33410;</span>
<span class="org-comment"> */</span>
<span class="org-preprocessor">#define</span> <span class="org-function-name">MSG</span>(<span class="org-variable-name">x</span>)  movw $x, <span class="org-variable-name">%si</span><span class="org-comment-delimiter">; </span><span class="org-comment">call LOCAL(message)</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#27719;&#32534;&#25991;&#20214;&#21517;*/</span>
        <span class="org-keyword">.file</span>   <span class="org-string">"boot.S"</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#20195;&#30721;&#27573;&#22768;&#26126;*/</span>
        <span class="org-keyword">.text</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">Tell GAS to generate 16-bit instructions so that this code works</span>
<span class="org-comment">           in real mode. */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#21578;&#30693;&#32534;&#35793;&#22120;&#29983;&#25104;&#23454;&#27169;&#24335;&#19979;&#24037;&#20316;&#30340;16&#20301;&#25351;&#20196;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">.code16</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * .globl&#25351;&#20196;&#29992;&#26469;&#22768;&#26126;&#22806;&#37096;&#31243;&#24207;&#21487;&#20197;&#35775;&#38382;&#30340;&#26631;&#31614;</span>
<span class="org-comment"> *     &#31243;&#24207;&#20837;&#21475;&#28857;&#24517;&#39035;&#29992;.globl&#26469;&#22768;&#26126;</span>
<span class="org-comment"> *     _start&#26159;GNU&#38142;&#25509;&#22120;&#30340;&#40664;&#35748;&#20837;&#21475;&#28857;</span>
<span class="org-comment"> */</span>
<span class="org-keyword">.globl</span> _start, start<span class="org-comment-delimiter">;</span>
<span class="org-function-name">_start</span>:
<span class="org-function-name">start</span>:
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * _start is loaded at 0x7c00 and is jumped to with CS:IP 0:0x7c00</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * Beginning of the sector is compatible with the FAT/HPFS BIOS</span>
<span class="org-comment">         * parameter block.</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         *</span>
<span class="org-comment">         * &#36339;&#36716;&#21040;LOCAL(after_BPB)</span>
<span class="org-comment">         *  LOCAL(after_BPB)&#20043;&#21069;&#31354;&#38388;&#20445;&#30041;</span>
<span class="org-comment">         *  &#29992;&#26469;&#20445;&#23384;&#30913;&#30424;&#35835;&#27169;&#24335;, &#20197;&#21450;</span>
<span class="org-comment">         *  LBA&#27169;&#24335;&#19979;&#30340;&#21442;&#25968;DAP&#32467;&#26500;&#20307;&#31354;&#38388;, &#25110;&#32773;</span>
<span class="org-comment">         *  CHS&#27169;&#24335;&#19979;&#20445;&#23384;&#26609;&#38754;/&#30913;&#22836;/&#25159;&#21306;&#21442;&#25968;&#20540;</span>
<span class="org-comment">         *</span>
<span class="org-comment">         *  BPB&#20445;&#30041;&#30340;&#31354;&#38388;&#36275;&#22815;&#22810;</span>
<span class="org-comment">         *  &#30446;&#21069;&#26368;&#22810;&#21482;&#29992;&#21040;17&#23383;&#33410;, &#20998;&#21035;&#26159;</span>
<span class="org-comment">         *    1&#23383;&#33410;&#20445;&#23384;&#30913;&#30424;&#35835;&#27169;&#24335;(LBA&#27169;&#24335;&#20026;1,  CHS&#27169;&#24335;&#20026;0)</span>
<span class="org-comment">         *    16&#23383;&#33410;&#20445;&#23384;LBA&#19979;&#30340;DAP&#21442;&#25968;</span>
<span class="org-comment">         *</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">jmp</span>     LOCAL(after_BPB)
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * nop&#21344;&#29992;1&#23383;&#33410;&#31354;&#38388;, &#31354;&#25351;&#20196;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">nop</span>     <span class="org-comment-delimiter">/* </span><span class="org-comment">do I care about this ??? */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * This space is for the BIOS parameter block!!!!  Don't change</span>
<span class="org-comment">         * the first jump, nor start the code anywhere but right after</span>
<span class="org-comment">         * this area.</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * GRUB_BOOT_MACHINE_BPB_START=0x03</span>
<span class="org-comment">         * BPB&#21442;&#25968;&#22359;&#24320;&#22987;&#22320;&#22336;: 0x7C04</span>
<span class="org-comment">         */</span>
        . = _start + GRUB_BOOT_MACHINE_BPB_START
        . = _start + 4
        <span class="org-comment-delimiter">/* </span><span class="org-comment">scratch space */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * mode&#20445;&#23384;&#30913;&#30424;&#35835;&#27169;&#24335;</span>
<span class="org-comment">         */</span>
<span class="org-function-name">mode</span>:
        <span class="org-keyword">.byte</span>   0
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * disk_address_packet, BIOS LBA&#35835;DAP&#26631;&#31614;</span>
<span class="org-comment">         * sectors/heads/cylinders &#20445;&#23384;&#39537;&#21160;&#22120;C/H/S&#21442;&#25968;</span>
<span class="org-comment">         *    &#36890;&#36807;INT 13H, AH=0x08H&#33719;&#21462;</span>
<span class="org-comment">         * sector_start/head_start/cylinder_start</span>
<span class="org-comment">         *    &#20195;&#30721;&#20013;&#27809;&#26377;&#29992;&#21040;, &#21487;&#33021;&#26159;&#27531;&#30041;&#19979;&#26469;&#30340;&#26631;&#31614;&#21543;</span>
<span class="org-comment">         */</span>
<span class="org-function-name">disk_address_packet</span>:
<span class="org-function-name">sectors</span>:
        <span class="org-keyword">.long</span>   0
<span class="org-function-name">heads</span>:
        <span class="org-keyword">.long</span>   0
<span class="org-function-name">cylinders</span>:
        <span class="org-keyword">.word</span>   0
<span class="org-function-name">sector_start</span>:
        <span class="org-keyword">.byte</span>   0
<span class="org-function-name">head_start</span>:
        <span class="org-keyword">.byte</span>   0
<span class="org-function-name">cylinder_start</span>:
        <span class="org-keyword">.word</span>   0
        <span class="org-comment-delimiter">/* </span><span class="org-comment">more space... */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * GRUB_BOOT_MACHINE_BPB_END=0x5A</span>
<span class="org-comment">         * &#29992;&#26469;&#32473;BPB&#39044;&#30041;&#26356;&#22810;&#31354;&#38388;</span>
<span class="org-comment">         * BPB&#23383;&#33410;&#25968;=0x5A-0x04=0x56=86 Bytes</span>
<span class="org-comment">         */</span>
        . = _start + GRUB_BOOT_MACHINE_BPB_END
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * End of BIOS parameter block.</span>
<span class="org-comment">         */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * GRUB_BOOT_MACHINE_KERNEL_ADDR=0x8000</span>
<span class="org-comment"> *  GRUB&#31532;&#20108;&#27493;&#25351;&#20196;&#35013;&#36733;&#21518;&#20301;&#20110;&#36825;&#20010;&#20301;&#32622;</span>
<span class="org-comment"> */</span>
<span class="org-function-name">kernel_address</span>:
        <span class="org-keyword">.word</span>   GRUB_BOOT_MACHINE_KERNEL_ADDR
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * GRUB_BOOT_MACHINE_KERNEL_SECTOR=0x5C</span>
<span class="org-comment">         *   &#30830;&#20445;&#21040;&#36798;&#27492;&#22788;&#26102;&#21344;&#29992;&#23383;&#33410;&#25968;&#31561;&#20110;0x5C</span>
<span class="org-comment">         *   &#22914;&#26524;&#36229;&#36807;&#32534;&#35793;&#22120;&#20250;&#21457;&#20986;&#25265;&#24616;</span>
<span class="org-comment">         *   &#22914;&#26524;&#19981;&#22815;0x5C&#21017;&#39044;&#30041;&#33267;0x5C</span>
<span class="org-comment">         */</span>
        . = _start + GRUB_BOOT_MACHINE_KERNEL_SECTOR
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * 8&#23383;&#33410;&#29992;&#26469;&#34920;&#31034;LBA&#32477;&#23545;&#25159;&#21306;&#22320;&#22336;</span>
<span class="org-comment"> *  boot.S&#21152;&#36733;&#20301;&#20110;&#27492;&#22788;&#30340;&#25159;&#21306;&#21040;0x8000&#20301;&#32622;</span>
<span class="org-comment"> *  &#27880;&#24847;&#20004;&#20010;4&#23383;&#33410;&#20540;&#30340;&#39034;&#24207;</span>
<span class="org-comment"> *  &#20808;&#26159;&#20302;4&#23383;&#33410;,&#20877;&#26159;&#39640;4&#23383;&#33410;</span>
<span class="org-comment"> *  &#40664;&#35748;&#20540;&#26159;LBA&#31532;1&#25159;&#21306;</span>
<span class="org-comment"> *  &#22312;&#23433;&#35013;&#36807;&#31243;,&#23433;&#35013;&#31243;&#24207;&#20250;&#25913;&#20889;&#25104;&#23454;&#38469;&#30340;&#23433;&#35013;&#25159;&#21306;</span>
<span class="org-comment"> */</span>
<span class="org-function-name">kernel_sector</span>:
        <span class="org-keyword">.long</span>   1, 0
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * GRUB_BOOT_MACHINE_BOOT_DRIVE=0x64</span>
<span class="org-comment">         *  &#19978;&#38754;&#30340;kernel_sector&#20351;&#29992;0x5C~0x63</span>
<span class="org-comment">         *  &#27492;&#22788;&#21482;&#26159;&#30830;&#20445;&#27809;&#26377;&#36234;&#30028;</span>
<span class="org-comment">         *  &#22914;&#26524;&#36234;&#30028;&#32534;&#35793;&#22120;&#20250;&#21457;&#20986;&#35686;&#21578;</span>
<span class="org-comment">         */</span>
        . = _start + GRUB_BOOT_MACHINE_BOOT_DRIVE
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#30913;&#30424;&#39537;&#21160;&#22120;&#21495;</span>
<span class="org-comment"> *  &#31532;&#19968;&#22359;&#36719;&#30424;&#26159;0x00, &#31532;&#20108;&#22359;&#36719;&#30424;&#26159;0x01, &#20381;&#27492;&#31867;&#25512;</span>
<span class="org-comment"> *  &#31532;&#19968;&#22359;&#30828;&#30424;&#26159;0x80, &#31532;&#20108;&#22359;&#30828;&#30424;&#26159;0x81, &#20381;&#27492;&#31867;&#25512;</span>
<span class="org-comment"> *  &#40664;&#35748;&#35774;&#32622;&#20026;0xff</span>
<span class="org-comment"> *  &#22312;&#23433;&#35013;&#36807;&#31243;&#20250;&#26356;&#25913;&#20026;&#23454;&#38469;&#30340;&#30913;&#30424;&#39537;&#21160;&#22120;</span>
<span class="org-comment"> *  &#20195;&#30721;&#20013;&#22914;&#26524;&#25506;&#27979;&#21040;&#36825;&#37324;&#20381;&#28982;&#26159;0xff, &#21017;&#20250;&#24403;&#20570;0x80&#22788;&#29702;</span>
<span class="org-comment"> */</span>
<span class="org-function-name">boot_drive</span>:
        <span class="org-keyword">.byte</span> 0xff      <span class="org-comment-delimiter">/* </span><span class="org-comment">the disk to load kernel from */</span>
                        <span class="org-comment-delimiter">/* </span><span class="org-comment">0xff means use the boot drive */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * 0x7C00&#22788;&#30340;&#36339;&#36716;&#21040;&#36798;&#36825;&#37324;</span>
<span class="org-comment"> */</span>
<span class="org-function-name">LOCAL</span>(after_BPB):
<span class="org-comment-delimiter">/* </span><span class="org-comment">general setup */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * cli &#31105;&#27490;&#20013;&#26029;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">cli</span>             <span class="org-comment-delimiter">/* </span><span class="org-comment">we're not safe here! */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * This is a workaround for buggy BIOSes which don't pass boot</span>
<span class="org-comment">         * drive correctly. If GRUB is installed into a HDD, check if</span>
<span class="org-comment">         * DL is masked correctly. If not, assume that the BIOS passed</span>
<span class="org-comment">         * a bogus value and set DL to 0x80, since this is the only</span>
<span class="org-comment">         * possible boot drive. If GRUB is installed into a floppy,</span>
<span class="org-comment">         * this does nothing (only jump).</span>
<span class="org-comment">         */</span>
         <span class="org-comment-delimiter">/*</span>
<span class="org-comment">          * &#30830;&#20445;&#22320;&#22336;&#23433;&#25490;GRUB_BOOT_MACHINE_DRIVE_CHECK=0x66</span>
<span class="org-comment">          * cli&#25351;&#20196;&#21344;&#29992;1&#23383;&#33410;, &#29616;&#22312;&#27491;&#22909;&#21040;&#36798;0x66</span>
<span class="org-comment">          */</span>
        . = _start + GRUB_BOOT_MACHINE_DRIVE_CHECK
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * BIOS&#22312;&#24320;&#26426;&#21518;&#35774;&#32622;DL&#20026;&#24341;&#23548;&#30913;&#30424;&#39537;&#21160;&#22120;&#21495;</span>
<span class="org-comment"> * &#26377;&#20123;BIOS&#20250;&#20256;&#36882;&#38169;&#35823;&#30340;&#39537;&#21160;&#22120;&#21495;</span>
<span class="org-comment"> *   &#30828;&#30424;&#39537;&#21160;&#22120;&#21495;&#26159;&#20174;0x80&#24320;&#22987;&#30340;</span>
<span class="org-comment"> *   &#27491;&#30830;&#30340;&#39537;&#21160;&#22120;&#21495;&#21644;0x80&#25191;&#34892;testb&#19981;&#20250;&#25226;ZF&#32622;0</span>
<span class="org-comment"> *   testb&#23545;&#20004;&#20010;&#25805;&#20316;&#25968;&#25191;&#34892;&#36923;&#36753;&#19982;&#25805;&#20316;,</span>
<span class="org-comment"> *   &#24182;&#35774;&#32622;&#27491;&#30830;&#30340;SF/ZF/PF&#31561;&#29366;&#24577;&#20301;</span>
<span class="org-comment"> *   testb $0x80, %dl&#31561;&#20110;0&#34920;&#31034;dl&lt;0x80</span>
<span class="org-comment"> *   &#22914;&#26524;GRUB&#23433;&#35013;&#22312;&#30828;&#30424;&#19978;,&#36825;&#24456;&#26126;&#26174;&#26159;&#19968;&#20010;&#38169;&#35823;&#30340;&#39537;&#21160;&#22120;&#21495;</span>
<span class="org-comment"> *   &#22240;&#27492;&#20250;&#37325;&#32622;&#20026;0x80</span>
<span class="org-comment"> *</span>
<span class="org-comment"> */</span>
<span class="org-function-name">boot_drive_check</span>:
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#23433;&#35013;&#31243;&#24207;&#21487;&#33021;&#20250;&#25913;&#20889;jmp</span>
<span class="org-comment">         *  &#20363;&#22914;,&#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,</span>
<span class="org-comment">         *    &#21487;&#33021;&#25913;&#20889;&#20026;&#20004;&#20010;nop</span>
<span class="org-comment">         *    &#36825;&#26679;&#23601;&#21487;&#20197;&#35299;&#20915;&#19968;&#20123;BIOS&#20256;&#36882;&#38169;&#35823;&#39537;&#21160;&#22120;&#21495;&#30340;BUG</span>
<span class="org-comment">         * &#22312;&#24403;&#21069;&#29256;&#26412;&#20013;</span>
<span class="org-comment">         * &#19987;&#38376;&#24320;&#36767;&#20102;&#19968;&#23383;&#33410;&#31354;&#38388;(boot_drive)&#20445;&#23384;&#39537;&#21160;&#22120;&#21495;</span>
<span class="org-comment">         * &#38500;&#38750;&#31995;&#32479;&#19978;&#25509;&#20837;&#20102;128&#22359;&#30828;&#30424;,</span>
<span class="org-comment">         * &#19988;&#20351;&#29992;&#26368;&#21518;&#19968;&#22359;&#30828;&#30424;&#24341;&#23548;(&#27492;&#26102;&#39537;&#21160;&#22120;&#21495;&#20026;0xFF)</span>
<span class="org-comment">         * &#21542;&#21017;&#21518;&#38754;&#30340;&#20195;&#30721;&#20250;&#37325;&#32622;DL&#20026;boot_drive&#20013;&#20445;&#23384;&#30340;&#39537;&#21160;&#22120;&#21495;</span>
<span class="org-comment">         * &#31995;&#32479;&#19978;&#25509;&#20837;128&#22359;&#30828;&#30424;&#19988;&#20351;&#29992;&#26368;&#21518;&#19968;&#22359;&#24341;&#23548;&#30340;&#27010;&#29575;&#38750;&#24120;&#20302;</span>
<span class="org-comment">         * &#20877;&#32773;,&#22914;&#26524;&#30495;&#20351;&#29992;0xFF&#24341;&#23548;, &#21363;&#20351;&#26816;&#27979;&#21040;&#26377;BUG&#19988;&#25913;&#25104;&#20102;0x80,</span>
<span class="org-comment">         * &#20063;&#35299;&#20915;&#19981;&#20102;&#38382;&#39064;--&#22240;&#20026;&#23454;&#38469;&#19978;&#24341;&#23548;&#30424;&#19981;&#26159;0x80&#32780;&#26159;0xFF</span>
<span class="org-comment">         *</span>
<span class="org-comment">         * &#22240;&#27492;,&#26159;&#21542;&#25913;&#20889;jmp&#26377;&#20123;&#26080;&#20851;&#32039;&#35201;.</span>
<span class="org-comment">         * &#20026;&#20102;&#23436;&#25972;&#24615;, &#25105;&#23545;&#36825;&#20010;&#26816;&#27979;&#30340;&#20195;&#30721;&#36923;&#36753;&#20063;&#20570;&#20102;&#27880;&#37322;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">jmp</span>     1f      <span class="org-comment-delimiter">/* </span><span class="org-comment">grub-setup may overwrite this jump */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#36825;&#20960;&#34892;&#20195;&#30721;&#26159;&#38024;&#23545;&#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#30340;GRUB&#30340;</span>
<span class="org-comment">         * &#29992;&#26469;&#35299;&#20915;&#26576;&#20123;BIOS&#26080;&#27861;&#25552;&#20379;&#27491;&#30830;&#39537;&#21160;&#22120;&#21495;&#30340;BUG</span>
<span class="org-comment">         * testb&#32467;&#26524;: &#22914;&#26524;dl&lt;0x80&#21017;&#25805;&#20316;&#32467;&#26524;&#20026;0, &#22240;&#27492;jnz&#19981;&#25191;&#34892;&#36339;&#36716;</span>
<span class="org-comment">         * movb&#37325;&#32622;DL&#20026;0x80</span>
<span class="org-comment">         *</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">testb</span>   $0x80, <span class="org-variable-name">%dl</span>
        <span class="org-keyword">jnz</span>     1f
        <span class="org-keyword">movb</span>    $0x80, <span class="org-variable-name">%dl</span>
<span class="org-function-name">1</span>:
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * ljmp to the next instruction because some bogus BIOSes</span>
<span class="org-comment">         * jump to 07C0:0000 instead of 0000:7C00.</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#26576;&#20123;&#23384;&#22312;BUG&#30340;BIOS,</span>
<span class="org-comment">         * &#20351;&#29992;CS:IP=0x07C0:0x0000&#25191;&#34892;&#20195;&#30721;</span>
<span class="org-comment">         * &#36890;&#36807;ljmp&#35299;&#20915;&#36825;&#20010;BUG</span>
<span class="org-comment">         * ljmp segment, offset</span>
<span class="org-comment">         * &#20854;&#20013;segment&#26159;&#27573;&#23492;&#23384;&#22120;, offset&#26159;&#20559;&#31227;&#20540;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">ljmp</span>    $0, $real_start
<span class="org-function-name">real_start</span>:
        <span class="org-comment-delimiter">/* </span><span class="org-comment">set up %ds and %ss as offset from 0 */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#25968;&#25454;&#27573;/&#22534;&#26632;&#27573;&#23492;&#23384;&#22120;&#32622;0</span>
<span class="org-comment">         * &#21069;&#38754;&#36890;&#36807;ljmp, &#24050;&#32463;&#30830;&#20445;&#25968;&#25454;&#27573;&#23492;&#23384;&#22120;&#32622;0&#20102;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">xorw</span>    <span class="org-variable-name">%ax</span>, <span class="org-variable-name">%ax</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%ax</span>, <span class="org-variable-name">%ds</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%ax</span>, <span class="org-variable-name">%ss</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">set up the REAL stack */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * GRUB_BOOT_MACHINE_STACK_SEG=0x2000</span>
<span class="org-comment">         * &#35774;&#32622;&#23454;&#27169;&#24335;&#19979;&#30340;&#22534;&#26632;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movw</span>    $GRUB_BOOT_MACHINE_STACK_SEG, <span class="org-variable-name">%sp</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#25171;&#24320;&#20013;&#26029; */</span>
        <span class="org-keyword">sti</span>             <span class="org-comment-delimiter">/* </span><span class="org-comment">we're safe again */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#29616;&#22312;CS/DS/SS&#37117;&#26159;0x0000</span>
<span class="org-comment">         * &#24182;&#19988;&#35774;&#32622;&#22909;&#20102;&#23454;&#27169;&#24335;&#22534;&#26632;SP=0x2000</span>
<span class="org-comment">         * &#19979;&#38754;&#21487;&#20197;&#23433;&#20840;&#30340;&#20351;&#29992;pushx/popx&#31561;&#25351;&#20196;&#20102;</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         *  Check if we have a forced disk reference here</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#22914;&#26524;boot_drive&#20381;&#28982;&#20026;0xff, &#21017;&#20351;&#29992;BIOS&#20256;&#36882;&#30340;&#39537;&#21160;&#22120;&#21495;</span>
<span class="org-comment">         * &#21542;&#21017;&#20351;&#29992;boot_drive&#20013;&#20445;&#23384;&#30340;&#39537;&#21160;&#22120;&#21495;</span>
<span class="org-comment">         * &#36825;&#26679;&#23601;&#20801;&#35768;GRUB&#30340;&#31532;&#19968;&#27493;&#21644;&#21518;&#32493;&#19981;&#22312;&#21516;&#19968;&#22359;&#30913;&#30424;&#20063;&#33021;&#24037;&#20316;</span>
<span class="org-comment">         *</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movb</span>   boot_drive, <span class="org-variable-name">%al</span>
        <span class="org-keyword">cmpb</span>    $0xff, <span class="org-variable-name">%al</span>
        <span class="org-keyword">je</span>      1f
        <span class="org-keyword">movb</span>    <span class="org-variable-name">%al</span>, <span class="org-variable-name">%dl</span>
<span class="org-function-name">1</span>:
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save drive reference first thing! */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#21387;&#26632;DX,</span>
<span class="org-comment">         * DL&#20013;&#20445;&#23384;&#26377;&#39537;&#21160;&#22120;&#21495;</span>
<span class="org-comment">         * BIOS&#35843;&#29992;&#37117;&#26377;&#21487;&#33021;&#20250;&#26356;&#25913;DL&#23492;&#23384;&#22120;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">pushw</span>   <span class="org-variable-name">%dx</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">print a notification message on the screen */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#21521;&#32456;&#31471;&#36755;&#20986;&#25552;&#31034;&#20449;&#24687;notification_string</span>
<span class="org-comment">         * notification_string="GRUB"</span>
<span class="org-comment">         * &#22914;&#26524;&#27880;&#24847;,&#21487;&#20197;&#30475;&#21040;&#22312;&#21551;&#21160;GRUB&#24341;&#23548;&#30340;Linux&#26102;,</span>
<span class="org-comment">         * &#23631;&#24149;&#19978;&#26377;GRUB&#23383;&#26679;&#19968;&#38378;&#32780;&#36807;.</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">MSG</span>(notification_string)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">set %si to the disk address packet */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#35774;&#32622;SI&#23492;&#23384;&#22120;</span>
<span class="org-comment">         * &#19979;&#38754;&#30340;BIOS&#35843;&#29992;&#21450;&#32467;&#26524;&#20445;&#23384;&#37117;&#20250;&#29992;&#21040;</span>
<span class="org-comment">         * movw&#23558;disk_address_packet&#22320;&#22336;&#20445;&#23384;&#21040;SI</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movw</span>    $disk_address_packet, <span class="org-variable-name">%si</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">do not probe LBA if the drive is a floppy */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#25506;&#27979;&#22914;&#26524;&#39537;&#21160;&#22120;&#23567;&#20110;0x80, &#19981;&#20877;&#25191;&#34892;LBA&#25506;&#27979;,</span>
<span class="org-comment">         *  &#22240;&#20026;&#23567;&#20110;0x80&#20026;&#36719;&#30424;,&#36719;&#30424;&#21482;&#25903;&#25345;CHS.</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">testb</span>   $GRUB_BOOT_MACHINE_BIOS_HD_FLAG, <span class="org-variable-name">%dl</span>
        <span class="org-keyword">jz</span>      LOCAL(chs_mode)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">check if LBA is supported */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * BIOS INT 13H, AH=41H</span>
<span class="org-comment">         * &#26816;&#27979;&#30913;&#30424;&#25193;&#23637;&#35835;&#25903;&#25345;&#24773;&#20917;</span>
<span class="org-comment">         * &#35814;&#32454;&#26597;&#30475;2.1.1&#33410;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movb</span>    $0x41, <span class="org-variable-name">%ah</span>
        <span class="org-keyword">movw</span>    $0x55aa, <span class="org-variable-name">%bx</span>
        <span class="org-keyword">int</span>     $0x13
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         *  %dl may have been clobbered by INT 13, AH=41H.</span>
<span class="org-comment">         *  This happens, for example, with AST BIOS 1.04.</span>
<span class="org-comment">         */</span>
         <span class="org-comment-delimiter">/*</span>
<span class="org-comment">          * &#39537;&#21160;&#22120;DL&#37325;&#32622;, &#22240;&#20026;BIOS&#35843;&#29992;&#21487;&#33021;&#24050;&#32463;&#26356;&#25913;&#20102;&#23427;</span>
<span class="org-comment">          */</span>
        <span class="org-keyword">popw</span>    <span class="org-variable-name">%dx</span>
        <span class="org-keyword">pushw</span>   <span class="org-variable-name">%dx</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">use CHS if fails */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#26816;&#27979;&#32467;&#26524;, &#22914;&#26524;&#25903;&#25345;LBA,&#21017;&#26377;:</span>
<span class="org-comment">         *  1. CF&#28165;&#38646;; 2. BX==AA55H; 3. CX=1</span>
<span class="org-comment">         *</span>
<span class="org-comment">         * &#22914;&#26524;BIOS&#35843;&#29992;&#22833;&#36133;&#25353;&#29031;CHS&#22788;&#29702;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">jc</span>      LOCAL(chs_mode)
        <span class="org-keyword">cmpw</span>    $0xaa55, <span class="org-variable-name">%bx</span>
        <span class="org-keyword">jne</span>     LOCAL(chs_mode)
        <span class="org-keyword">andw</span>    $1, <span class="org-variable-name">%cx</span>
        <span class="org-keyword">jz</span>      LOCAL(chs_mode)
<span class="org-function-name">lba_mode</span>:
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#21021;&#27493;&#25506;&#27979;&#25903;&#25345;LBA&#25193;&#23637;&#35835;</span>
<span class="org-comment"> * &#22914;&#26524;LBA&#35835;&#22833;&#36133;&#20381;&#28982;&#36827;&#20837;CHS&#22788;&#29702;</span>
<span class="org-comment"> */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#22914;&#19979;&#20195;&#30721;&#35774;&#32622;LBA&#35835;&#30340;DAP&#32467;&#26500;&#21450;&#23492;&#23384;&#22120;</span>
<span class="org-comment">         * &#24182;&#35843;&#29992;LBA&#35835;BIOS&#20363;&#31243;</span>
<span class="org-comment">         * &#22914;&#26524;&#35835;&#22833;&#36133;&#36827;&#20837;CHS&#22788;&#29702;</span>
<span class="org-comment">         * &#25104;&#21151;&#21017;&#25968;&#25454;&#34987;&#35835;&#21040;&#20102;0x7000:0x0000(&#20869;&#23384;0x700000)&#20301;&#32622;</span>
<span class="org-comment">         * &#36339;&#36716;&#21040;LOCAL(copy_buffer)&#25335;&#36125;&#33267;0x8000&#24182;&#36339;&#36716;&#25191;&#34892;</span>
<span class="org-comment">         */</span>
         <span class="org-comment-delimiter">/*</span>
<span class="org-comment">          * BIOS INT 13H, AH=42H</span>
<span class="org-comment">          * LBA&#35835;</span>
<span class="org-comment">          * &#35814;&#32454;&#26597;&#30475;2.1.2&#33410;</span>
<span class="org-comment">          */</span>
        <span class="org-keyword">xorw</span>    <span class="org-variable-name">%ax</span>, <span class="org-variable-name">%ax</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%ax</span>, 4(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">// </span><span class="org-comment">&#25903;&#25345;LBA&#35835;&#65292;&#20445;&#23384;LBA&#35835;&#21040;mode&#22320;&#22336;&#65292;LBA&#35835;&#26631;&#35760;&#20026;0</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#20445;&#23384;&#30828;&#30424;&#35835;&#27169;&#24335;&#20026;LBA</span>
<span class="org-comment">         * mode&#20445;&#23384;1&#34920;&#31034;&#25903;&#25345;LBA</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">incw</span>    <span class="org-variable-name">%ax</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">set the mode to non-zero */</span>
        <span class="org-keyword">movb</span>    <span class="org-variable-name">%al</span>, -1(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">// </span><span class="org-comment">&#35774;&#32622;BIOS&#35843;&#29992;&#21442;&#25968;</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#20197;&#19979;&#26159;&#22635;&#20805;LBA&#35835;&#30340;DAP&#32467;&#26500;</span>
<span class="org-comment">         * 2.1.2&#33410;&#23545;&#27492;&#26377;&#35814;&#32454;&#25551;&#36848;</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">the blocks */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#35835;&#21462;&#25159;&#21306;&#25968;,&#21482;&#35835;1&#25159;&#21306;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%ax</span>, 2(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">the size and the reserved byte */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * DAP&#32467;&#26500;&#20307;&#22823;&#23567;,&#24403;&#21069;&#20026;16=0x10</span>
<span class="org-comment">         * &#25226;&#38656;&#35201;&#35835;&#21462;&#25159;&#21306;&#25968;&#30340;&#39640;&#23383;&#33410;&#32622;0</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movw</span>    $0x0010, (<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">the absolute address */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * 8&#23383;&#33410;&#30340;LBA&#32477;&#23545;&#25159;&#21306;&#22320;&#22336;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movl</span>    kernel_sector, <span class="org-variable-name">%ebx</span>
        <span class="org-keyword">movl</span>    <span class="org-variable-name">%ebx</span>, 8(<span class="org-variable-name">%si</span>)
        <span class="org-keyword">movl</span>    kernel_sector + 4, <span class="org-variable-name">%ebx</span>
        <span class="org-keyword">movl</span>    <span class="org-variable-name">%ebx</span>, 12(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">the segment of buffer address */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * GRUB_BOOT_MACHINE_BUFFER_SEG=0x7000</span>
<span class="org-comment">         * &#32531;&#20914;&#21306;&#27573;&#22320;&#22336;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movw</span>    $GRUB_BOOT_MACHINE_BUFFER_SEG, 6(<span class="org-variable-name">%si</span>)
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * BIOS call "INT 0x13 Function 0x42" to read sectors from disk into memory</span>
<span class="org-comment"> *      Call with       %ah = 0x42</span>
<span class="org-comment"> *                      %dl = drive number</span>
<span class="org-comment"> *                      %ds:%si = segment:offset of disk address packet</span>
<span class="org-comment"> *      Return:</span>
<span class="org-comment"> *                      %al = 0x0 on success; err code on failure</span>
<span class="org-comment"> */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#35843;&#29992;INT 13H, AH=42H&#25191;&#34892;LBA&#35835;</span>
<span class="org-comment">         *   &#32531;&#20914;&#21306;segment:offset=0x7000:0x0000</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movb</span>    $0x42, <span class="org-variable-name">%ah</span>
        <span class="org-keyword">int</span>     $0x13
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * LBA&#35835;&#22833;&#36133;&#36339;&#36716;&#21040;LOCAL(chs_mode)&#23581;&#35797;CHS&#35835;</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">LBA read is not supported, so fallback to CHS.  */</span>
        <span class="org-keyword">jc</span>      LOCAL(chs_mode)
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * GRUB_BOOT_MACHINE_BUFFER_SEG=0x7000</span>
<span class="org-comment">         * &#35774;&#32622;BX&#20026;&#32531;&#20914;&#21306;&#27573;&#22320;&#22336;0x7000</span>
<span class="org-comment">         *  &#36339;&#36716;&#25191;&#34892;LOCAL(copy_buffer)</span>
<span class="org-comment">         *  &#23427;&#23558;&#25644;&#36816;0x7000:0x0000&#22788;&#19968;&#25159;&#21306;&#30340;&#25968;&#25454;&#21040;0x8000&#22788;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movw</span>    $GRUB_BOOT_MACHINE_BUFFER_SEG, <span class="org-variable-name">%bx</span>
        <span class="org-keyword">jmp</span>     LOCAL(copy_buffer)
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * CHS&#27169;&#24335;&#35835;&#22788;&#29702;</span>
<span class="org-comment"> *  1. BIOS INT 13H, AH=08H&#33719;&#21462;&#30913;&#30424;CHS&#21442;&#25968;</span>
<span class="org-comment"> *  2. BIOS INT 13H, AH=02H&#23454;&#29616;CHS&#35835;</span>
<span class="org-comment"> *  3. &#21487;&#33021;&#23581;&#35797;&#36719;&#30424;&#39537;&#21160;&#22120;&#22797;&#20301;&#21644;CHS&#35835;</span>
<span class="org-comment"> */</span>
<span class="org-function-name">LOCAL</span>(chs_mode):
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         *  Determine the hard disk geometry from the BIOS!</span>
<span class="org-comment">         *  We do this first, so that LS-120 IDE floppies work correctly.</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#33719;&#21462;&#30913;&#30424;CHS&#21442;&#25968;</span>
<span class="org-comment">         * &#26377;&#20851;&#35813;&#35843;&#29992;&#32454;&#33410;&#26597;&#30475;2.1.3&#33410;</span>
<span class="org-comment">         * &#22914;&#26524;&#25104;&#21151;&#30452;&#25509;&#36339;&#36716;&#21040;LOCAL(final_init)</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movb</span>    $8, <span class="org-variable-name">%ah</span>
        <span class="org-keyword">int</span>     $0x13
        <span class="org-keyword">jnc</span>     LOCAL(final_init)
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         *  The call failed, so maybe use the floppy probe instead.</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * GRUB_BOOT_MACHINE_BIOS_HD_FLAG=0x80</span>
<span class="org-comment">         *  &#26816;&#27979;&#22914;&#26524;&#39537;&#21160;&#22120;DL&#23567;&#20110;0x80,</span>
<span class="org-comment">         *  &#21017;&#23581;&#35797;&#36719;&#30424;&#22797;&#20301;&#21644;&#35835;</span>
<span class="org-comment">         *  &#22914;&#26524;&#22823;&#20110;&#31561;&#20110;0x80, &#34920;&#26126;&#30828;&#30424;&#38169;&#35823;,&#36339;&#36716;&#36827;&#20837;LOCAL(hd_probe_error)&#22788;&#29702;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">testb</span>   $GRUB_BOOT_MACHINE_BIOS_HD_FLAG, <span class="org-variable-name">%dl</span>
        <span class="org-keyword">jz</span>      LOCAL(floppy_probe)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">Nope, we definitely have a hard disk, and we're screwed. */</span>
        <span class="org-keyword">jmp</span>     LOCAL(hd_probe_error)
<span class="org-function-name">LOCAL</span>(final_init):
        <span class="org-comment-delimiter">/* </span><span class="org-comment">set the mode to zero */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#20445;&#23384;&#30913;&#30424;CHS&#21442;&#25968;</span>
<span class="org-comment">         *  S&#32034;&#24341;&#20174;1&#24320;&#22987;,&#30452;&#25509;&#20445;&#23384;&#23427;&#21363;&#21487;</span>
<span class="org-comment">         *  &#26609;&#38754;C&#20351;&#29992;&#23492;&#23384;&#22120;CH&#34920;&#31034;&#20302;8&#20301;</span>
<span class="org-comment">         *               &#20351;&#29992;CL&#39640;&#20004;&#20301;&#34920;&#31034;&#39640;2&#20301;</span>
<span class="org-comment">         *  &#30913;&#22836;H&#20351;&#29992;DH</span>
<span class="org-comment">         *  &#25159;&#21306;S&#20351;&#29992;CL&#20302;6&#20301;</span>
<span class="org-comment">         *  &#27880;&#24847;,&#33719;&#21462;&#21040;&#30340;C/H/S&#37117;&#26159;&#26368;&#22823;&#32034;&#24341;</span>
<span class="org-comment">         *  C/H&#32034;&#24341;&#37117;&#26159;&#20174;0&#24320;&#22987;,&#22240;&#27492;&#23427;&#20204;&#30340;&#20540;&#24212;&#35813;&#21152;1&#20445;&#23384;</span>
<span class="org-comment">         *  &#26377;&#20851;&#32454;&#33410;&#35265;2.1.3&#33410;</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * movzbl&#20445;&#23384;dh&#21040;al,&#21516;&#26102;eax&#20854;&#20182;&#19977;&#23383;&#33410;&#32622;0</span>
<span class="org-comment">         * movb&#23558;&#20445;&#23384;0&#21040;mode, &#34920;&#31034;&#25903;&#25345;CHS&#35835;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movzbl</span>  <span class="org-variable-name">%dh</span>, <span class="org-variable-name">%eax</span>
        <span class="org-keyword">movb</span>    <span class="org-variable-name">%ah</span>, -1(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save number of heads */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#20445;&#23384;&#30913;&#22836;&#21442;&#25968;H&#21040;BPB&#30340;heads</span>
<span class="org-comment">         * &#30913;&#22836;&#32034;&#24341;&#20174;0&#24320;&#22987;,&#36882;&#22686;&#34920;&#31034;&#30913;&#30424;&#30913;&#22836;&#25968;</span>
<span class="org-comment">         * SI&#22312;&#21069;&#38754;&#24050;&#32463;&#35774;&#32622;&#25104;DAP&#22320;&#22336;&#20102;</span>
<span class="org-comment">         * &#32780;CHS&#21644;DAP&#26159;&#22797;&#29992;&#30340;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">incw</span>    <span class="org-variable-name">%ax</span>
        <span class="org-keyword">movl</span>    <span class="org-variable-name">%eax</span>, 4(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#31227;&#20301;&#25805;&#20316;</span>
<span class="org-comment">         * 10&#20301;&#30340;&#26609;&#38754;C&#20445;&#23384;&#21040;AX&#20013;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movzbw</span>  <span class="org-variable-name">%cl</span>, <span class="org-variable-name">%dx</span>
        <span class="org-keyword">shlw</span>    $2, <span class="org-variable-name">%dx</span>
        <span class="org-keyword">movb</span>    <span class="org-variable-name">%ch</span>, <span class="org-variable-name">%al</span>
        <span class="org-keyword">movb</span>    <span class="org-variable-name">%dh</span>, <span class="org-variable-name">%ah</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save number of cylinders */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#26609;&#38754;&#32034;&#24341;&#20174;0&#24320;&#22987;,&#36882;&#22686;&#34920;&#31034;&#30913;&#30424;&#26609;&#38754;&#25968;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">incw</span>    <span class="org-variable-name">%ax</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%ax</span>, 8(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#19978;&#38754;&#20445;&#23384;&#26609;&#38754;C&#26102;&#20351;&#29992;&#20102;DX</span>
<span class="org-comment">         * DX&#26366;&#24038;&#31227;2&#20301;,&#22240;&#27492;:</span>
<span class="org-comment">         * DH&#20302;2&#20301;&#20445;&#23384;&#26609;&#38754;8~9&#20301;</span>
<span class="org-comment">         * DL&#39640;6&#20301;&#20445;&#23384;&#25159;&#21306;&#25968;</span>
<span class="org-comment">         * movzbw&#35753;AH&#20026;0,AL&#20026;DL</span>
<span class="org-comment">         * AL&#21491;&#31227;&#20004;&#20301;,&#27491;&#22909;&#34920;&#31034;&#25159;&#21306;</span>
<span class="org-comment">         * &#25159;&#21306;&#32034;&#24341;&#20174;1&#24320;&#22987;,&#22240;&#27492;&#19981;&#38656;&#35201;&#36882;&#22686;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movzbw</span>  <span class="org-variable-name">%dl</span>, <span class="org-variable-name">%ax</span>
        <span class="org-keyword">shrb</span>    $2, <span class="org-variable-name">%al</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save number of sectors */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#20445;&#23384;&#30913;&#30424;&#25159;&#21306;&#25968;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movl</span>    <span class="org-variable-name">%eax</span>, (<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#29616;&#22312;&#30913;&#30424;&#30340;C/H/S&#25968;&#24050;&#20445;&#23384;</span>
<span class="org-comment">         *      &#19979;&#38754;&#30340;&#35835;&#20351;&#29992;&#23427;&#20204;&#26469;&#21028;&#26029;&#38656;&#35201;&#35835;&#21462;&#30340;&#25159;&#21306;</span>
<span class="org-comment">         *      &#26159;&#21542;&#36234;&#30028;(CHS 7.88Gib&#23631;&#38556;,&#21442;&#32771;2.1&#33410;)</span>
<span class="org-comment">         *</span>
<span class="org-comment">         *  &#24453;&#35835;&#21462;&#30340;&#25159;&#21306;&#37319;&#29992;LBA&#34920;&#31034;,&#21344;&#29992;8&#23383;&#33410;</span>
<span class="org-comment">         *      &#38656;&#35201;&#36716;&#25442;&#25104;C/H/S&#34920;&#31034;&#30340;&#26041;&#27861;,</span>
<span class="org-comment">         *      &#19988;&#30830;&#20445;&#22312;C/H/S&#23547;&#22336;&#33539;&#22260;&#20043;&#20869;</span>
<span class="org-comment">         *  &#36716;&#25442;&#31639;&#27861;:</span>
<span class="org-comment">         *</span>
<span class="org-comment">         */</span>
<span class="org-function-name">setup_sectors</span>:
        <span class="org-comment-delimiter">/* </span><span class="org-comment">load logical sector start (top half) */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * LBA&#34920;&#31034;&#30340;&#39640;4&#23383;&#33410;&#22320;&#22336;&#21152;&#36733;&#21040;EAX</span>
<span class="org-comment">         * &#22914;&#26524;EAX&#19981;&#20026;0, &#21017;&#32943;&#23450;&#36229;&#36807;CHS&#23547;&#22336;&#33539;&#22260;</span>
<span class="org-comment">         * &#22240;&#27492;&#30452;&#25509;&#25253;&#21578;&#38169;&#35823;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movl</span>    kernel_sector + 4, <span class="org-variable-name">%eax</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * orl&#27809;&#20160;&#20040;&#20316;&#29992;</span>
<span class="org-comment">         * EAX&#19982;&#33258;&#36523;&#25191;&#34892;&#25110;&#36816;&#31639;,EAX&#32467;&#26524;&#19981;&#20250;&#26377;&#21464;&#21270;</span>
<span class="org-comment">         * &#20294;&#26159;&#20250;&#35774;&#32622;&#26631;&#35782;&#23492;&#23384;&#22120;EFLAGS&#30340;&#26576;&#20123;&#20301;</span>
<span class="org-comment">         * &#20363;&#22914;SF/ZF&#31561;</span>
<span class="org-comment">         * &#22914;&#26524;EAX&#19981;&#31561;&#20110;0,&#21017;CHS&#36234;&#30028;,&#36339;&#36716;&#21040;LOCAL(geometry_error)</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">orl</span>     <span class="org-variable-name">%eax</span>, <span class="org-variable-name">%eax</span>
        <span class="org-keyword">jnz</span>     LOCAL(geometry_error)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">load logical sector start (bottom half) */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * LBA&#34920;&#31034;&#30340;&#20302;4&#23383;&#33410;&#22320;&#22336;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movl</span>    kernel_sector, <span class="org-variable-name">%eax</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">zero %edx */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * EDX&#28165;&#38646;,&#22240;&#20026;32&#20301;&#30340;div&#25805;&#20316;&#30340;&#34987;&#38500;&#25968;&#26159;EDX:EAX</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">xorl</span>    <span class="org-variable-name">%edx</span>, <span class="org-variable-name">%edx</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">divide by number of sectors */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#25805;&#20316;&#25968;</span>
<span class="org-comment">         *   &#34987;&#38500;&#25968;: EDX:EAX=0:EAX</span>
<span class="org-comment">         *   &#38500;&#25968;: (%si) &#30913;&#30424;&#25159;&#21306;&#25968;S</span>
<span class="org-comment">         * &#32467;&#26524;</span>
<span class="org-comment">         *   &#21830;: EAX</span>
<span class="org-comment">         *   &#20313;&#25968;: EDX</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">divl</span>    (<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save sector start */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#20313;&#25968;&#34920;&#31034;&#36215;&#22987;&#25159;&#21306;</span>
<span class="org-comment">         * &#20445;&#23384;&#21040;CL</span>
<span class="org-comment">         * &#22240;&#20026;&#25159;&#21306;&#36215;&#22987;&#32034;&#24341;&#20026;1,&#38656;&#35201;&#36882;&#22686;</span>
<span class="org-comment">         * &#36882;&#22686;&#25805;&#20316;&#35265;&#31245;&#21518;&#20195;&#30721;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movb</span>    <span class="org-variable-name">%dl</span>, <span class="org-variable-name">%cl</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * EAX&#26159;&#19978;&#27425;div&#30340;&#32467;&#26524;,</span>
<span class="org-comment">         * &#20877;&#38500;&#20197;&#30913;&#22836;&#25968;H,</span>
<span class="org-comment">         * &#23601;&#21487;&#24471;&#21040;&#36215;&#22987;&#26609;&#38754;Cylinder</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#28165;&#38646;DX</span>
<span class="org-comment">         * &#22312;&#19978;&#38754;&#30340;divl&#25805;&#20316;&#20013;,</span>
<span class="org-comment">         *   &#38500;&#25968;&#26159;&#25159;&#21306;&#25968;(6&#20301;)</span>
<span class="org-comment">         *   &#22240;&#27492;&#20313;&#25968;&#19981;&#20250;&#36229;&#36807;&#19968;&#23383;&#33410;</span>
<span class="org-comment">         *   &#28165;&#38646;DX&#21017;EDX&#20840;&#37096;&#20026;0</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">xorw</span>    <span class="org-variable-name">%dx</span>, <span class="org-variable-name">%dx</span>        <span class="org-comment-delimiter">/* </span><span class="org-comment">zero %edx */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#25805;&#20316;&#25968;</span>
<span class="org-comment">         *   &#34987;&#38500;&#25968;: EDX:EAX=0:EAX</span>
<span class="org-comment">         *   &#38500;&#25968;: 4(%si) &#30913;&#30424;&#30913;&#22836;&#25968;H</span>
<span class="org-comment">         * &#32467;&#26524;</span>
<span class="org-comment">         *   &#21830;: EAX</span>
<span class="org-comment">         *   &#20313;&#25968;: EDX</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">divl</span>    4(<span class="org-variable-name">%si</span>)          <span class="org-comment-delimiter">/* </span><span class="org-comment">divide by number of heads */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#29616;&#22312;,</span>
<span class="org-comment">         *  AX&#20013;&#20445;&#23384;&#26377;&#36215;&#22987;&#26609;&#38754;C</span>
<span class="org-comment">         *  DX&#20013;&#20445;&#23384;&#26377;&#36215;&#22987;&#30913;&#22836;S</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">do we need too many cylinders? */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#21028;&#26029;&#36215;&#22987;&#26609;&#38754;&#26377;&#21542;&#36234;&#30028;</span>
<span class="org-comment">         * &#22914;&#26524;&#36234;&#30028;&#36339;&#36716;&#21040;LOCAL(geometry_error)</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">cmpw</span>    8(<span class="org-variable-name">%si</span>), <span class="org-variable-name">%ax</span>
        <span class="org-keyword">jge</span>     LOCAL(geometry_error)
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#27880;&#24847;,</span>
<span class="org-comment">         *  &#20247;&#25152;&#21608;&#30693;,&#20313;&#25968;&#19981;&#21487;&#33021;&#36229;&#36807;&#38500;&#25968;</span>
<span class="org-comment">         *  &#19978;&#38754;&#30340;&#38500;&#27861;&#20013;&#38500;&#25968;&#26159;&#30913;&#30424;&#30913;&#22836;&#25968;H</span>
<span class="org-comment">         *  &#22240;&#27492;&#36215;&#22987;&#30913;&#22836;&#19981;&#20250;&#36234;&#30028;,&#19981;&#38656;&#35201;&#26816;&#27979;&#26159;&#21542;&#36234;&#30028;</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">normalize sector start (1-based) */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#25159;&#21306;&#32034;&#24341;&#20174;1&#24320;&#22987;,</span>
<span class="org-comment">         * &#22240;&#27492;&#36215;&#22987;&#25159;&#21306;&#38656;&#35201;&#21152;1</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">incb</span>    <span class="org-variable-name">%cl</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#29616;&#22312;</span>
<span class="org-comment">         *  AX=&#36215;&#22987;&#26609;&#38754;C</span>
<span class="org-comment">         *  DX=&#36215;&#22987;&#30913;&#22836;H</span>
<span class="org-comment">         *  CL=&#36215;&#22987;&#25159;&#21306;S</span>
<span class="org-comment">         *</span>
<span class="org-comment">         * &#19979;&#38754;&#36890;&#36807;&#31227;&#20301;&#36816;&#31639;,&#23436;&#25104;</span>
<span class="org-comment">         *    CHS&#35835;&#30340;&#23492;&#23384;&#22120;&#35774;&#32622;</span>
<span class="org-comment">         * &#35814;&#32454;&#26597;&#30475;2.1.4&#33410;</span>
<span class="org-comment">         *</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">low bits of cylinder start */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#20445;&#23384;&#36215;&#22987;&#26609;&#38754;C&#30340;0~7&#20301;&#21040;CH</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movb</span>    <span class="org-variable-name">%al</span>, <span class="org-variable-name">%ch</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">high bits of cylinder start */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#20445;&#23384;&#36215;&#22987;&#26609;&#38754;C&#30340;8~9&#20301;&#21040;CL&#39640;2&#20301;</span>
<span class="org-comment">         * CL&#20013;&#20302;6&#20301;&#24050;&#32463;&#21253;&#21547;&#21512;&#27861;&#30340;&#36215;&#22987;&#25159;&#21306;</span>
<span class="org-comment">         * orb&#25110;&#25805;&#20316;&#36215;&#22987;&#26609;&#38754;8~9&#20301;&#21644;&#36215;&#22987;&#25159;&#21306;0~5&#20301;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">xorb</span>    <span class="org-variable-name">%al</span>, <span class="org-variable-name">%al</span>
        <span class="org-keyword">shrw</span>    $2, <span class="org-variable-name">%ax</span>
        <span class="org-keyword">orb</span>     <span class="org-variable-name">%al</span>, <span class="org-variable-name">%cl</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save head start */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * divl&#25805;&#20316;&#21518;,</span>
<span class="org-comment">         *  Dl&#23384;&#26377;&#36215;&#22987;&#30913;&#22836;,&#20445;&#23384;&#21040;AL&#20013;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movb</span>    <span class="org-variable-name">%dl</span>, <span class="org-variable-name">%al</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">restore %dl */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * DL&#20540;&#24050;&#34987;&#26356;&#25913;,&#36824;&#21407;&#30913;&#30424;&#39537;&#21160;&#22120;&#20540;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">popw</span>    <span class="org-variable-name">%dx</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">head start */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#20445;&#23384;&#36215;&#22987;&#30913;&#22836;&#21040;AH&#20013;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movb</span>    <span class="org-variable-name">%al</span>, <span class="org-variable-name">%dh</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * BIOS call "INT 0x13 Function 0x2" to read sectors from disk into memory</span>
<span class="org-comment"> *      Call with       %ah = 0x2</span>
<span class="org-comment"> *                      %al = number of sectors</span>
<span class="org-comment"> *                      %ch = cylinder</span>
<span class="org-comment"> *                      %cl = sector (bits 6-7 are high bits of "cylinder")</span>
<span class="org-comment"> *                      %dh = head</span>
<span class="org-comment"> *                      %dl = drive (0x80 for hard disk, 0x0 for floppy disk)</span>
<span class="org-comment"> *                      %es:%bx = segment:offset of buffer</span>
<span class="org-comment"> *      Return:</span>
<span class="org-comment"> *                      %al = 0x0 on success; err code on failure</span>
<span class="org-comment"> */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * GRUB_BOOT_MACHINE_BUFFER_SEG=0x7000</span>
<span class="org-comment">         *  &#32531;&#20914;&#21306;&#27573;&#22320;&#22336;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movw</span>    $GRUB_BOOT_MACHINE_BUFFER_SEG, <span class="org-variable-name">%bx</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%bx</span>, <span class="org-variable-name">%es</span>        <span class="org-comment-delimiter">/* </span><span class="org-comment">load %es segment with disk buffer */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#35843;&#29992;INT 13H, AH=02H&#25191;&#34892;CHS&#35835;</span>
<span class="org-comment">         *   &#32531;&#20914;&#21306;segment:offset=0x7000:0x0000</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">xorw</span>    <span class="org-variable-name">%bx</span>, <span class="org-variable-name">%bx</span>        <span class="org-comment-delimiter">/* </span><span class="org-comment">%bx = 0, put it at 0 in the segment */</span>
        <span class="org-keyword">movw</span>    $0x0201, <span class="org-variable-name">%ax</span>    <span class="org-comment-delimiter">/* </span><span class="org-comment">function 2 */</span>
        <span class="org-keyword">int</span>     $0x13
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#26816;&#27979;CHS&#35835;&#26159;&#21542;&#25104;&#21151;</span>
<span class="org-comment">         *  CHS&#35835;&#25104;&#21151;CF&#28165;&#38646;,&#22833;&#36133;&#21017;&#32622;1</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">jc</span>      LOCAL(read_error)
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#35774;&#32622;BX&#20026;&#32531;&#20914;&#21306;&#27573;&#22320;&#22336;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%es</span>, <span class="org-variable-name">%bx</span>
<span class="org-function-name">LOCAL</span>(copy_buffer):
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * We need to save %cx and %si because the startup code in</span>
<span class="org-comment">         * kernel uses them without initializing them.</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#26080;&#35770;CHS&#25110;LBA,&#19968;&#25159;&#21306;&#30340;&#20869;&#23481;&#37117;&#34987;&#25918;&#32622;&#22312;</span>
<span class="org-comment">         *  segment:offset=%bx:0&#22788;</span>
<span class="org-comment">         * &#36825;&#37324;&#23558;&#25968;&#25454;&#25644;&#36816;&#21040;0x0000:0x8000&#24182;&#36339;&#36716;&#25191;&#34892;</span>
<span class="org-comment">         *</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#23492;&#23384;&#22120;&#21387;&#26632;, &#22240;&#20026;</span>
<span class="org-comment">         *   &#25968;&#25454;&#25644;&#36816;&#25805;&#20316;&#23558;&#20351;&#29992;&#36825;&#20123;&#23492;&#23384;&#22120;</span>
<span class="org-comment">         *   &#32780;GRUB&#31532;&#20108;&#27493;&#23558;&#20551;&#23450;&#36825;&#20123;&#23492;&#23384;&#22120;&#21253;&#21547;&#27491;&#30830;&#20540;</span>
<span class="org-comment">         *   &#24182;&#30452;&#25509;&#20351;&#29992;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">pusha</span>
        <span class="org-keyword">pushw</span>   <span class="org-variable-name">%ds</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * movsw&#25351;&#20196;:</span>
<span class="org-comment">         *  &#25644;&#36816;&#20004;&#23383;&#33410;&#25968;&#25454;</span>
<span class="org-comment">         *  &#20351;&#29992;segment:offset=DS:SI&#20316;&#20026;&#28304;&#25805;&#20316;&#25968;</span>
<span class="org-comment">         *  &#20351;&#29992;segment:offset=ES:DI&#20316;&#20026;&#30446;&#30340;&#25805;&#20316;&#25968;</span>
<span class="org-comment">         *</span>
<span class="org-comment">         * rep&#25351;&#20196;:</span>
<span class="org-comment">         *  &#20351;&#29992;CX&#23492;&#23384;&#22120;&#20316;&#20026;&#24490;&#29615;&#26631;&#35760;,</span>
<span class="org-comment">         *  &#24490;&#29615;&#25191;&#34892;&#32039;&#36319;&#20854;&#21518;&#30340;&#25351;&#20196;CX&#27425;</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * GRUB_BOOT_MACHINE_KERNEL_ADDR=0x8000</span>
<span class="org-comment">         * &#35774;&#32622;&#24490;&#29615;&#27425;&#25968;&#20026;100&#27425;</span>
<span class="org-comment">         * &#35774;&#32622;DS:SI=0x7000:0x0000&#21363;CHS/LBA&#35835;&#30340;&#32531;&#20914;&#21306;</span>
<span class="org-comment">         * &#35774;&#32622;ES:DI=0x0000:0x8000, &#25968;&#25454;&#23558;&#25644;&#36816;&#21040;&#36825;&#37324;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movw</span>    $0x100, <span class="org-variable-name">%cx</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%bx</span>, <span class="org-variable-name">%ds</span>
        <span class="org-keyword">xorw</span>    <span class="org-variable-name">%si</span>, <span class="org-variable-name">%si</span>
        <span class="org-keyword">movw</span>    $GRUB_BOOT_MACHINE_KERNEL_ADDR, <span class="org-variable-name">%di</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%si</span>, <span class="org-variable-name">%es</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * DF&#28165;&#38646;</span>
<span class="org-comment">         *  movsw&#33258;&#21160;&#22686;&#21152;&#28304;&#21644;&#30446;&#30340;&#25805;&#20316;&#25968;&#20540;</span>
<span class="org-comment">         *  &#28165;&#38646;&#21518;&#27599;&#27425;&#25191;&#34892;movsw, SI&#21644;DI&#37117;&#21152;2</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">cld</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#24490;&#29615;&#25644;&#36816;</span>
<span class="org-comment">         *  &#25226;0x7000:0x0000&#22788;&#30340;512&#23383;&#33410;&#25644;&#36816;&#21040;0x0000:0x8000&#22788;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">rep</span>
        <span class="org-keyword">movsw</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#36824;&#21407;&#23492;&#23384;&#22120;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">popw</span>    <span class="org-variable-name">%ds</span>
        <span class="org-keyword">popa</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">boot kernel */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#36339;&#36716;&#21040;0x0000:0x8000&#25191;&#34892;</span>
<span class="org-comment">         * &#36825;&#37324;&#23384;&#25918;&#30340;&#26159;&#21018;&#25165;&#24471;&#21040;&#30340;&#25351;&#20196;&#25968;&#25454;</span>
<span class="org-comment">         * &#19968;&#27425;&#25104;&#21151;&#30340;GRUB&#24341;&#23548;&#37117;&#20250;&#25191;&#34892;&#21040;&#36825;&#37324;</span>
<span class="org-comment">         * &#27492;&#21518;&#23558;&#36827;&#20837;&#31532;&#20108;&#27493;&#25191;&#34892;</span>
<span class="org-comment">         * &#36825;&#37324;&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#20445;&#23384;&#30340;BPB&#25968;&#25454;</span>
<span class="org-comment">         *    &#22312;&#21518;&#26469;&#30340;&#31532;&#20108;&#27493;(diskboot.S)&#21450;&#31532;&#19977;&#27493;(startup.S)&#20013;&#36824;&#20250;&#29992;&#21040;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">jmp</span>     *(kernel_address)
<span class="org-comment-delimiter">/* </span><span class="org-comment">END OF MAIN LOOP */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * BIOS Geometry translation error (past the end of the disk geometry!).</span>
<span class="org-comment"> */</span>
 <span class="org-comment-delimiter">/*</span>
<span class="org-comment">  * &#20197;&#19979;&#26159;&#20960;&#20010;&#38169;&#35823;&#22788;&#29702;&#20989;&#25968;</span>
<span class="org-comment">  * &#21521;&#32456;&#31471;&#36755;&#20986;&#38169;&#35823;&#25552;&#31034;&#20449;&#24687;&#24182;&#31561;&#24453;&#25163;&#21160;&#20851;&#26426;&#25110;&#37325;&#21551;</span>
<span class="org-comment">  */</span>

<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#21521;&#32456;&#31471;&#36755;&#20986;&#38169;&#35823;&#25552;&#31034;"Geom"&#24182;&#36339;&#36716;&#21040;LOCAL(general_error)</span>
<span class="org-comment"> * &#30913;&#30424;&#29289;&#29702;&#32467;&#26500;&#38169;&#35823;(&#19968;&#33324;&#26159;C/H/S&#21442;&#25968;&#36234;&#30028;&#23548;&#33268;&#30340;&#38169;&#35823;)</span>
<span class="org-comment"> */</span>
<span class="org-function-name">LOCAL</span>(geometry_error):
        <span class="org-keyword">MSG</span>(geometry_error_string)
        <span class="org-keyword">jmp</span>     LOCAL(general_error)
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * Disk probe failure.</span>
<span class="org-comment"> */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#21521;&#32456;&#31471;&#36755;&#20986;&#38169;&#35823;&#25552;&#31034;"Hard Disk"&#24182;&#36339;&#36716;&#21040;LOCAL(general_error)</span>
<span class="org-comment"> * &#19981;&#25903;&#25345;LBA&#25110;&#32773;LBA&#35835;&#22833;&#36133;&#30340;&#30828;&#30424;,&#22312;&#33719;&#21462;CHS&#21442;&#25968;&#26102;&#38169;&#35823;</span>
<span class="org-comment"> */</span>
<span class="org-function-name">LOCAL</span>(hd_probe_error):
        <span class="org-keyword">MSG</span>(hd_probe_error_string)
        <span class="org-keyword">jmp</span>     LOCAL(general_error)
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * Read error on the disk.</span>
<span class="org-comment"> */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#21521;&#32456;&#31471;&#36755;&#20986;&#38169;&#35823;&#25552;&#31034;"Hard Disk"&#24182;&#36339;&#36716;&#21040;LOCAL(general_error)</span>
<span class="org-comment"> * CHS&#35835;&#22833;&#36133;&#38169;&#35823;</span>
<span class="org-comment"> */</span>
<span class="org-function-name">LOCAL</span>(read_error):
        <span class="org-keyword">MSG</span>(read_error_string)
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#21521;&#32456;&#31471;&#36755;&#20986;&#38169;&#35823;&#25552;&#31034;"Error/r/n"</span>
<span class="org-comment"> */</span>
<span class="org-function-name">LOCAL</span>(general_error):
        <span class="org-keyword">MSG</span>(general_error_string)
<span class="org-comment-delimiter">/* </span><span class="org-comment">go here when you need to stop the machine hard after an error condition */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">tell the BIOS a boot failure, which may result in no effect */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#21521;BIOS&#25253;&#21578;&#24341;&#23548;&#22833;&#36133;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">int</span>     $0x18
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * BIOS&#23545;&#24341;&#23548;&#22833;&#36133;&#27809;&#26377;&#21709;&#24212;&#21040;&#36798;&#36825;&#37324;</span>
<span class="org-comment"> * &#27492;&#26102;&#29992;&#25143;&#38656;&#35201;&#25163;&#21160;&#20851;&#26426;/&#37325;&#21551;</span>
<span class="org-comment"> */</span>
<span class="org-function-name">LOCAL</span>(stop):
        <span class="org-keyword">jmp</span>     LOCAL(stop)
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#38169;&#35823;&#25552;&#31034;&#23383;&#31526;&#20018;</span>
<span class="org-comment"> */</span>
<span class="org-function-name">notification_string</span>:    .asciz <span class="org-string">"GRUB "</span>
<span class="org-function-name">geometry_error_string</span>:  .asciz <span class="org-string">"Geom"</span>
<span class="org-function-name">hd_probe_error_string</span>:  .asciz <span class="org-string">"Hard Disk"</span>
<span class="org-function-name">read_error_string</span>:      .asciz <span class="org-string">"Read"</span>
<span class="org-function-name">general_error_string</span>:   .asciz <span class="org-string">" Error/r/n"</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * message: write the string pointed to by %si</span>
<span class="org-comment"> *</span>
<span class="org-comment"> *   WARNING: trashes %si, %ax, and %bx</span>
<span class="org-comment"> */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#38169;&#35823;&#25552;&#31034;&#20989;&#25968;</span>
<span class="org-comment"> * &#20351;&#29992;BIOS INT 10H, AH=0EH&#35843;&#29992;&#21521;&#32456;&#31471;&#36755;&#20986;&#38169;&#35823;&#25552;&#31034;&#23383;&#31526;&#20018;</span>
<span class="org-comment"> * &#20851;&#20110;&#35813;&#20013;&#26029;&#32454;&#33410;&#26597;&#30475;2.1.6&#33410;</span>
<span class="org-comment"> */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * Use BIOS "int 10H Function 0Eh" to write character in teletype mode</span>
<span class="org-comment">         *      %ah = 0xe       %al = character</span>
<span class="org-comment">         *      %bh = page      %bl = foreground color (graphics modes)</span>
<span class="org-comment">         */</span>
<span class="org-function-name">1</span>:
        <span class="org-keyword">movw</span>    $0x0001, <span class="org-variable-name">%bx</span>
        <span class="org-keyword">movb</span>    $0xe, <span class="org-variable-name">%ah</span>
        <span class="org-keyword">int</span>     $0x10           <span class="org-comment-delimiter">/* </span><span class="org-comment">display a byte */</span>
<span class="org-function-name">LOCAL</span>(message):
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * lodsb&#21152;&#36733;DS:SI&#25351;&#21521;&#30340;&#19968;&#23383;&#33410;&#25968;&#25454;&#21040;AL</span>
<span class="org-comment">         * &#21152;&#36733;&#21518;&#33258;&#21160;&#26356;&#26032;SI&#20540;(&#25351;&#21521;&#19979;&#19968;&#23383;&#31526;)</span>
<span class="org-comment">         * &#22914;&#26524;&#23383;&#31526;&#20026;'/0'&#36820;&#22238;,</span>
<span class="org-comment">         * &#21542;&#21017;&#35843;&#29992;BIOS&#20013;&#26029;&#36755;&#20986;&#35813;&#23383;&#31526;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">lodsb</span>
        <span class="org-keyword">cmpb</span>    $0, <span class="org-variable-name">%al</span>
        <span class="org-keyword">jne</span>     1b      <span class="org-comment-delimiter">/* </span><span class="org-comment">if not end of string, jmp to display */</span>
        <span class="org-keyword">ret</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         *  Windows NT breaks compatibility by embedding a magic</span>
<span class="org-comment">         *  number here.</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * WindowsNT&#22312;&#36825;&#37324;&#25554;&#20837;&#19968;&#20010;&#24187;&#25968;</span>
<span class="org-comment">         * &#22312;Linux&#19979;, &#25226;&#36825;&#20010;&#20301;&#32622;&#30340;6&#20010;&#23383;&#33410;&#28165;&#38646;</span>
<span class="org-comment">         * &#19981;&#20250;&#23548;&#33268;&#20219;&#20309;&#38382;&#39064;</span>
<span class="org-comment">         * &#36825;&#20010;&#27979;&#35797;&#35814;&#35265;2.3&#33410;&#26411;&#23614;&#37096;&#20998;</span>
<span class="org-comment">         */</span>
        . = _start + GRUB_BOOT_MACHINE_WINDOWS_NT_MAGIC
<span class="org-function-name">nt_magic</span>:
        <span class="org-keyword">.long</span> 0
        <span class="org-keyword">.word</span> 0
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         *  This is where an MBR would go if on a hard disk.  The code</span>
<span class="org-comment">         *  here isn't even referenced unless we're on a floppy.  Kinda</span>
<span class="org-comment">         *  sneaky, huh?</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * GRUB_BOOT_MACHINE_PART_START=0x1BE</span>
<span class="org-comment">         * &#20174;&#36825;&#37324;&#24320;&#22987;&#26159;&#30828;&#30424;MBR&#30340;DPT&#21306;</span>
<span class="org-comment">         * &#22914;&#26524;&#26159;&#23433;&#35013;&#22312;&#36719;&#30424;,&#21017;&#36825;&#37324;&#23384;&#25918;</span>
<span class="org-comment">         * &#36719;&#30424;&#39537;&#21160;&#22120;&#22797;&#20301;&#21644;CHS&#35835;&#21462;&#30340;&#25351;&#20196;</span>
<span class="org-comment">         */</span>
        . = _start + GRUB_BOOT_MACHINE_PART_START
<span class="org-function-name">part_start</span>:
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#35299;&#20915;&#36719;&#30424;&#33719;&#21462;CHS&#21442;&#25968;&#38169;&#35823;&#30340;&#38382;&#39064;</span>
<span class="org-comment"> *</span>
<span class="org-comment"> * &#19968;&#31995;&#21015;&#21487;&#33021;&#30340;&#36719;&#30424;&#25159;&#21306;&#21442;&#25968;. &#21363;:</span>
<span class="org-comment"> *  &#36719;&#30424;&#21487;&#33021;&#30340;&#26368;&#22823;&#25159;&#21306;&#25968;</span>
<span class="org-comment"> *  &#24403;&#36719;&#30424;&#30340;CHS&#21442;&#25968;&#33719;&#21462;&#35843;&#29992;&#22833;&#36133;&#20197;&#21518;,</span>
<span class="org-comment"> *  &#35774;&#32622;&#26609;&#38754;&#21644;&#30913;&#22836;&#22343;&#20026;0,&#28982;&#21518;</span>
<span class="org-comment"> *  &#36941;&#21382;&#23581;&#35797;&#35835;&#21462;&#21487;&#33021;&#30340;&#26368;&#22823;&#25159;&#21306;</span>
<span class="org-comment"> *  &#25104;&#21151;&#20197;&#21518;, &#35774;&#32622;CHS&#21442;&#25968;&#20026;C/H/S=0/0/CL</span>
<span class="org-comment"> *  &#24182;&#36827;&#20837;LOCAL(final_init)&#24182;&#25191;&#34892;&#27491;&#24120;&#30340;CHS&#27969;&#31243;</span>
<span class="org-comment"> *</span>
<span class="org-comment"> * &#20363;&#22914;, &#20551;&#35774;&#31532;&#19968;&#27425;&#22797;&#20301;/&#35835;&#27979;&#35797;&#25104;&#21151;,&#21017;</span>
<span class="org-comment"> *    &#36719;&#30424;C/H/S=0/0/36. &#21487;&#23547;&#22336;&#33539;&#22260;36*512=18KiB</span>
<span class="org-comment"> */</span>
<span class="org-function-name">probe_values</span>:
        <span class="org-keyword">.byte</span>   36, 18, 15, 9, 0
<span class="org-function-name">LOCAL</span>(floppy_probe):
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> *  Perform floppy probe.</span>
<span class="org-comment"> */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * LOCAL(probe_loop)&#24490;&#29615;&#20013;&#24635;&#26159;&#20808;&#36882;&#22686;SI</span>
<span class="org-comment">         * &#28982;&#21518;&#21462;&#20540;,&#22240;&#27492;&#35774;&#32622;SI&#21021;&#22987;&#20540;&#20026;$probe_values-1</span>
<span class="org-comment">         * &#36825;&#26679;&#21487;&#20197;&#38450;&#27490;&#38169;&#36807;probe_values&#20013;&#30340;&#31532;&#19968;&#20010;&#25968;&#25454;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movw</span>    $probe_values - 1, <span class="org-variable-name">%si</span>
<span class="org-function-name">LOCAL</span>(probe_loop):
        <span class="org-comment-delimiter">/* </span><span class="org-comment">reset floppy controller INT 13h AH=0 */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#22797;&#20301;&#36719;&#30424;&#39537;&#21160;&#22120;: BIOS INT 13H, AH=00H</span>
<span class="org-comment">        */</span>
        <span class="org-keyword">xorw</span>    <span class="org-variable-name">%ax</span>, <span class="org-variable-name">%ax</span>
        <span class="org-keyword">int</span>     $0x13
        <span class="org-keyword">incw</span>    <span class="org-variable-name">%si</span>
        <span class="org-keyword">movb</span>    (<span class="org-variable-name">%si</span>), <span class="org-variable-name">%cl</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">if number of sectors is 0, display error and die */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#36215;&#22987;&#25159;&#21306;&#26159;&#21542;&#20026;0</span>
<span class="org-comment">         * &#22914;&#26524;&#20026;0&#21017;&#25552;&#31034;&#38169;&#35823;&#32467;&#26463;</span>
<span class="org-comment">         *</span>
<span class="org-comment">         * LOCAL(probe_loop)&#23558;&#20381;&#27425;&#36941;&#21382;probe_values&#20013;&#35774;&#23450;&#30340;&#20540;,</span>
<span class="org-comment">         * &#30452;&#21040;&#20986;&#29616;0&#21017;&#32467;&#26463;&#36941;&#21382;, &#24182;&#36755;&#20986;&#38169;&#35823;&#25552;&#31034;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">cmpb</span>    $0, <span class="org-variable-name">%cl</span>
        <span class="org-keyword">jne</span>     1f
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * Floppy disk probe failure.</span>
<span class="org-comment"> */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#32456;&#31471;&#36755;&#20986;"Floppy"&#24182;&#36339;&#36716;&#21040;LOCAL(general_error)</span>
<span class="org-comment"> */</span>
        <span class="org-keyword">MSG</span>(fd_probe_error_string)
        <span class="org-keyword">jmp</span>     LOCAL(general_error)
<span class="org-comment-delimiter">/* </span><span class="org-comment">"Floppy" */</span>
<span class="org-function-name">fd_probe_error_string</span>:  .asciz <span class="org-string">"Floppy"</span>
<span class="org-function-name">1</span>:
        <span class="org-comment-delimiter">/* </span><span class="org-comment">perform read */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * BIOS INT 13H, AH=02H&#35835;(&#21644;&#30828;&#30424;CHS&#35835;&#20351;&#29992;&#21516;&#19968;BIOS&#20013;&#26029;)</span>
<span class="org-comment">         *  &#35774;&#32622;CH&#20026;0, CL&#20026;&#36215;&#22987;&#25159;&#21306;,&#26609;&#38754;C&#20026;0</span>
<span class="org-comment">         *  &#35774;&#32622;CL&#20013;&#20026;probe_values&#20013;&#30340;&#20854;&#20013;&#19968;&#20010;</span>
<span class="org-comment">         *  &#35774;&#32622;DH&#20026;0, &#30913;&#22836;H&#20026;0</span>
<span class="org-comment">         *  &#35774;&#32622;AL&#20026;1, &#21482;&#35835;&#21462;&#19968;&#25159;&#21306;</span>
<span class="org-comment">         *  &#35774;&#32622;AH&#20026;2, BIOS INT 13H CHS&#35835;&#20989;&#25968;&#24207;&#21495;</span>
<span class="org-comment">         *  &#35774;&#32622;&#32531;&#20914;&#21306;segment:offset=ES:BX=0x0000:0x7000</span>
<span class="org-comment">         * INT 13H&#35843;&#29992;&#23558;&#35835;&#21462;&#36719;&#30424;0&#26609;&#38754;0&#30913;&#22836;CL&#25159;&#21306;</span>
<span class="org-comment">         *    &#22914;&#26524;&#35835;&#25104;&#21151;,&#36339;&#36716;&#21040;LOCAL(final_init)</span>
<span class="org-comment">         *    &#23558;&#20877;&#27425;&#25191;&#34892;CHS&#35835;</span>
<span class="org-comment">         *    &#22240;&#27492;&#36825;&#37324;&#30340;&#32531;&#20914;&#21306;&#25968;&#25454;&#24182;&#19981;&#20250;&#34987;&#22788;&#29702;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movw</span>    $GRUB_BOOT_MACHINE_BUFFER_SEG, <span class="org-variable-name">%bx</span>
        <span class="org-keyword">movw</span>    $0x201, <span class="org-variable-name">%ax</span>
        <span class="org-keyword">movb</span>    $0, <span class="org-variable-name">%ch</span>
        <span class="org-keyword">movb</span>    $0, <span class="org-variable-name">%dh</span>
        <span class="org-keyword">int</span>     $0x13
        <span class="org-comment-delimiter">/* </span><span class="org-comment">if error, jump to "LOCAL(probe_loop)" */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#22833;&#36133;&#36339;&#36716;&#22238;LOCAL(probe_loop)&#32487;&#32493;&#23581;&#35797;</span>
<span class="org-comment">         * &#25104;&#21151;&#36339;&#36716;&#21040;LOCAL(final_init)</span>
<span class="org-comment">         * &#19979;&#27425;&#35762;&#23581;&#35797;&#35835;&#21462;probe_values&#35774;&#23450;&#30340;&#21478;&#19968;&#25159;&#21306;</span>
<span class="org-comment">         * &#22914;&#26524;probe_values&#25152;&#26377;&#20540;&#37117;&#35835;&#22833;&#36133;,&#25552;&#31034;&#38169;&#35823;&#20449;&#24687;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">jc</span>      LOCAL(probe_loop)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">%cl is already the correct value! */</span>
        <span class="org-keyword">movb</span>    $1, <span class="org-variable-name">%dh</span>
        <span class="org-keyword">movb</span>    $79, <span class="org-variable-name">%ch</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#24184;&#36816;&#30340;,&#21028;&#26029;&#20986;0&#26609;&#38754;0&#30913;&#22836;CL&#25159;&#21306;&#26159;&#21487;&#20197;&#24037;&#20316;&#30340;</span>
<span class="org-comment">         * &#22240;&#27492;&#36339;&#36716;&#22238;LOCAL(final_init)</span>
<span class="org-comment">         * &#22312;&#37027;&#20799;&#23558;&#20445;&#23384;&#36719;&#30424;&#30340;CHS&#21442;&#25968;&#20026;C/H/S=0/0/CL</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">jmp</span>     LOCAL(final_init)
        . = _start + GRUB_BOOT_MACHINE_PART_END
<span class="org-comment-delimiter">/* </span><span class="org-comment">the last 2 bytes in the sector 0 contain the signature */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * MBR&#24187;&#25968;,&#23567;&#31471;(little endian) &#19979;&#24635;&#26159;&#31561;&#20110;0xAA55</span>
<span class="org-comment"> */</span>
        <span class="org-keyword">.word</span>   GRUB_BOOT_MACHINE_SIGNATURE
</pre>
</div>
</div>
<div id="postamble" class="status">
<div id="disqus_thread" class="disqus container"></div>
<script>
  var disqus_config = function () {
    this.page.url = 'http://ycode.org/blogs/bootloader-grub-04-boot.S-analysis.html';
    this.page.identifier = 'bootloader-grub-04-boot.S-analysis.html';
  };

  (function() {
    var d = document, s = d.createElement('script');
    s.src = 'https://yanyg.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

<div class="copyright">
2012-2020 Copyright&copy; <i> YANYG - Powered by Emacs Orgmode</i>
</div>
</div>
</body>
</html>
