<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<!-- 2018-07-04 Wed 22:22 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<title>深入理解 GNU GRUB - 03 diskboot.S</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="yanyg" />
<link rel="stylesheet" type="text/css" href="../r/org-code.css" />
<link rel="stylesheet" type="text/css" href="../r/blog-bluetopbar.css" />
<script type="text/javascript" src="../r/MathJax.js?config=TeX-AMS_HTML"> </script>
<script type="text/javascript" src="../r/bootstrap.min.js"></script>
<script type="text/javascript" src="../r/jquery.stickytableheaders.min.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="preamble" class="status">
<a href="../index.html">Yanyg - SAN Software Engineer</a>
<div class="sitelinks">
  <a href="archives.html">Archives</a> |
  <a href="theindex.html">Index</a> |
  <a href="tags.html">TAGS</a> |
  <a href="https://github.com/yygcode">Github</a> |
  <a href="../about.html">About Me</a>
</div>
</div>
<div id="content">
<h1 class="title">深入理解 GNU GRUB - 03 diskboot.S</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org0fc620c">1. diskboot.S执行时的环境</a></li>
<li><a href="#org92c30d8">2. diskboot.S代码结构</a></li>
<li><a href="#orgf1647fc">3. diskboot.S详细注释</a></li>
</ul>
</div>
</div>
<p>
本文最初发布于CSDN：<a href="https://blog.csdn.net/cppgp/article/details/6408231">https://blog.csdn.net/cppgp/article/details/6408231</a>
</p>

<p>
diskboot.S位于目录boot/i386/pc/，最终生成diskboot.img。这部分指令被加载到0x8000~0x81FF。
diskboot.img加载GRUB内核到0x8200开始的内存位置，并将系统控制权交给GRUB内核。用到的BIOS
例程和boot.S中相同。因此本章只描述如下内容：
</p>
<ol class="org-ol">
<li>diskboot.S执行时的环境</li>
<li>diskboot.S代码结构</li>
<li>diskboot.S详细注释</li>
<li>diskboot.S模拟实现</li>
</ol>

<p>
本章最后也模拟一个diskboot的实现。
</p>

<div id="outline-container-org0fc620c" class="outline-2">
<h2 id="org0fc620c"><span class="section-number-2">1</span> diskboot.S执行时的环境</h2>
<div class="outline-text-2" id="text-1">
<p>
boot.img跳转到bootdisk.img之前，已经配置好堆栈和一些寄存器及参数值。因此diskboot假设如下条件已经是满足的：
</p>
<ol class="org-ol">
<li>堆栈。SS和SP已配置好，有可用的堆栈。</li>
<li>寄存器DL。DL中保存正确的引导驱动器。</li>
<li>寄存器SI。SI中保存DAP地址。</li>
<li>寄存器DS。设置有正确的数据段DS。</li>
</ol>
<p>
事实上，在跳转到diskboot.img之前，boot.img确实做好了配置。堆栈SS:SP=0x0000:0x2000；
DL中包含正确的引导驱动器；SI指向DAP地址，因此-1(%si)确定磁盘读取模式（LBA为1，CHS为0），如果是CHS读取，磁盘CHS参数含有正确值；数据段寄存器DS=0。
</p>
</div>
</div>

<div id="outline-container-org92c30d8" class="outline-2">
<h2 id="org92c30d8"><span class="section-number-2">2</span> diskboot.S代码结构</h2>
<div class="outline-text-2" id="text-2">
<p>
diskboot.S生成512字节机器码，其中0x0~0x147共328字节是指令，0x148~0x1FF共184字节用来保存数据集，每个数据集占用12字节，可以保存15个数据集。对于每个数据集，其中0~7字节表示起始扇区数，在安装时候指定；8~9字节表示扇区数，10~11字节表示目的段地址，都在生成镜像（grub-mkimage）时确定。必须存在一个扇区数为0的数据集表示数据集读取结束，因此可以存在14个有效数据集。当前只使用了一个。我反解了一个安装后的diskboot.img，显示只用了一个数据集，其值如下：
</p>
<ul class="org-ul">
<li>起始扇区LBA地址: 0x0000 0000 0000 0002</li>
<li>扇区数: 0x002e</li>
<li>目的段地址: 0x0820</li>
</ul>

<p>
可知，grub内核的起始扇区是2扇区，扇区数46（0x2E==46），加载到0x8200起始内存处。这个grub内核的大小为46*512=23KiB。
</p>

<p>
diskboot.S压栈首先保存驱动器。输出提示信息”loading”，设置第一个数据集的地址，然后进入循环读取数据。根据boot.img中设置的读取模式（LBA/CHS）和数据集中的起始扇区、扇区数、目的段地址，读取数据并保存到内存中（偏移量为0，因此目的段地址唯一确定内存地址）。每调用一次读中断，都提示一个”.”到终端，对于慢速存储设备，用户可以快速得到反馈，以免在加载数据期间，用户误以为死机而进行强制性关机措施等。在一个数据集内循环读取时，循环标签是LOCAL(setup_sectors)，一个数据集完成后，设置处理上一数据集，并跳转到LOCAL(bootloop)开始处理，如果这个数据集的扇区数为0，则跳转到LOCAL(bootit)，否则继续数据集内的循环LOCAL(setup_sectors)。
</p>

<p>
数据读取完毕后，执行LOCAL(bootit)处代码，这里将输出提示信息”\r\n”，还原DX寄存器（保存引导驱动器），并以CS:IP=0x0000:0x8200跳转执行，这里正是kernel.img所在内存地址。
BIOS读中断过程（LBA/CHS）参考boot.S中的注释，此处不再重复。
</p>
</div>
</div>

<div id="outline-container-orgf1647fc" class="outline-2">
<h2 id="orgf1647fc"><span class="section-number-2">3</span> diskboot.S详细注释</h2>
<div class="outline-text-2" id="text-3">
<p>
CSDN：<a href="https://blog.csdn.net/cppgp/article/details/6408235">https://blog.csdn.net/cppgp/article/details/6408235</a>
</p>
<div class="org-src-container">
<pre class="src src-asm"><span class="org-comment-delimiter">/*</span>
<span class="org-comment"> *  GRUB  --  GRand Unified Bootloader</span>
<span class="org-comment"> *  Copyright (C) 1999,2000,2001,2002,2006,2007,2009,2010   Free Software Foundation, Inc.</span>
<span class="org-comment"> *</span>
<span class="org-comment"> *  GRUB is free software: you can redistribute it and/or modify</span>
<span class="org-comment"> *  it under the terms of the GNU General Public License as published by</span>
<span class="org-comment"> *  the Free Software Foundation, either version 3 of the License, or</span>
<span class="org-comment"> *  (at your option) any later version.</span>
<span class="org-comment"> *</span>
<span class="org-comment"> *  GRUB is distributed in the hope that it will be useful,</span>
<span class="org-comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="org-comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="org-comment"> *  GNU General Public License for more details.</span>
<span class="org-comment"> *</span>
<span class="org-comment"> *  You should have received a copy of the GNU General Public License</span>
<span class="org-comment"> *  along with GRUB.  If not, see <a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">&lt;http://www.gnu.org/licenses/&gt;.</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> */</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment-delimiter"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">/*</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * cppgp &#27880;&#37322;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#26085;&#26399;: 2011-04-22</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * Email</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *    cppgp@qq.com,</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *    yanyg02@163.com</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * GRUB version:</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *    gnu grub-1.98</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> */</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
 </a><span class="org-comment-delimiter"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">/*</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * diskboot.S</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * 0x1FF&#20301;&#32622;&#20026;0xAA).</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *  &#25159;&#21306;&#25968;      : 0x002e</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> *  &#27573;&#22320;&#22336;      : 0x0820</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-comment"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> */</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-preprocessor"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">#include</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> </a><span class="org-string"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">&lt;grub/symbol.h&gt;</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">
</a><span class="org-preprocessor"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">#include</a></span><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h"> </a><span class="org-string"><a href="http://www.gnu.org/licenses/&gt;.
 */
/*
 * cppgp &#27880;&#37322;
 *
 * &#36716;&#36733;&#35831;&#27880;&#26126;&#21407;&#20316;&#32773;
 *
 * &#26085;&#26399;: 2011-04-22
 *
 * Email
 *    cppgp@qq.com,
 *    yanyg02@163.com
 *
 * GRUB version:
 *    gnu grub-1.98
 */
 /*
 * diskboot.S
 *
 * diskboot.S&#29983;&#25104;diskboot.img, &#20849;512&#23383;&#33410;
 *
 * &#23433;&#35013;&#31243;&#24207;&#26681;&#25454;&#23454;&#38469;&#24773;&#20917;, &#25913;&#20889;blocklist&#25968;&#25454;&#38598;. &#26368;&#22810;&#25903;&#25345;
 * 15&#20010;&#25968;&#25454;&#38598;, &#27599;&#20010;&#25968;&#25454;&#38598;&#21344;&#29992;12&#23383;&#33410;, 0~7&#23383;&#33410;&#34920;&#31034;&#36215;&#22987;
 * &#25159;&#21306;&#65292; 8~9&#23383;&#33410;&#34920;&#31034;&#35813;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;, 10~11&#34920;&#31034;&#30446;&#30340;
 * &#32531;&#20914;&#21306;&#36215;&#22987;&#27573;&#22320;&#22336;. &#24517;&#39035;&#26377;&#19968;&#20010;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;&#23383;&#27573;
 * &#20026;0, &#31243;&#24207;&#26681;&#25454;&#27492;&#21028;&#26029;&#35835;&#21462;&#32467;&#26463;.
 *
 *
 * &#23433;&#35013;&#22312;&#30828;&#30424;&#19978;&#26102;,DPT&#37096;&#20998;(0x1BE~0x1FD)&#20445;&#30041;&#19981;&#21464;,
 *
 * &#23433;&#35013;&#22312;&#36719;&#30424;&#19978;&#26102;, DPT&#37096;&#20998;(0x1BE~0x1FD)&#26159;&#36719;&#30424;&#22797;&#20301;&#21644;
 * &#25159;&#21306;&#25506;&#27979;&#20195;&#30721;. &#25159;&#21306;&#26411;&#23614;&#20004;&#23383;&#33410;
 *
 * &#25159;&#21306;&#26368;&#21518;&#20004;&#23383;&#33410; &#20889;&#20837;0xAA55 (&#23567;&#31471;&#34920;&#31034;, 0x1FE&#20301;&#32622;&#20026;0x55,
 * 0x1FF&#20301;&#32622;&#20026;0xAA).
 *
 * diskboot.img&#24320;&#26426;&#26102;&#21152;&#36733;&#21040;0x8000~0x81FF, &#24182;&#20197;CS:IP=0x0000:0x8000
 * &#36339;&#36716;&#25191;&#34892;, &#23427;&#23558;&#21152;&#36733;kernel.img&#21040;&#20869;&#23384;0x8200&#24320;&#22987;&#20301;&#32622;,&#24182;&#20197;
 * CS:IP=0x0000:0x8200&#36339;&#36716;&#25191;&#34892;. kernel.img&#25159;&#21306;&#25968;&#21487;&#33021;&#26377;&#22810;&#20010;,
 * &#22312;&#29983;&#25104;&#24433;&#20687;(grub-mkinage)&#26102;&#30830;&#23450;.
 *
 * diskboot.img&#21487;&#20197;&#20351;&#29992;boot.img&#35774;&#32622;&#30340;&#22534;&#26632;&#21644;&#23492;&#23384;&#22120;&#20540;,&#20294;&#26159;&#22312;
 * &#36339;&#36716;&#21040;0x8200&#20043;&#21069;,&#35201;&#30830;&#20445;&#27809;&#26377;&#26356;&#25913;&#36825;&#20123;&#35774;&#32622;, &#22240;&#20026;kernel.img
 * &#36824;&#20250;&#29992;&#21040;&#36825;&#20123;&#23492;&#23384;&#22120;.
 *
 * diskboot.img&#24403;&#21069;&#21482;&#29992;&#21040;&#19968;&#20010;&#25968;&#25454;&#38598;. &#22312;&#25105;&#30340;&#26426;&#22120;&#19978;, &#21453;&#35299;
 * &#23433;&#35013;&#20197;&#21518;&#30340;diskboot.img, &#24471;&#21040;&#30340;&#20540;&#22914;&#19979;:
 *
 *  &#36215;&#22987;&#25159;&#21306;: 0x0000 0000 0000 0002
 *  &#25159;&#21306;&#25968;      : 0x002e
 *  &#27573;&#22320;&#22336;      : 0x0820
 */
#include &lt;grub/symbol.h&gt;
#include &lt;grub/machine/boot.h">&lt;grub/machine/boot.h&gt;</a></span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> *  defines for the code go here</span>
<span class="org-comment"> */</span>
<span class="org-preprocessor">#define</span> <span class="org-function-name">MSG</span>(<span class="org-variable-name">x</span>)  movw $x, <span class="org-variable-name">%si</span><span class="org-comment-delimiter">; </span><span class="org-comment">call LOCAL(message)</span>
        <span class="org-keyword">.file</span>   <span class="org-string">"diskboot.S"</span>
        <span class="org-keyword">.text</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">Tell GAS to generate 16-bit instructions so that this code works</span>
<span class="org-comment">           in real mode. */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#21578;&#35785;&#27719;&#32534;&#22120;&#20135;&#29983;16&#20301;&#20195;&#30721;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">.code16</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#22914;&#21516;&#22312;boot.S&#25152;&#25351;&#26126;&#30340;,</span>
<span class="org-comment">         * &#27492;&#22788;&#30340;&#20195;&#30721;&#34987;&#21152;&#36733;&#22312;&#20869;&#23384;0x8000&#22788;</span>
<span class="org-comment">         * &#24182;&#19988;&#20197;CS:IP=0x0000:0x8000&#36339;&#36716;&#25191;&#34892;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">.globl</span>  start, _start
<span class="org-function-name">start</span>:
<span class="org-function-name">_start</span>:
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * _start is loaded at 0x2000 and is jumped to with</span>
<span class="org-comment">         * CS:IP 0:0x2000 in kernel.</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * we continue to use the stack for boot.img and assume that</span>
<span class="org-comment">         * some registers are set to correct values. See boot.S</span>
<span class="org-comment">         * for more information.</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * boot.img&#20013;&#24050;&#35774;&#32622;&#22534;&#26632;(SS:SP=0x0000:0x2000)</span>
<span class="org-comment">         * &#24182;&#19988;&#20551;&#23450;&#19968;&#20123;&#23492;&#23384;&#22120;&#34987;&#35774;&#32622;&#20026;&#27491;&#30830;&#20540;</span>
<span class="org-comment">         * &#20854;&#20013;&#21253;&#25324;:</span>
<span class="org-comment">         *  DL: &#24341;&#23548;&#39537;&#21160;&#22120;</span>
<span class="org-comment">         *  SI: DAP&#22320;&#22336;(BPB&#25968;&#25454;&#22359;,</span>
<span class="org-comment">         *       -1(%si)&#21487;&#33719;&#21462;&#35835;&#21462;&#27169;&#24335;LBA/CHS)</span>
<span class="org-comment">         *       (%si)LBA&#35835;&#30340;DAP&#21442;&#25968;&#36215;&#22987;&#22320;&#22336;</span>
<span class="org-comment">         *       &#25110;CHS&#21442;&#25968;&#23384;&#25918;&#22320;&#22336;</span>
<span class="org-comment">         *  DS=SS=0: &#25968;&#25454;&#27573;/&#22534;&#26632;&#27573;&#22320;&#22336;</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save drive reference first thing! */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#39537;&#21160;&#22120;&#21387;&#26632; */</span>
        <span class="org-keyword">pushw</span>   <span class="org-variable-name">%dx</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">print a notification message on the screen */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#21521;&#32456;&#31471;&#36755;&#20986;&#25552;&#31034;&#20449;&#24687;"loading"</span>
<span class="org-comment">         * notification_string="loading"</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">pushw</span>   <span class="org-variable-name">%si</span>
        <span class="org-keyword">MSG</span>(notification_string)
        <span class="org-keyword">popw</span>    <span class="org-variable-name">%si</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">this sets up for the first run through "bootloop" */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * GRUB_BOOT_MACHINE_LIST_SIZE=12</span>
<span class="org-comment">         * (fitstlist-12) ~ firstlist&#20849;12&#23383;&#33410;&#31354;&#38388;, &#25351;&#23450;GRUB&#20869;&#26680;&#36215;&#22987;&#25159;&#21306;,&#25159;&#21306;&#25968;,&#25335;&#36125;&#26102;&#30340;&#20195;&#30721;&#27573;</span>
<span class="org-comment">         * &#36215;&#22987;&#25159;&#21306;8&#23383;&#33410;, &#25159;&#21306;&#25968;2&#23383;&#33410;,&#20195;&#30721;&#27573;2&#23383;&#33410;</span>
<span class="org-comment">         * &#20195;&#30721;&#20013;&#30340;&#26631;&#31614;&#20998;&#21035;&#26159;:blocklist_default_start, blocklist_default_len, blocklist_default_seg</span>
<span class="org-comment">         *  blocklist_default_start&#40664;&#35748;&#20540;2&#65292;&#22312;&#23433;&#35013;&#26102;&#20505;&#25351;&#23450;(grub-install), &#20915;&#23450;GRUB&#20869;&#26680;&#36215;&#22987;&#25159;&#21306;&#30340;LBA&#22320;&#22336;</span>
<span class="org-comment">         *  blocklist_default_len&#40664;&#35748;&#20540;0, &#22312;&#21046;&#20316;&#24341;&#23548;&#38236;&#20687;&#26102;&#20505;&#29983;&#25104; (grub-mkimage), &#35774;&#23450;&#20026;&#27491;&#30830;&#30340;GRUB&#20869;&#26680;&#38271;&#24230;</span>
<span class="org-comment">         *  blocklist_default_seg&#36339;&#36716;&#21040;GRUB&#20869;&#26680;&#26102;&#30340;&#40664;&#35748;&#20195;&#30721;&#27573;&#20540;, &#40664;&#35748;&#20540;CS=0x820,</span>
<span class="org-comment">         *     &#23427;&#20165;&#20165;&#22312;LOCAL(copy_buffer)&#20013;&#29992;&#21040;, &#26368;&#32456;&#36339;&#36716;&#26102;, &#20351;&#29992;CS:IP=0x0000:0x8200 (blocklist_default_seg&lt;&lt;4)</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movw</span>    $(firstlist - GRUB_BOOT_MACHINE_LIST_SIZE), <span class="org-variable-name">%di</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save the sector number of the second sector in %ebp */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * 8&#23383;&#33410;&#36215;&#22987;&#25159;&#21306;&#30340;&#20302;&#22320;&#22336;(%si)&#20445;&#23384;&#21040;ESP&#23492;&#23384;&#22120;</span>
<span class="org-comment">         *   LBA&#23547;&#22336;&#29992;&#21040;&#39640;4&#23383;&#33410;.</span>
<span class="org-comment">         *   CHS&#23547;&#22336;,&#22914;&#26524;&#39640;4&#23383;&#33410;&#19981;&#20026;0&#29983;&#25104;&#38169;&#35823;,&#22240;&#20026;CHS&#23547;&#22336;&#19981;&#21487;&#36798;(CHS&#23547;&#22336;&#33539;&#22260;7.88GiB, &#21442;&#32771;2.1&#33410;)</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">movl</span>    (<span class="org-variable-name">%di</span>), <span class="org-variable-name">%ebp</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">this is the loop for reading the rest of the kernel in */</span>
<span class="org-comment-delimiter">/* </span><span class="org-comment">&#21152;&#36733;&#25152;&#26377;&#25968;&#25454;&#38598;, &#24403;&#21069;&#21482;&#20351;&#29992;&#19968;&#20010;&#25968;&#25454;&#38598;*/</span>
<span class="org-function-name">LOCAL</span>(bootloop):
        <span class="org-comment-delimiter">/* </span><span class="org-comment">check the number of sectors to read */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * 8(%di)&#30830;&#23450;GRUB&#20869;&#26680;&#25159;&#21306;&#25968;</span>
<span class="org-comment">         * grub-mkimage&#29983;&#25104;&#38236;&#20687;&#26102;&#25913;&#20889;&#20026;&#27491;&#30830;&#30340;&#20869;&#26680;&#38271;&#24230;</span>
<span class="org-comment">         * &#27599;&#27425;&#24490;&#29615;&#21152;&#36733;&#20943;&#21435;&#24050;&#35835;&#21462;&#30340;&#25159;&#21306;</span>
<span class="org-comment">         * &#20026;0&#26102;&#34920;&#31034;&#24050;&#32463;&#21152;&#36733;&#23436;&#27605;, &#36339;&#36716;&#21040;LOCAL(bootit)</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">cmpw</span>    $0, 8(<span class="org-variable-name">%di</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">if zero, go to the start function */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#25152;&#26377;&#25968;&#25454;&#38598;&#21152;&#36733;&#23436;&#27605;&#36339;&#36716;&#21040;LOCAL(bootit) */</span>
        <span class="org-keyword">je</span>      LOCAL(bootit)
<span class="org-comment-delimiter">/* </span><span class="org-comment">LOCAL(setup_sectors)&#21482;&#21152;&#36733;&#24403;&#21069;&#25968;&#25454;&#38598; */</span>
<span class="org-function-name">LOCAL</span>(setup_sectors):
        <span class="org-comment-delimiter">/* </span><span class="org-comment">check if we use LBA or CHS */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * boot.img&#20013;&#24050;&#32463;&#35774;&#32622;&#35835;&#21462;&#27169;&#24335;: 1&#34920;&#31034;LBA, 0&#34920;&#31034;CHS</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">cmpb</span>    $0, -1(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">use CHS if zero, LBA otherwise */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">CHS&#27169;&#24335;&#35835; */</span>
        <span class="org-keyword">je</span>      LOCAL(chs_mode)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">load logical sector start */</span>
        <span class="org-keyword">movl</span>    (<span class="org-variable-name">%di</span>), <span class="org-variable-name">%ebx</span>
        <span class="org-keyword">movl</span>    4(<span class="org-variable-name">%di</span>), <span class="org-variable-name">%ecx</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">the maximum is limited to 0x7f because of Phoenix EDD */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">Phoenix EDD&#38480;&#21046;&#21333;&#27425;&#35835;&#19981;&#33021;&#36229;&#36807;0x7F&#25159;&#21306; */</span>
        <span class="org-keyword">xorl</span>    <span class="org-variable-name">%eax</span>, <span class="org-variable-name">%eax</span>
        <span class="org-keyword">movb</span>    $0x7f, <span class="org-variable-name">%al</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">how many do we really want to read? */</span>
        <span class="org-keyword">cmpw</span>    <span class="org-variable-name">%ax</span>, 8(<span class="org-variable-name">%di</span>)     <span class="org-comment-delimiter">/* </span><span class="org-comment">compare against total number of sectors */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">which is greater? */</span>
        <span class="org-keyword">jg</span>      1f
        <span class="org-comment-delimiter">/* </span><span class="org-comment">if less than, set to total */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#22914;&#26524;&#21040;&#36798;&#36825;&#37324;,&#34920;&#31034;&#21097;&#20313;&#25159;&#21306;&#19981;&#36275;0x7F&#25159;&#21306;,&#36825;&#27425;&#23601;&#21487;&#20197;&#21152;&#36733;&#23436;&#27605;&#20102; */</span>
        <span class="org-keyword">movw</span>    8(<span class="org-variable-name">%di</span>), <span class="org-variable-name">%ax</span>
<span class="org-function-name">1</span>:
        <span class="org-comment-delimiter">/* </span><span class="org-comment">subtract from total */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#20943;&#21435;&#36825;&#27425;&#35201;&#35835;&#21462;&#30340;&#25159;&#21306;&#25968;, &#20195;&#30721;&#29992;8(%di) &#26159;&#21542;&#20026;0&#26469;&#21028;&#26029;&#26377;&#21542;&#21152;&#36733;&#23436;&#27605; */</span>
        <span class="org-keyword">subw</span>    <span class="org-variable-name">%ax</span>, 8(<span class="org-variable-name">%di</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">add into logical sector start */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#36215;&#22987;&#25159;&#21306;&#35201;&#21152;&#19978;&#36825;&#27425;&#23558;&#35201;&#35835;&#21462;&#30340;&#25159;&#21306;&#25968;</span>
<span class="org-comment">         * &#27880;&#24847;&#26159;8&#23383;&#33410;&#30340;&#36215;&#22987;&#25159;&#21306;</span>
<span class="org-comment">         * &#39640;4&#23383;&#33410;&#30340;&#21152;&#35201;&#27880;&#24847;&#36827;&#20301;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">addl</span>    <span class="org-variable-name">%eax</span>, (<span class="org-variable-name">%di</span>)
        <span class="org-keyword">adcl</span>    $0, 4(<span class="org-variable-name">%di</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">set up disk address packet */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#35774;&#32622;LBA&#35835;&#21442;&#25968;&#24182;&#35843;&#29992;BIOS&#20013;&#26029;</span>
<span class="org-comment">         * &#21442;&#32771;boot.S LBA&#35835;&#27880;&#37322;</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">the size and the reserved byte */</span>
        <span class="org-keyword">movw</span>    $0x0010, (<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">the number of sectors */</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%ax</span>, 2(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">the absolute address */</span>
        <span class="org-keyword">movl</span>    <span class="org-variable-name">%ebx</span>, 8(<span class="org-variable-name">%si</span>)
        <span class="org-keyword">movl</span>    <span class="org-variable-name">%ecx</span>, 12(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">the segment of buffer address */</span>
        <span class="org-keyword">movw</span>    $GRUB_BOOT_MACHINE_BUFFER_SEG, 6(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save %ax from destruction! */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#20445;&#23384;&#36825;&#27425;&#35201;&#35835;&#21462;&#30340;&#25159;&#21306;&#25968; */</span>
        <span class="org-keyword">pushw</span>   <span class="org-variable-name">%ax</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">the offset of buffer address */</span>
        <span class="org-keyword">movw</span>    $0, 4(<span class="org-variable-name">%si</span>)
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * BIOS call "INT 0x13 Function 0x42" to read sectors from disk into memory</span>
<span class="org-comment"> *      Call with       %ah = 0x42</span>
<span class="org-comment"> *                      %dl = drive number</span>
<span class="org-comment"> *                      %ds:%si = segment:offset of disk address packet</span>
<span class="org-comment"> *      Return:</span>
<span class="org-comment"> *                      %al = 0x0 on success; err code on failure</span>
<span class="org-comment"> */</span>
        <span class="org-keyword">movb</span>    $0x42, <span class="org-variable-name">%ah</span>
        <span class="org-keyword">int</span>     $0x13
        <span class="org-keyword">jc</span>      LOCAL(read_error)
        <span class="org-keyword">movw</span>    $GRUB_BOOT_MACHINE_BUFFER_SEG, <span class="org-variable-name">%bx</span>
        <span class="org-keyword">jmp</span>     LOCAL(copy_buffer)
<span class="org-function-name">LOCAL</span>(chs_mode):
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * CHS&#35835;</span>
<span class="org-comment">         * &#21028;&#26029;C/H/S&#21442;&#25968;&#26159;&#21542;&#36234;&#30028;</span>
<span class="org-comment">         * &#35843;&#29992;CHS&#35835;&#30340;BIOS&#20013;&#26029;</span>
<span class="org-comment">         * &#21442;&#32771;boot.S CHS&#35835;&#27880;&#37322;</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">load logical sector start (top half) */</span>
        <span class="org-keyword">movl</span>    4(<span class="org-variable-name">%di</span>), <span class="org-variable-name">%eax</span>
        <span class="org-keyword">orl</span>     <span class="org-variable-name">%eax</span>, <span class="org-variable-name">%eax</span>
        <span class="org-keyword">jnz</span>     LOCAL(geometry_error)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">load logical sector start (bottom half) */</span>
        <span class="org-keyword">movl</span>    (<span class="org-variable-name">%di</span>), <span class="org-variable-name">%eax</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">zero %edx */</span>
        <span class="org-keyword">xorl</span>    <span class="org-variable-name">%edx</span>, <span class="org-variable-name">%edx</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">divide by number of sectors */</span>
        <span class="org-keyword">divl</span>    (<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save sector start */</span>
        <span class="org-keyword">movb</span>    <span class="org-variable-name">%dl</span>, 10(<span class="org-variable-name">%si</span>)
        <span class="org-keyword">xorl</span>    <span class="org-variable-name">%edx</span>, <span class="org-variable-name">%edx</span>      <span class="org-comment-delimiter">/* </span><span class="org-comment">zero %edx */</span>
        <span class="org-keyword">divl</span>    4(<span class="org-variable-name">%si</span>)          <span class="org-comment-delimiter">/* </span><span class="org-comment">divide by number of heads */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save head start */</span>
        <span class="org-keyword">movb</span>    <span class="org-variable-name">%dl</span>, 11(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save cylinder start */</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%ax</span>, 12(<span class="org-variable-name">%si</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">do we need too many cylinders? */</span>
        <span class="org-keyword">cmpw</span>    8(<span class="org-variable-name">%si</span>), <span class="org-variable-name">%ax</span>
        <span class="org-keyword">jge</span>     LOCAL(geometry_error)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">determine the maximum sector length of this read */</span>
        <span class="org-keyword">movw</span>    (<span class="org-variable-name">%si</span>), <span class="org-variable-name">%ax</span>      <span class="org-comment-delimiter">/* </span><span class="org-comment">get number of sectors per track/head */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">subtract sector start */</span>
        <span class="org-keyword">subb</span>    10(<span class="org-variable-name">%si</span>), <span class="org-variable-name">%al</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">how many do we really want to read? */</span>
        <span class="org-keyword">cmpw</span>    <span class="org-variable-name">%ax</span>, 8(<span class="org-variable-name">%di</span>)     <span class="org-comment-delimiter">/* </span><span class="org-comment">compare against total number of sectors */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">which is greater? */</span>
        <span class="org-keyword">jg</span>      2f
        <span class="org-comment-delimiter">/* </span><span class="org-comment">if less than, set to total */</span>
        <span class="org-keyword">movw</span>    8(<span class="org-variable-name">%di</span>), <span class="org-variable-name">%ax</span>
<span class="org-function-name">2</span>:
        <span class="org-comment-delimiter">/* </span><span class="org-comment">subtract from total */</span>
        <span class="org-keyword">subw</span>    <span class="org-variable-name">%ax</span>, 8(<span class="org-variable-name">%di</span>)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">add into logical sector start */</span>
        <span class="org-keyword">addl</span>    <span class="org-variable-name">%eax</span>, (<span class="org-variable-name">%di</span>)
        <span class="org-keyword">adcl</span>    $0, 4(<span class="org-variable-name">%di</span>)
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> *  This is the loop for taking care of BIOS geometry translation (ugh!)</span>
<span class="org-comment"> */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">get high bits of cylinder */</span>
        <span class="org-keyword">movb</span>    13(<span class="org-variable-name">%si</span>), <span class="org-variable-name">%dl</span>
        <span class="org-keyword">shlb</span>    $6, <span class="org-variable-name">%dl</span>         <span class="org-comment-delimiter">/* </span><span class="org-comment">shift left by 6 bits */</span>
        <span class="org-keyword">movb</span>    10(<span class="org-variable-name">%si</span>), <span class="org-variable-name">%cl</span>    <span class="org-comment-delimiter">/* </span><span class="org-comment">get sector */</span>
        <span class="org-keyword">incb</span>    <span class="org-variable-name">%cl</span>             <span class="org-comment-delimiter">/* </span><span class="org-comment">normalize sector (sectors go</span>
<span class="org-comment">                                        from 1-N, not 0-(N-1) ) */</span>
        <span class="org-keyword">orb</span>     <span class="org-variable-name">%dl</span>, <span class="org-variable-name">%cl</span>        <span class="org-comment-delimiter">/* </span><span class="org-comment">composite together */</span>
        <span class="org-keyword">movb</span>    12(<span class="org-variable-name">%si</span>), <span class="org-variable-name">%ch</span>    <span class="org-comment-delimiter">/* </span><span class="org-comment">sector+hcyl in cl, cylinder in ch */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">restore %dx */</span>
        <span class="org-keyword">popw</span>    <span class="org-variable-name">%dx</span>
        <span class="org-keyword">pushw</span>   <span class="org-variable-name">%dx</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">head number */</span>
        <span class="org-keyword">movb</span>    11(<span class="org-variable-name">%si</span>), <span class="org-variable-name">%dh</span>
        <span class="org-keyword">pushw</span>   <span class="org-variable-name">%ax</span>     <span class="org-comment-delimiter">/* </span><span class="org-comment">save %ax from destruction! */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * BIOS call "INT 0x13 Function 0x2" to read sectors from disk into memory</span>
<span class="org-comment"> *      Call with       %ah = 0x2</span>
<span class="org-comment"> *                      %al = number of sectors</span>
<span class="org-comment"> *                      %ch = cylinder</span>
<span class="org-comment"> *                      %cl = sector (bits 6-7 are high bits of "cylinder")</span>
<span class="org-comment"> *                      %dh = head</span>
<span class="org-comment"> *                      %dl = drive (0x80 for hard disk, 0x0 for floppy disk)</span>
<span class="org-comment"> *                      %es:%bx = segment:offset of buffer</span>
<span class="org-comment"> *      Return:</span>
<span class="org-comment"> *                      %al = 0x0 on success; err code on failure</span>
<span class="org-comment"> */</span>
        <span class="org-keyword">movw</span>    $GRUB_BOOT_MACHINE_BUFFER_SEG, <span class="org-variable-name">%bx</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%bx</span>, <span class="org-variable-name">%es</span>        <span class="org-comment-delimiter">/* </span><span class="org-comment">load %es segment with disk buffer */</span>
        <span class="org-keyword">xorw</span>    <span class="org-variable-name">%bx</span>, <span class="org-variable-name">%bx</span>        <span class="org-comment-delimiter">/* </span><span class="org-comment">%bx = 0, put it at 0 in the segment */</span>
        <span class="org-keyword">movb</span>    $0x2, <span class="org-variable-name">%ah</span>       <span class="org-comment-delimiter">/* </span><span class="org-comment">function 2 */</span>
        <span class="org-keyword">int</span>     $0x13
        <span class="org-keyword">jc</span>      LOCAL(read_error)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save source segment */</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%es</span>, <span class="org-variable-name">%bx</span>
<span class="org-function-name">LOCAL</span>(copy_buffer):
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#26080;&#35770;CHS/LBA, &#32531;&#20914;&#21306;&#22320;&#22336;&#20026;segment:offset=%bx:0x0=0x7000:0x0&#22788;</span>
<span class="org-comment">         */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">load addresses for copy from disk buffer to destination */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#35774;&#32622;&#30446;&#30340;&#27573; */</span>
        <span class="org-keyword">movw</span>    10(<span class="org-variable-name">%di</span>), <span class="org-variable-name">%es</span>    <span class="org-comment-delimiter">/* </span><span class="org-comment">load destination segment */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">restore %ax */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#35843;&#29992;BIOS&#20013;&#26029;&#21069;&#24050;&#32463;&#25226;&#36825;&#27425;&#35201;&#35835;&#21462;&#30340;&#25159;&#21306;&#25968;&#21387;&#26632;</span>
<span class="org-comment">         * &#27599;&#20010;&#25159;&#21306;512&#23383;&#33410;&#21363;2^9</span>
<span class="org-comment">         *   &#28982;&#21518;%ax&#24038;&#31227;5&#20301;&#24182;&#21152;&#21040;&#27573;&#22320;&#22336;&#19978;,</span>
<span class="org-comment">         *   &#27573;&#22320;&#22336;&#35201;&#24038;&#31227;4&#20301;&#25918;&#21040;&#22320;&#22336;&#32447;&#19978;,</span>
<span class="org-comment">         *   &#22240;&#27492;,&#31561;&#20215;&#20110;%ax&#24038;&#31227;9&#20301;&#25918;&#21040;&#22320;&#22336;&#32447;&#19978;</span>
<span class="org-comment">         *   &#36825;&#27491;&#22909;&#26159;&#19968;&#20010;&#25159;&#21306;&#25968;&#25454;&#21344;&#29992;&#30340;&#20869;&#23384;&#31354;&#38388;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">popw</span>    <span class="org-variable-name">%ax</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">determine the next possible destination address (presuming</span>
<span class="org-comment">                512 byte sectors!) */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#19979;&#19968;&#27425;&#21487;&#33021;&#30340;&#30446;&#30340;&#27573;&#22320;&#22336;(&#24378;&#21046;&#35201;&#27714;512&#23383;&#33410;&#25159;&#21306;)</span>
<span class="org-comment">         * &#26412;&#27425;&#20351;&#29992;&#30340;&#30446;&#30340;&#27573;&#22312;&#27492;&#20043;&#21069;&#24050;&#32463;&#20445;&#23384;&#21040;%es&#20102;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">shlw</span>    $5, <span class="org-variable-name">%ax</span>         <span class="org-comment-delimiter">/* </span><span class="org-comment">shift %ax five bits to the left */</span>
        <span class="org-keyword">addw</span>    <span class="org-variable-name">%ax</span>, 10(<span class="org-variable-name">%di</span>)    <span class="org-comment-delimiter">/* </span><span class="org-comment">add the corrected value to the destination</span>
<span class="org-comment">                                   address for next time */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">save addressing regs */</span>
        <span class="org-keyword">pusha</span>
        <span class="org-keyword">pushw</span>   <span class="org-variable-name">%ds</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">get the copy length */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * %ax&#24038;&#31227;3&#20301;, &#20849;&#24038;&#31227;8&#20301;</span>
<span class="org-comment">         * &#22240;&#27492;%ax&#20013;&#26159;&#36825;&#27425;&#35835;&#21462;&#30340;&#23383;&#25968;(word, 1-word=2-byte)</span>
<span class="org-comment">         * &#35774;&#32622;%cx&#20026;&#38656;&#35201;&#25335;&#36125;&#30340;&#23383;&#25968;,rep&#20351;&#29992;%cx&#20316;&#20026;&#24490;&#29615;&#35745;&#25968;&#22120;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">shlw</span>    $3, <span class="org-variable-name">%ax</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%ax</span>, <span class="org-variable-name">%cx</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#20197;&#25159;&#21306;&#20026;&#21333;&#20301;,&#28304;/&#30446;&#30340;&#20018;&#20559;&#31227;&#37327;&#37117;&#26159;0</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">xorw</span>    <span class="org-variable-name">%di</span>, <span class="org-variable-name">%di</span>        <span class="org-comment-delimiter">/* </span><span class="org-comment">zero offset of destination addresses */</span>
        <span class="org-keyword">xorw</span>    <span class="org-variable-name">%si</span>, <span class="org-variable-name">%si</span>        <span class="org-comment-delimiter">/* </span><span class="org-comment">zero offset of source addresses */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#36827;&#20837;LOCAL(copy_buffer)&#20043;&#21069;, %bx&#25345;&#26377;&#32531;&#20914;&#21306;&#27573;&#22320;&#22336; */</span>
        <span class="org-keyword">movw</span>    <span class="org-variable-name">%bx</span>, <span class="org-variable-name">%ds</span>        <span class="org-comment-delimiter">/* </span><span class="org-comment">restore the source segment */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#23383;&#31526;&#20018;&#25805;&#20316;&#25351;&#38024;&#31227;&#21160;&#26041;&#21521;&#20026;&#21069;&#21521; */</span>
        <span class="org-keyword">cld</span>             <span class="org-comment-delimiter">/* </span><span class="org-comment">sets the copy direction to forward */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">perform copy */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#23436;&#25104;&#25335;&#36125; */</span>
        <span class="org-keyword">rep</span>             <span class="org-comment-delimiter">/* </span><span class="org-comment">sets a repeat */</span>
        <span class="org-keyword">movsw</span>           <span class="org-comment-delimiter">/* </span><span class="org-comment">this runs the actual copy */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">restore addressing regs and print a dot with correct DS</span>
<span class="org-comment">           (MSG modifies SI, which is saved, and unused AX and BX) */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">MSG&#19981;&#29992;&#21040;DS,</span>
<span class="org-comment">        /*</span>
<span class="org-comment">         * &#35774;&#32622;&#27491;&#30830;&#30340;&#25968;&#25454;&#27573;&#22320;&#22336;%ds</span>
<span class="org-comment">         * &#35843;&#29992;MSG&#26174;&#31034;"."</span>
<span class="org-comment">         * &#23545;&#20110;&#24930;&#36895;&#23384;&#20648;&#35774;&#22791;,</span>
<span class="org-comment">         * &#25552;&#20379;&#29992;&#25143;&#21453;&#39304;, &#20197;&#20813;&#34987;&#24403;&#20570;&#27515;&#26426;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">popw</span>    <span class="org-variable-name">%ds</span>
        <span class="org-keyword">MSG</span>(notification_step)
        <span class="org-keyword">popa</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">check if finished with this dataset */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#26816;&#27979;&#26159;&#21542;&#35835;&#21462;&#23436;&#27605;, 8(%di)&#25345;&#26377;&#38656;&#35201;&#35835;&#21462;&#30340;&#21097;&#20313;&#25159;&#21306;&#25968; */</span>
        <span class="org-keyword">cmpw</span>    $0, 8(<span class="org-variable-name">%di</span>)
        <span class="org-keyword">jne</span>     LOCAL(setup_sectors)
        <span class="org-comment-delimiter">/* </span><span class="org-comment">update position to load from */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * &#26356;&#26032;&#20026;&#19978;&#19968;&#20010;&#25968;&#25454;&#38598;</span>
<span class="org-comment">         * &#24847;&#25351;(firstlist-(x+1)*12)~(firstlist-x*12)&#20301;&#32622;, x&#20174;0&#24320;&#22987;&#36882;&#22686;</span>
<span class="org-comment">         * &#21487;&#20197;&#26377;&#22810;&#20010;&#25968;&#25454;&#38598;</span>
<span class="org-comment">         * &#20294;&#26159;&#19981;&#33021;&#21644;LOCAL(message)&#37325;&#21472;</span>
<span class="org-comment">         * &#22810;&#20010;&#25968;&#25454;&#38598;&#25968;&#25454;&#26368;&#32456;&#26159;&#21542;&#36830;&#32493;, &#20381;&#36182;&#20110;&#35813;&#25968;&#25454;&#38598;&#21512;&#19978;&#19968;&#20010;&#25968;&#25454;&#38598;</span>
<span class="org-comment">         * &#32531;&#20914;&#21306;&#27573;&#22320;&#22336;</span>
<span class="org-comment">         *</span>
<span class="org-comment">         * &#21542;&#21017;diskboot&#20250;&#20986;&#38169;</span>
<span class="org-comment">         * &#21453;&#27719;&#32534;&#26174;&#31034;LOCAL(message)&#32467;&#26463;&#22788;&#22320;&#22336;0x8147</span>
<span class="org-comment">         * &#22240;&#27492;0x148~0x1FF&#21487;&#20840;&#37096;&#29992;&#20316;&#25968;&#25454;&#38598;</span>
<span class="org-comment">         * &#27599;&#20010;&#25968;&#25454;&#38598;12&#23383;&#33410;,&#26368;&#22810;&#21487;&#26377;(0x200-0x148)/12=15&#20010;&#25968;&#25454;&#38598;</span>
<span class="org-comment">         * &#26368;&#24320;&#22987;&#22788;&#25968;&#25454;&#38598;&#25159;&#21306;&#25968;&#24517;&#39035;&#20026;0 (&#21542;&#21017;&#37325;&#21472;&#21040;LOCAL(message)&#21435;&#21862;)</span>
<span class="org-comment">         * ==&gt; &#26368;&#22810;&#21487;&#26377;14&#20010;&#26377;&#25928;&#25968;&#25454;&#38598;</span>
<span class="org-comment">         * &#21453;&#27719;&#32534;&#23433;&#35013;&#21518;&#30340;diskboot.img&#30340;&#32467;&#26524;, &#26174;&#31034;&#21482;&#29992;&#20102;&#19968;&#20010;&#25968;&#25454;&#38598;</span>
<span class="org-comment">         *</span>
<span class="org-comment">         * &#25512;&#23548;:</span>
<span class="org-comment">         *   &#27599;&#20010;&#25968;&#25454;&#38598;&#37319;&#29992;2&#23383;&#33410;&#25551;&#36848;&#25159;&#21306;&#25968;,&#22240;&#27492;&#19981;&#33021;&#36229;&#36807;0xFFFF&#20010;&#25159;&#21306;</span>
<span class="org-comment">         *   14&#20010;&#26377;&#25928;&#25968;&#25454;&#38598;&#20301;&#32622;, &#20849;&#35745;&#25159;&#21306;&#25968;0xFFFF*14</span>
<span class="org-comment">         *   &#20849;&#35745;&#23383;&#33410;&#25968;= 0xFFFF*14*512=469754880bytes=447MB&#36828;&#36229;&#23454;&#27169;&#24335;&#19979;&#30340;&#23547;&#22336;&#31354;&#38388;&#20102;</span>
<span class="org-comment">         */</span>
        <span class="org-keyword">subw</span>    $GRUB_BOOT_MACHINE_LIST_SIZE, <span class="org-variable-name">%di</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">jump to bootloop */</span>
        <span class="org-comment-delimiter">/* </span><span class="org-comment">&#36339;&#36716;&#21040;bootloop&#22788;&#29702;&#19979;&#19968;&#25968;&#25454;&#38598; */</span>
        <span class="org-keyword">jmp</span>     LOCAL(bootloop)
<span class="org-comment-delimiter">/* </span><span class="org-comment">END OF MAIN LOOP */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#25152;&#26377;&#25968;&#25454;&#35835;&#21462;&#23436;&#27605;</span>
<span class="org-comment"> * &#21333;&#20010;&#25968;&#25454;&#38598;&#20869;&#30340;&#25968;&#25454;&#24635;&#26159;&#36830;&#32493;&#25918;&#32622;&#22312;&#20869;&#23384;&#20013;</span>
<span class="org-comment"> * &#24403;&#21069;&#21482;&#20351;&#29992;&#19968;&#20010;&#25968;&#25454;&#38598;,&#25918;&#32622;&#22312;0x8200&#36215;&#22987;&#30340;&#20869;&#23384;&#20013;</span>
<span class="org-comment"> * LOCAL(bootit)&#25171;&#21360;&#25552;&#31034;&#20449;&#24687;&#24182;&#36339;&#36716;&#25191;&#34892;</span>
<span class="org-comment"> * GRUB_BOOT_MACHINE_KERNEL_ADDR=0x8000</span>
<span class="org-comment"> * CS:IP=0x0000:0x8200</span>
<span class="org-comment"> * startup.S&#29983;&#25104;&#30340;&#25351;&#20196;&#24320;&#22987;&#25191;&#34892;</span>
<span class="org-comment"> */</span>
<span class="org-function-name">LOCAL</span>(bootit):
        <span class="org-comment-delimiter">/* </span><span class="org-comment">print a newline */</span>
        <span class="org-keyword">MSG</span>(notification_done)
        <span class="org-keyword">popw</span>    <span class="org-variable-name">%dx</span>     <span class="org-comment-delimiter">/* </span><span class="org-comment">this makes sure %dl is our "boot" drive */</span>
        <span class="org-keyword">ljmp</span>    $0, $(GRUB_BOOT_MACHINE_KERNEL_ADDR + 0x200)
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#38169;&#35823;&#25552;&#31034;&#23383;&#31526;&#20018;&#21644;&#36755;&#20986;&#20989;&#25968;</span>
<span class="org-comment"> * &#21442;&#32771;boot.S&#27880;&#37322;</span>
<span class="org-comment"> */</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * BIOS Geometry translation error (past the end of the disk geometry!).</span>
<span class="org-comment"> */</span>
<span class="org-function-name">LOCAL</span>(geometry_error):
        <span class="org-keyword">MSG</span>(geometry_error_string)
        <span class="org-keyword">jmp</span>     LOCAL(general_error)
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * Read error on the disk.</span>
<span class="org-comment"> */</span>
<span class="org-function-name">LOCAL</span>(read_error):
        <span class="org-keyword">MSG</span>(read_error_string)
<span class="org-function-name">LOCAL</span>(general_error):
        <span class="org-keyword">MSG</span>(general_error_string)
<span class="org-comment-delimiter">/* </span><span class="org-comment">go here when you need to stop the machine hard after an error condition */</span>
<span class="org-function-name">LOCAL</span>(stop):    jmp     LOCAL(stop)
<span class="org-function-name">notification_string</span>:    .asciz <span class="org-string">"loading"</span>
<span class="org-function-name">notification_step</span>:      .asciz <span class="org-string">"."</span>
<span class="org-function-name">notification_done</span>:      .asciz <span class="org-string">"/r/n"</span>
<span class="org-function-name">geometry_error_string</span>:  .asciz <span class="org-string">"Geom"</span>
<span class="org-function-name">read_error_string</span>:      .asciz <span class="org-string">"Read"</span>
<span class="org-function-name">general_error_string</span>:   .asciz <span class="org-string">" Error"</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * message: write the string pointed to by %si</span>
<span class="org-comment"> *</span>
<span class="org-comment"> *   WARNING: trashes %si, %ax, and %bx</span>
<span class="org-comment"> */</span>
        <span class="org-comment-delimiter">/*</span>
<span class="org-comment">         * Use BIOS "int 10H Function 0Eh" to write character in teletype mode</span>
<span class="org-comment">         *      %ah = 0xe       %al = character</span>
<span class="org-comment">         *      %bh = page      %bl = foreground color (graphics modes)</span>
<span class="org-comment">         */</span>
<span class="org-function-name">1</span>:
        <span class="org-keyword">movw</span>    $0x0001, <span class="org-variable-name">%bx</span>
        <span class="org-keyword">movb</span>    $0xe, <span class="org-variable-name">%ah</span>
        <span class="org-keyword">int</span>     $0x10           <span class="org-comment-delimiter">/* </span><span class="org-comment">display a byte */</span>
        <span class="org-keyword">incw</span>    <span class="org-variable-name">%si</span>
<span class="org-function-name">LOCAL</span>(message):
        <span class="org-keyword">movb</span>    (<span class="org-variable-name">%si</span>), <span class="org-variable-name">%al</span>
        <span class="org-keyword">cmpb</span>    $0, <span class="org-variable-name">%al</span>
        <span class="org-keyword">jne</span>     1b      <span class="org-comment-delimiter">/* </span><span class="org-comment">if not end of string, jmp to display */</span>
        <span class="org-keyword">ret</span>
<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> * &#21453;&#27719;&#32534;&#32467;&#26524;&#26174;&#31034;, &#27492;&#22788;&#22320;&#22336;&#26159;0x8148</span>
<span class="org-comment"> * &#21487;&#22312;&#27492;&#22788;&#28155;&#21152;. = _start + 0x148 &#27979;&#35797;</span>
<span class="org-comment"> *</span>
<span class="org-comment"> * 0x148~0x1FF&#20849;&#35745;184&#23383;&#33410;,&#21487;&#23384;&#25918;15&#20010;12&#23383;&#33410;&#30340;&#25968;&#25454;&#38598;</span>
<span class="org-comment"> * &#25353;&#29031;&#20174;&#19979;&#21040;&#19978;&#30340;&#39034;&#24207;&#23384;&#25918;&#25968;&#25454;&#38598;</span>
<span class="org-comment"> * &#26368;&#21518;&#19968;&#20010;&#26377;&#25928;&#25968;&#25454;&#38598;&#30340;&#25159;&#21306;&#25968;(&#25968;&#25454;&#38598;&#20869;&#20559;&#31227;&#37327;8)&#24517;&#39035;&#20026;0</span>
<span class="org-comment"> */</span>

<span class="org-comment-delimiter">/*</span>
<span class="org-comment"> *  This area is an empty space between the main body of code below which</span>
<span class="org-comment"> *  grows up (fixed after compilation, but between releases it may change</span>
<span class="org-comment"> *  in size easily), and the lists of sectors to read, which grows down</span>
<span class="org-comment"> *  from a fixed top location.</span>
<span class="org-comment"> */</span>
        <span class="org-keyword">.word</span> 0
        <span class="org-keyword">.word</span> 0
        . = _start + 0x200 - GRUB_BOOT_MACHINE_LIST_SIZE
        <span class="org-comment-delimiter">/* </span><span class="org-comment">fill the first data listing with the default */</span>
<span class="org-function-name">blocklist_default_start</span>:
        <span class="org-comment-delimiter">/* </span><span class="org-comment">this is the sector start parameter, in logical sectors from</span>
<span class="org-comment">           the start of the disk, sector 0 */</span>
        <span class="org-keyword">.long</span> 2, 0
<span class="org-function-name">blocklist_default_len</span>:
        <span class="org-comment-delimiter">/* </span><span class="org-comment">this is the number of sectors to read.  grub-mkimage</span>
<span class="org-comment">           will fill this up */</span>
        <span class="org-keyword">.word</span> 0
<span class="org-function-name">blocklist_default_seg</span>:
        <span class="org-comment-delimiter">/* </span><span class="org-comment">this is the segment of the starting address to load the data into */</span>
        <span class="org-keyword">.word</span> (GRUB_BOOT_MACHINE_KERNEL_SEG + 0x20)
<span class="org-function-name">firstlist</span>:      <span class="org-comment-delimiter">/* </span><span class="org-comment">this label has to be after the list data!!! */</span>
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<div id="disqus_thread" class="disqus container"></div>
<script>
  var disqus_config = function () {
    this.page.url = 'http://ycode.org/blogs/bootloader-grub-06-diskboot.S-analysis.html';
    this.page.identifier = 'bootloader-grub-06-diskboot.S-analysis.html';
  };

  (function() {
    var d = document, s = d.createElement('script');
    s.src = 'https://yanyg.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

<div class="copyright">
2012-2020 Copyright&copy; <i> YANYG - Powered by Emacs Orgmode</i>
</div>
</div>
</body>
</html>
