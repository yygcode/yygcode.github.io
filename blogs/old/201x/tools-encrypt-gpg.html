<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<meta charset="utf-8" />
<title>加密工具 - GPG入门</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="yanyg" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="/themes/blogs/css/blog.css" />
<script type="text/javascript" src="/themes/blogs/js/blog.js"> </script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="preamble" class="status">
<a href="../../../index.html">Yanyg - SAN Software Engineer</a>
<div class="sitelinks">
  <a href="../../archives.html">Archives</a> |
  <a href="../../theindex.html">Index</a> |
  <a href="../../tags.html">TAGS</a> |
  <a href="https://github.com/yygcode">Github</a> |
  <a href="../../../about.html">About Me</a>
</div>
</div>
<div id="content">
<h1 class="title">加密工具 - GPG入门</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org463a4c3">1. GPG是什么</a></li>
<li><a href="#orgff3ffbf">2. 安装</a>
<ul>
<li><a href="#org4457d20">2.1. Debian</a></li>
<li><a href="#org34574a0">2.2. msys</a></li>
<li><a href="#orgd68c089">2.3. 源码安装</a></li>
</ul>
</li>
<li><a href="#org98106d2">3. 使用介绍</a>
<ul>
<li><a href="#org2a62cb1">3.1. 生成密钥</a></li>
<li><a href="#orge820cd7">3.2. 密钥管理</a>
<ul>
<li><a href="#orga0c9e71">3.2.1. 密钥列表</a></li>
<li><a href="#org40914ef">3.2.2. 删除密钥</a></li>
<li><a href="#org74695d8">3.2.3. 导出公钥</a></li>
<li><a href="#org3ba3fff">3.2.4. 上传公钥</a></li>
<li><a href="#orgca7ffda">3.2.5. 导入公钥</a></li>
<li><a href="#org880ec5c">3.2.6. 导入私钥</a></li>
</ul>
</li>
<li><a href="#orgd9ca38f">3.3. 签名与签名验证</a></li>
<li><a href="#orgf319a5a">3.4. 加密解密</a></li>
<li><a href="#org324b6c5">3.5. 加密同时签名</a></li>
</ul>
</li>
<li><a href="#org2e197ad">4. 其他</a>
<ul>
<li><a href="#org4b321df">4.1. 私钥备份保护</a></li>
</ul>
</li>
<li><a href="#orgf3e4838">5. References</a></li>
</ul>
</div>
</div>

<div id="outline-container-org463a4c3" class="outline-2">
<h2 id="org463a4c3"><span class="section-number-2">1</span> GPG是什么</h2>
<div class="outline-text-2" id="text-1">
<p>
<a href="https://zh.wikipedia.org/zh-cn/GnuPG">GPG</a>即<a href="https://gnupg.org/">GnuPG</a>(the GNU Privacy Guard, GNU加密保护)，是一款开源加密软件，遵循
<a href="https://www.ietf.org/rfc/rfc4880.txt">RFC4880</a>(OpenPGP标准)。如下是主页介绍：
</p>
<blockquote>
<p>
GnuPG is a complete and free implementation of the OpenPGP standard as defined
by <a href="https://www.ietf.org/rfc/rfc4880.txt">RFC4880</a> (also known as PGP). GnuPG allows you to encrypt and sign your data
and communications; it features a versatile(通用的) key management system, along
with access modules for all kinds of public key directories. GnuPG, also known
as GPG, is a command line tool with features for easy integration with other
applications. A wealth of <a href="https://gnupg.org/software/frontends.html">frontend applications</a> and <a href="https://gnupg.org/software/libraries.html">libraries</a> are available.
GnuPG also provides support for S/MIME and Secure Shell (ssh).
</p>

<p>
Since its introduction in 1997, GnuPG is <a href="https://www.gnu.org/philosophy/free-sw.html">Free Software</a> (meaning that it respects
your freedom). It can be freely used, modified and distributed under the terms
of the <a href="https://www.gnu.org/copyleft/gpl.html">GNU General Public License</a>.
</p>

<p>
The current version of GnuPG is 2.2.8. See the <a href="https://gnupg.org/download/index.html">download</a> page for other
maintained versions.
</p>

<p>
<a href="https://www.gpg4win.org/">Gpg4win</a> is a Windows version of GnuPG featuring a context menu tool, a crypto
manager, and an Outlook plugin to send and receive standard PGP/MIME mails.
The current version of Gpg4win is 3.1.1.
</p>
</blockquote>
</div>
</div>

<div id="outline-container-orgff3ffbf" class="outline-2">
<h2 id="orgff3ffbf"><span class="section-number-2">2</span> 安装</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org4457d20" class="outline-3">
<h3 id="org4457d20"><span class="section-number-3">2.1</span> Debian</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>sudo<span class="org-whitespace-space"> </span>apt-get<span class="org-whitespace-space"> </span>install<span class="org-whitespace-space"> </span>gnupg
</pre>
</div>
</div>
</div>

<div id="outline-container-org34574a0" class="outline-3">
<h3 id="org34574a0"><span class="section-number-3">2.2</span> msys</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>pacman<span class="org-whitespace-space"> </span>-S<span class="org-whitespace-space"> </span>gnupg
<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">or</span><span class="org-whitespace-space"> </span><span class="org-comment">you</span><span class="org-whitespace-space"> </span><span class="org-comment">can</span><span class="org-whitespace-space"> </span><span class="org-comment">search</span><span class="org-whitespace-space"> </span><span class="org-comment">candidates</span><span class="org-whitespace-space"> </span><span class="org-comment">includes</span><span class="org-whitespace-space"> </span><span class="org-comment">key</span><span class="org-whitespace-space"> </span><span class="org-comment">gnupg</span><span class="org-whitespace-space"> </span><span class="org-comment">by</span><span class="org-whitespace-space"> </span><span class="org-comment">command:</span>
~$<span class="org-whitespace-space"> </span>pacman<span class="org-whitespace-space"> </span>-Ss<span class="org-whitespace-space"> </span>gnupg
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd68c089" class="outline-3">
<h3 id="orgd68c089"><span class="section-number-3">2.3</span> 源码安装</h3>
<div class="outline-text-3" id="text-2-3">
<p>
使用Git获取源码：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>git<span class="org-whitespace-space"> </span>clone<span class="org-whitespace-space"> </span>git://git.gnupg.org/gnupg.git
</pre>
</div>

<p>
或者下载源码包：<a href="https://gnupg.org/download/index.html">https://gnupg.org/download/index.html</a>
</p>

<p>
编译安装：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>./autogen.sh
***<span class="org-whitespace-space"> </span>Activating<span class="org-whitespace-space"> </span>trailing<span class="org-whitespace-space"> </span>whitespace<span class="org-whitespace-space"> </span>git<span class="org-whitespace-space"> </span>pre-commit<span class="org-whitespace-space"> </span>hook.<span class="org-whitespace-space"> </span>***
<span class="org-whitespace-space">    </span>For<span class="org-whitespace-space"> </span>more<span class="org-whitespace-space"> </span>information<span class="org-whitespace-space"> </span>see<span class="org-whitespace-space"> </span>this<span class="org-whitespace-space"> </span>thread:
<span class="org-whitespace-space">      </span>https://mail.gnome.org/archives/desktop-devel-list/2009-May/msg00084.html
<span class="org-whitespace-space">    </span>To<span class="org-whitespace-space"> </span>deactivate<span class="org-whitespace-space"> </span>this<span class="org-whitespace-space"> </span>pre-commit<span class="org-whitespace-space"> </span>hook<span class="org-whitespace-space"> </span>again<span class="org-whitespace-space"> </span>move<span class="org-whitespace-space"> </span>.git/hooks/pre-commit
<span class="org-whitespace-space">    </span>and<span class="org-whitespace-space"> </span>.git/hooks/pre-commit.sample<span class="org-whitespace-space"> </span>out<span class="org-whitespace-space"> </span>of<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>way.
&#8216;.git/hooks/pre-commit.sample&#8217;<span class="org-whitespace-space"> </span>-&gt;<span class="org-whitespace-space"> </span>&#8216;.git/hooks/pre-commit&#8217;
autogen.sh:<span class="org-whitespace-space"> </span>***<span class="org-whitespace-space"> </span>Adding<span class="org-whitespace-space"> </span>GIT<span class="org-whitespace-space"> </span>filter.cleanpo.clean<span class="org-whitespace-space"> </span>configuration.
***<span class="org-whitespace-space"> </span>Activating<span class="org-whitespace-space"> </span>commit<span class="org-whitespace-space"> </span>log<span class="org-whitespace-space"> </span>message<span class="org-whitespace-space"> </span>check<span class="org-whitespace-space"> </span>hook.<span class="org-whitespace-space"> </span>***
&#8216;build-aux/git-hooks/commit-msg&#8217;<span class="org-whitespace-space"> </span>-&gt;<span class="org-whitespace-space"> </span>&#8216;.git/hooks/commit-msg&#8217;
autogen.sh:<span class="org-whitespace-space"> </span>Running<span class="org-whitespace-space"> </span>aclocal<span class="org-whitespace-space"> </span>-I<span class="org-whitespace-space"> </span>m4<span class="org-whitespace-space"> </span>...
autogen.sh:<span class="org-whitespace-space"> </span>Running<span class="org-whitespace-space"> </span>autoheader...
autogen.sh:<span class="org-whitespace-space"> </span>Running<span class="org-whitespace-space"> </span>automake<span class="org-whitespace-space"> </span>--gnu<span class="org-whitespace-space"> </span>...
autogen.sh:<span class="org-whitespace-space"> </span>Running<span class="org-whitespace-space"> </span>autoconf<span class="org-whitespace-space"> </span>...
autogen.sh:<span class="org-whitespace-space"> </span>You<span class="org-whitespace-space"> </span>may<span class="org-whitespace-space"> </span>now<span class="org-whitespace-space"> </span>run:
<span class="org-whitespace-space">  </span>./configure<span class="org-whitespace-space"> </span>--sysconfdir=/etc<span class="org-whitespace-space"> </span>--enable-maintainer-mode<span class="org-whitespace-space">  </span>&amp;&amp;<span class="org-whitespace-space"> </span>make
~$<span class="org-whitespace-space"> </span>./configure<span class="org-whitespace-space"> </span>--sysconfdir=/etc<span class="org-whitespace-space"> </span>--enable-maintainer-mode<span class="org-whitespace-space">  </span>&amp;&amp;<span class="org-whitespace-space"> </span>make
~$<span class="org-whitespace-space"> </span>sudo<span class="org-whitespace-space"> </span>make<span class="org-whitespace-space"> </span>install
</pre>
</div>
<p>
如果系统太老，库版本兼容性不满足报错，建议直接安装二进制，或下载较老版本gnupg，
或者尝试升级操作系统。例如：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>./configure<span class="org-whitespace-space"> </span>--sysconfdir=/etc<span class="org-whitespace-space"> </span>--enable-maintainer-mode<span class="org-whitespace-space">  </span>&amp;&amp;<span class="org-whitespace-space"> </span>make
...
configure:
***
***<span class="org-whitespace-space"> </span>You<span class="org-whitespace-space"> </span>need<span class="org-whitespace-space"> </span>libassuan<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>build<span class="org-whitespace-space"> </span>this<span class="org-whitespace-space"> </span>program.
***<span class="org-whitespace-space"> </span>This<span class="org-whitespace-space"> </span>library<span class="org-whitespace-space"> </span>is<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>example<span class="org-whitespace-space"> </span>available<span class="org-whitespace-space"> </span>at
***<span class="org-whitespace-space">   </span>https://gnupg.org/ftp/gcrypt/libassuan/
***<span class="org-whitespace-space"> </span>(at<span class="org-whitespace-space"> </span>least<span class="org-whitespace-space"> </span>version<span class="org-whitespace-space"> </span>2.5.0<span class="org-whitespace-space"> </span>(API<span class="org-whitespace-space"> </span>2)<span class="org-whitespace-space"> </span>is<span class="org-whitespace-space"> </span>required)<span class="org-builtin">.</span>
configure:<span class="org-whitespace-space"> </span>error:
***
***<span class="org-whitespace-space"> </span>Required<span class="org-whitespace-space"> </span>libraries<span class="org-whitespace-space"> </span>not<span class="org-whitespace-space"> </span>found.<span class="org-whitespace-space"> </span>Please<span class="org-whitespace-space"> </span>consult<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>above<span class="org-whitespace-space"> </span>messages
***<span class="org-whitespace-space"> </span>and<span class="org-whitespace-space"> </span>install<span class="org-whitespace-space"> </span>them<span class="org-whitespace-space"> </span>before<span class="org-whitespace-space"> </span>running<span class="org-whitespace-space"> </span>configure<span class="org-whitespace-space"> </span>again.
***
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org98106d2" class="outline-2">
<h2 id="org98106d2"><span class="section-number-2">3</span> 使用介绍</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org2a62cb1" class="outline-3">
<h3 id="org2a62cb1"><span class="section-number-3">3.1</span> 生成密钥</h3>
<div class="outline-text-3" id="text-3-1">
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--gen-key
</pre>
</div>
<p>
Linux下版本\texttt{--gen-key}部分参数是默认的，使用如下命令对所有选项进行设置：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--full-generate-key
</pre>
</div>

<p>
示例：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--full-generate-key
<span class="org-function-name">gpg</span><span class="org-whitespace-space"> </span>(GnuPG)<span class="org-whitespace-space"> </span>2.1.18;<span class="org-whitespace-space"> </span>Copyright<span class="org-whitespace-space"> </span>(C)<span class="org-whitespace-space"> </span>2017<span class="org-whitespace-space"> </span>Free<span class="org-whitespace-space"> </span>Software<span class="org-whitespace-space"> </span>Foundation,<span class="org-whitespace-space"> </span>Inc.
This<span class="org-whitespace-space"> </span>is<span class="org-whitespace-space"> </span>free<span class="org-whitespace-space"> </span>software:<span class="org-whitespace-space"> </span>you<span class="org-whitespace-space"> </span>are<span class="org-whitespace-space"> </span>free<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>change<span class="org-whitespace-space"> </span>and<span class="org-whitespace-space"> </span>redistribute<span class="org-whitespace-space"> </span>it.
There<span class="org-whitespace-space"> </span>is<span class="org-whitespace-space"> </span>NO<span class="org-whitespace-space"> </span>WARRANTY,<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>extent<span class="org-whitespace-space"> </span>permitted<span class="org-whitespace-space"> </span>by<span class="org-whitespace-space"> </span>law.

Please<span class="org-whitespace-space"> </span>select<span class="org-whitespace-space"> </span>what<span class="org-whitespace-space"> </span>kind<span class="org-whitespace-space"> </span>of<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>you<span class="org-whitespace-space"> </span>want:
<span class="org-whitespace-space">   </span>(1)<span class="org-whitespace-space"> </span>RSA<span class="org-whitespace-space"> </span>and<span class="org-whitespace-space"> </span>RSA<span class="org-whitespace-space"> </span>(default)
<span class="org-whitespace-space">   </span>(2)<span class="org-whitespace-space"> </span>DSA<span class="org-whitespace-space"> </span>and<span class="org-whitespace-space"> </span>Elgamal
<span class="org-whitespace-space">   </span>(3)<span class="org-whitespace-space"> </span>DSA<span class="org-whitespace-space"> </span>(sign<span class="org-whitespace-space"> </span>only)
<span class="org-whitespace-space">   </span>(4)<span class="org-whitespace-space"> </span>RSA<span class="org-whitespace-space"> </span>(sign<span class="org-whitespace-space"> </span>only)
Your<span class="org-whitespace-space"> </span>selection?<span class="org-whitespace-space"> </span>1
RSA<span class="org-whitespace-space"> </span>keys<span class="org-whitespace-space"> </span>may<span class="org-whitespace-space"> </span>be<span class="org-whitespace-space"> </span>between<span class="org-whitespace-space"> </span>1024<span class="org-whitespace-space"> </span>and<span class="org-whitespace-space"> </span>4096<span class="org-whitespace-space"> </span>bits<span class="org-whitespace-space"> </span>long.
What<span class="org-whitespace-space"> </span>keysize<span class="org-whitespace-space"> </span>do<span class="org-whitespace-space"> </span>you<span class="org-whitespace-space"> </span>want?<span class="org-whitespace-space"> </span>(2048)<span class="org-whitespace-space"> </span>4096
Requested<span class="org-whitespace-space"> </span>keysize<span class="org-whitespace-space"> </span>is<span class="org-whitespace-space"> </span>4096<span class="org-whitespace-space"> </span>bits
Please<span class="org-whitespace-space"> </span>specify<span class="org-whitespace-space"> </span>how<span class="org-whitespace-space"> </span>long<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>should<span class="org-whitespace-space"> </span>be<span class="org-whitespace-space"> </span>valid.
<span class="org-whitespace-space">         </span>0<span class="org-whitespace-space"> </span>=<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>does<span class="org-whitespace-space"> </span>not<span class="org-whitespace-space"> </span>expire
<span class="org-whitespace-space">      </span>&lt;n&gt;<span class="org-whitespace-space">  </span>=<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>expires<span class="org-whitespace-space"> </span><span class="org-keyword">in</span><span class="org-whitespace-space"> </span>n<span class="org-whitespace-space"> </span>days
<span class="org-whitespace-space">      </span>&lt;n&gt;w<span class="org-whitespace-space"> </span>=<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>expires<span class="org-whitespace-space"> </span><span class="org-keyword">in</span><span class="org-whitespace-space"> </span>n<span class="org-whitespace-space"> </span>weeks
<span class="org-whitespace-space">      </span>&lt;n&gt;m<span class="org-whitespace-space"> </span>=<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>expires<span class="org-whitespace-space"> </span><span class="org-keyword">in</span><span class="org-whitespace-space"> </span>n<span class="org-whitespace-space"> </span>months
<span class="org-whitespace-space">      </span>&lt;n&gt;y<span class="org-whitespace-space"> </span>=<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>expires<span class="org-whitespace-space"> </span><span class="org-keyword">in</span><span class="org-whitespace-space"> </span>n<span class="org-whitespace-space"> </span>years
Key<span class="org-whitespace-space"> </span>is<span class="org-whitespace-space"> </span>valid<span class="org-whitespace-space"> </span>for?<span class="org-whitespace-space"> </span>(0)<span class="org-whitespace-space"> </span>0
Key<span class="org-whitespace-space"> </span>does<span class="org-whitespace-space"> </span>not<span class="org-whitespace-space"> </span>expire<span class="org-whitespace-space"> </span>at<span class="org-whitespace-space"> </span>all
Is<span class="org-whitespace-space"> </span>this<span class="org-whitespace-space"> </span>correct?<span class="org-whitespace-space"> </span>(y/N)<span class="org-whitespace-space"> </span>y

GnuPG<span class="org-whitespace-space"> </span>needs<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>construct<span class="org-whitespace-space"> </span>a<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>ID<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>identify<span class="org-whitespace-space"> </span>your<span class="org-whitespace-space"> </span>key.

Real<span class="org-whitespace-space"> </span>name:<span class="org-whitespace-space"> </span>test
Name<span class="org-whitespace-space"> </span>must<span class="org-whitespace-space"> </span>be<span class="org-whitespace-space"> </span>at<span class="org-whitespace-space"> </span>least<span class="org-whitespace-space"> </span>5<span class="org-whitespace-space"> </span>characters<span class="org-whitespace-space"> </span>long
Real<span class="org-whitespace-space"> </span>name:<span class="org-whitespace-space"> </span>gpgtest
Email<span class="org-whitespace-space"> </span>address:<span class="org-whitespace-space"> </span>gpgtest@gmail.com
Comment:<span class="org-whitespace-space"> </span>GPG<span class="org-whitespace-space"> </span>test<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>blog
You<span class="org-whitespace-space"> </span>selected<span class="org-whitespace-space"> </span>this<span class="org-whitespace-space"> </span>USER-ID:
<span class="org-whitespace-space">    </span><span class="org-string">"gpgtest</span><span class="org-whitespace-space"> </span><span class="org-string">(GPG</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">blog)</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>"</span>

<span class="org-function-name">Change</span><span class="org-whitespace-space"> </span>(N)ame,<span class="org-whitespace-space"> </span>(C)omment,<span class="org-whitespace-space"> </span>(E)mail<span class="org-whitespace-space"> </span>or<span class="org-whitespace-space"> </span>(O)kay/(Q)uit?<span class="org-whitespace-space"> </span>O
We<span class="org-whitespace-space"> </span>need<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>generate<span class="org-whitespace-space"> </span>a<span class="org-whitespace-space"> </span>lot<span class="org-whitespace-space"> </span>of<span class="org-whitespace-space"> </span>random<span class="org-whitespace-space"> </span>bytes.<span class="org-whitespace-space"> </span>It<span class="org-whitespace-space"> </span>is<span class="org-whitespace-space"> </span>a<span class="org-whitespace-space"> </span>good<span class="org-whitespace-space"> </span>idea<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>perform
some<span class="org-whitespace-space"> </span>other<span class="org-whitespace-space"> </span>action<span class="org-whitespace-space"> </span>(<span class="org-builtin">type</span><span class="org-whitespace-space"> </span>on<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>keyboard,<span class="org-whitespace-space"> </span>move<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>mouse,<span class="org-whitespace-space"> </span>utilize<span class="org-whitespace-space"> </span>the
<span class="org-whitespace-space">                   </span>disks)<span class="org-whitespace-space"> </span>during<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>prime<span class="org-whitespace-space"> </span>generation;<span class="org-whitespace-space"> </span>this<span class="org-whitespace-space"> </span>gives<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>random<span class="org-whitespace-space"> </span>num<span class="org-whitespace-line">ber</span>
generator<span class="org-whitespace-space"> </span>a<span class="org-whitespace-space"> </span>better<span class="org-whitespace-space"> </span>chance<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>gain<span class="org-whitespace-space"> </span>enough<span class="org-whitespace-space"> </span>entropy.

We<span class="org-whitespace-space"> </span>need<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>generate<span class="org-whitespace-space"> </span>a<span class="org-whitespace-space"> </span>lot<span class="org-whitespace-space"> </span>of<span class="org-whitespace-space"> </span>random<span class="org-whitespace-space"> </span>bytes.<span class="org-whitespace-space"> </span>It<span class="org-whitespace-space"> </span>is<span class="org-whitespace-space"> </span>a<span class="org-whitespace-space"> </span>good<span class="org-whitespace-space"> </span>idea<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>perform
some<span class="org-whitespace-space"> </span>other<span class="org-whitespace-space"> </span>action<span class="org-whitespace-space"> </span>(<span class="org-builtin">type</span><span class="org-whitespace-space"> </span>on<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>keyboard,<span class="org-whitespace-space"> </span>move<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>mouse,<span class="org-whitespace-space"> </span>utilize<span class="org-whitespace-space"> </span>the
disks)<span class="org-whitespace-space"> </span>during<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>prime<span class="org-whitespace-space"> </span>generation;<span class="org-whitespace-space"> </span>this<span class="org-whitespace-space"> </span>gives<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>random<span class="org-whitespace-space"> </span>number
generator<span class="org-whitespace-space"> </span>a<span class="org-whitespace-space"> </span>better<span class="org-whitespace-space"> </span>chance<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>gain<span class="org-whitespace-space"> </span>enough<span class="org-whitespace-space"> </span>entropy.

gpg:<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>82159169CFBF69E6<span class="org-whitespace-space"> </span>marked<span class="org-whitespace-space"> </span>as<span class="org-whitespace-space"> </span>ultimately<span class="org-whitespace-space"> </span>trusted
gpg:<span class="org-whitespace-space"> </span>revocation<span class="org-whitespace-space"> </span>certificate<span class="org-whitespace-space"> </span>stored<span class="org-whitespace-space"> </span>as<span class="org-whitespace-space"> </span><span class="org-string">'/home/yanyg/.gnupg/openpgp-revocs.d/4F2F9</span><span class="org-string"><span class="org-whitespace-line">7E03BFBF466032ADFB382159169CFBF69E6.rev'</span></span>
public<span class="org-whitespace-space"> </span>and<span class="org-whitespace-space"> </span>secret<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>created<span class="org-whitespace-space"> </span>and<span class="org-whitespace-space"> </span>signed.

pub<span class="org-whitespace-space">   </span>rsa4096<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space"> </span>[SC]
<span class="org-whitespace-space">      </span>4F2F97E03BFBF466032ADFB382159169CFBF69E6
<span class="org-whitespace-space">      </span>4F2F97E03BFBF466032ADFB382159169CFBF69E6
uid<span class="org-whitespace-space">                      </span>gpgtest<span class="org-whitespace-space"> </span>(GPG<span class="org-whitespace-space"> </span>test<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>blog)<span class="org-whitespace-space"> </span><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>
sub<span class="org-whitespace-space">   </span>rsa4096<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space"> </span>[E]
</pre>
</div>
<p>
其中需要选择/输入的内容包括：密钥种类、密钥长度、有效期、真实姓名、邮件地址等。
</p>
</div>
</div>

<div id="outline-container-orge820cd7" class="outline-3">
<h3 id="orge820cd7"><span class="section-number-3">3.2</span> 密钥管理</h3>
<div class="outline-text-3" id="text-3-2">
</div>
<div id="outline-container-orga0c9e71" class="outline-4">
<h4 id="orga0c9e71"><span class="section-number-4">3.2.1</span> 密钥列表</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
其中 <i>gpgtest</i> 是新生成的。
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--list-keys
gpg:<span class="org-whitespace-space"> </span>checking<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>trustdb
gpg:<span class="org-whitespace-space"> </span>marginals<span class="org-whitespace-space"> </span>needed:<span class="org-whitespace-space"> </span>3<span class="org-whitespace-space">  </span>completes<span class="org-whitespace-space"> </span>needed:<span class="org-whitespace-space"> </span>1<span class="org-whitespace-space">  </span>trust<span class="org-whitespace-space"> </span>model:<span class="org-whitespace-space"> </span>pgp
gpg:<span class="org-whitespace-space"> </span>depth:<span class="org-whitespace-space"> </span>0<span class="org-whitespace-space">  </span>valid:<span class="org-whitespace-space">   </span>2<span class="org-whitespace-space">  </span>signed:<span class="org-whitespace-space">   </span>1<span class="org-whitespace-space">  </span>trust:<span class="org-whitespace-space"> </span>0-,<span class="org-whitespace-space"> </span>0q,<span class="org-whitespace-space"> </span>0n,<span class="org-whitespace-space"> </span>0m,<span class="org-whitespace-space"> </span>0f,<span class="org-whitespace-space"> </span>2u
gpg:<span class="org-whitespace-space"> </span>depth:<span class="org-whitespace-space"> </span>1<span class="org-whitespace-space">  </span>valid:<span class="org-whitespace-space">   </span>1<span class="org-whitespace-space">  </span>signed:<span class="org-whitespace-space">   </span>0<span class="org-whitespace-space">  </span>trust:<span class="org-whitespace-space"> </span>1-,<span class="org-whitespace-space"> </span>0q,<span class="org-whitespace-space"> </span>0n,<span class="org-whitespace-space"> </span>0m,<span class="org-whitespace-space"> </span>0f,<span class="org-whitespace-space"> </span>0u
gpg:<span class="org-whitespace-space"> </span>next<span class="org-whitespace-space"> </span>trustdb<span class="org-whitespace-space"> </span>check<span class="org-whitespace-space"> </span>due<span class="org-whitespace-space"> </span>at<span class="org-whitespace-space"> </span>2020-06-09
/home/yanyg/.gnupg/pubring.kbx
------------------------------
pub<span class="org-whitespace-space">   </span>rsa2048<span class="org-whitespace-space"> </span>2018-06-10<span class="org-whitespace-space"> </span>[SC]<span class="org-whitespace-space"> </span>[expires:<span class="org-whitespace-space"> </span>2020-06-09]
<span class="org-whitespace-space">      </span>D01A8EDEF8F2F0A3B5C627F7531EDD4DBF9F0F5B
uid<span class="org-whitespace-space">           </span>[ultimate]<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span><a href="mailto:yanyg%40inspur.com">&lt;yanyg@inspur.com&gt;</a>
sub<span class="org-whitespace-space">   </span>rsa2048<span class="org-whitespace-space"> </span>2018-06-10<span class="org-whitespace-space"> </span>[E]<span class="org-whitespace-space"> </span>[expires:<span class="org-whitespace-space"> </span>2020-06-09]

pub<span class="org-whitespace-space">   </span>rsa2048<span class="org-whitespace-space"> </span>2018-06-10<span class="org-whitespace-space"> </span>[SC]<span class="org-whitespace-space"> </span>[expires:<span class="org-whitespace-space"> </span>2020-06-09]
<span class="org-whitespace-space">      </span>321A80E17CFEB82B9913E30F43886FD7AC849DDB
uid<span class="org-whitespace-space">           </span>[<span class="org-whitespace-space">  </span>full<span class="org-whitespace-space">  </span>]<span class="org-whitespace-space"> </span>root1<span class="org-whitespace-space"> </span><a href="mailto:root1%40test.com">&lt;root1@test.com&gt;</a>
sub<span class="org-whitespace-space">   </span>rsa2048<span class="org-whitespace-space"> </span>2018-06-10<span class="org-whitespace-space"> </span>[E]<span class="org-whitespace-space"> </span>[expires:<span class="org-whitespace-space"> </span>2020-06-09]

pub<span class="org-whitespace-space">   </span>rsa4096<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space"> </span>[SC]
<span class="org-whitespace-space">      </span>4F2F97E03BFBF466032ADFB382159169CFBF69E6
uid<span class="org-whitespace-space">           </span>[ultimate]<span class="org-whitespace-space"> </span>gpgtest<span class="org-whitespace-space"> </span>(GPG<span class="org-whitespace-space"> </span>test<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>blog)<span class="org-whitespace-space"> </span><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>
sub<span class="org-whitespace-space">   </span>rsa4096<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space"> </span>[E]
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--list-keys<span class="org-whitespace-space"> </span>--keyid-format<span class="org-whitespace-space"> </span>short
pub<span class="org-whitespace-space">   </span>rsa4096/CFBF69E6<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space"> </span>[SC]
<span class="org-whitespace-space">      </span>4F2F97E03BFBF466032ADFB382159169CFBF69E6
uid<span class="org-whitespace-space">         </span>[ultimate]<span class="org-whitespace-space"> </span>gpgtest<span class="org-whitespace-space"> </span>(GPG<span class="org-whitespace-space"> </span>test<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>blog)<span class="org-whitespace-space"> </span><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>
sub<span class="org-whitespace-space">   </span>rsa4096/2EF4FC4B<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space"> </span>[E]
</pre>
</div>
</div>
</div>

<div id="outline-container-org40914ef" class="outline-4">
<h4 id="org40914ef"><span class="section-number-4">3.2.2</span> 删除密钥</h4>
<div class="outline-text-4" id="text-3-2-2">
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--delete-key<span class="org-whitespace-space"> </span>[UID]
</pre>
</div>
<p>
/UID/可以是用户名（比如gpgtest）、邮箱（比如gpgtest@gmail.com）、或者Hash
值（比如CFBF69E6）。
</p>
</div>
</div>

<div id="outline-container-org74695d8" class="outline-4">
<h4 id="org74695d8"><span class="section-number-4">3.2.3</span> 导出公钥</h4>
<div class="outline-text-4" id="text-3-2-3">
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">binary</span><span class="org-whitespace-space"> </span><span class="org-comment">pub</span><span class="org-whitespace-space"> </span><span class="org-comment">key</span>
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--output<span class="org-whitespace-space"> </span>gpgtest.pub<span class="org-whitespace-space"> </span>--export<span class="org-whitespace-space"> </span>gpgtest
<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">ascii</span><span class="org-whitespace-space"> </span><span class="org-comment">pub</span><span class="org-whitespace-space"> </span><span class="org-comment">key</span>
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--armor<span class="org-whitespace-space"> </span>--output<span class="org-whitespace-space"> </span>gpgtest.pub<span class="org-whitespace-space"> </span>--export<span class="org-whitespace-space"> </span>gpgtest
</pre>
</div>
</div>
</div>

<div id="outline-container-org3ba3fff" class="outline-4">
<h4 id="org3ba3fff"><span class="section-number-4">3.2.4</span> 上传公钥</h4>
<div class="outline-text-4" id="text-3-2-4">
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--keyserver<span class="org-whitespace-space"> </span>certserver.pgp.com<span class="org-whitespace-space"> </span>--send-key<span class="org-whitespace-space"> </span>82159169CFBF69E6
</pre>
</div>
<p>
其中/key/不能使用UID，需要使用指纹，至少需要long格式指纹，来自下面命令：
</p>
<div class="org-src-container">
<pre class="src src-sh">gpg<span class="org-whitespace-space"> </span>--list-key<span class="org-whitespace-space"> </span>--keyid-format<span class="org-whitespace-space"> </span>long<span class="org-whitespace-space"> </span>gpgtest
pub<span class="org-whitespace-space">   </span>rsa4096/82159169CFBF69E6<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space"> </span>[SC]
<span class="org-whitespace-space">      </span>4F2F97E03BFBF466032ADFB382159169CFBF69E6
uid<span class="org-whitespace-space">                 </span>[ultimate]<span class="org-whitespace-space"> </span>gpgtest<span class="org-whitespace-space"> </span>(GPG<span class="org-whitespace-space"> </span>test<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>blog)<span class="org-whitespace-space"> </span><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>
sub<span class="org-whitespace-space">   </span>rsa4096/9D5CD5E32EF4FC4B<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space"> </span>[E]
</pre>
</div>
<p>
/man/页描述为"Fingerprints may be used instead of key IDs."
</p>
</div>
</div>

<div id="outline-container-orgca7ffda" class="outline-4">
<h4 id="orgca7ffda"><span class="section-number-4">3.2.5</span> 导入公钥</h4>
<div class="outline-text-4" id="text-3-2-5">
<p>
导入：
</p>
<div class="org-src-container">
<pre class="src src-sh">~#<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--import<span class="org-whitespace-space"> </span>gpgtest.pub
gpg:<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>82159169CFBF69E6:<span class="org-whitespace-space"> </span>public<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span><span class="org-string">"gpgtest</span><span class="org-whitespace-space"> </span><span class="org-string">(GPG</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">blog)</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmai</a></span><span class="org-string"><span class="org-whitespace-line"><a href="mailto:gpgtest%40gmail.com">l.com&gt;</a>"</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">imported</span>
gpg:<span class="org-whitespace-space"> </span>Total<span class="org-whitespace-space"> </span>number<span class="org-whitespace-space"> </span>processed:<span class="org-whitespace-space"> </span>1
gpg:<span class="org-whitespace-space">               </span>imported:<span class="org-whitespace-space"> </span>1
</pre>
</div>

<p>
设置可信：
</p>
<div class="org-src-container">
<pre class="src src-sh">~#<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--edit-key<span class="org-whitespace-space"> </span>gpgtest
gpg&gt;<span class="org-whitespace-space"> </span>help
quit<span class="org-whitespace-space">        </span>quit<span class="org-whitespace-space"> </span>this<span class="org-whitespace-space"> </span>menu
save<span class="org-whitespace-space">        </span>save<span class="org-whitespace-space"> </span>and<span class="org-whitespace-space"> </span>quit
<span class="org-builtin">help</span><span class="org-whitespace-space">        </span>show<span class="org-whitespace-space"> </span>this<span class="org-whitespace-space"> </span>help
fpr<span class="org-whitespace-space">         </span>show<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>fingerprint
grip<span class="org-whitespace-space">        </span>show<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>keygrip
list<span class="org-whitespace-space">        </span>list<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>and<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>IDs
uid<span class="org-whitespace-space">         </span>select<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>ID<span class="org-whitespace-space"> </span>N
key<span class="org-whitespace-space">         </span>select<span class="org-whitespace-space"> </span>subkey<span class="org-whitespace-space"> </span>N
check<span class="org-whitespace-space">       </span>check<span class="org-whitespace-space"> </span>signatures
sign<span class="org-whitespace-space">        </span>sign<span class="org-whitespace-space"> </span>selected<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>IDs<span class="org-whitespace-space"> </span>[*<span class="org-whitespace-space"> </span>see<span class="org-whitespace-space"> </span>below<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>related<span class="org-whitespace-space"> </span>commands]
lsign<span class="org-whitespace-space">       </span>sign<span class="org-whitespace-space"> </span>selected<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>IDs<span class="org-whitespace-space"> </span>locally
tsign<span class="org-whitespace-space">       </span>sign<span class="org-whitespace-space"> </span>selected<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>IDs<span class="org-whitespace-space"> </span>with<span class="org-whitespace-space"> </span>a<span class="org-whitespace-space"> </span>trust<span class="org-whitespace-space"> </span>signature
nrsign<span class="org-whitespace-space">      </span>sign<span class="org-whitespace-space"> </span>selected<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>IDs<span class="org-whitespace-space"> </span>with<span class="org-whitespace-space"> </span>a<span class="org-whitespace-space"> </span>non-revocable<span class="org-whitespace-space"> </span>signature
deluid<span class="org-whitespace-space">      </span>delete<span class="org-whitespace-space"> </span>selected<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>IDs
delkey<span class="org-whitespace-space">      </span>delete<span class="org-whitespace-space"> </span>selected<span class="org-whitespace-space"> </span>subkeys
delsig<span class="org-whitespace-space">      </span>delete<span class="org-whitespace-space"> </span>signatures<span class="org-whitespace-space"> </span>from<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>selected<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>IDs
pref<span class="org-whitespace-space">        </span>list<span class="org-whitespace-space"> </span>preferences<span class="org-whitespace-space"> </span>(expert)
showpref<span class="org-whitespace-space">    </span>list<span class="org-whitespace-space"> </span>preferences<span class="org-whitespace-space"> </span>(verbose)
trust<span class="org-whitespace-space">       </span>change<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>ownertrust
revsig<span class="org-whitespace-space">      </span>revoke<span class="org-whitespace-space"> </span>signatures<span class="org-whitespace-space"> </span>on<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>selected<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>IDs
<span class="org-builtin">enable</span><span class="org-whitespace-space">      </span>enable<span class="org-whitespace-space"> </span>key
disable<span class="org-whitespace-space">     </span>disable<span class="org-whitespace-space"> </span>key
showphoto<span class="org-whitespace-space">   </span>show<span class="org-whitespace-space"> </span>selected<span class="org-whitespace-space"> </span>photo<span class="org-whitespace-space"> </span>IDs
clean<span class="org-whitespace-space">       </span>compact<span class="org-whitespace-space"> </span>unusable<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>IDs<span class="org-whitespace-space"> </span>and<span class="org-whitespace-space"> </span>remove<span class="org-whitespace-space"> </span>unusable<span class="org-whitespace-space"> </span>signatures<span class="org-whitespace-space"> </span>from<span class="org-whitespace-space"> </span>key
minimize<span class="org-whitespace-space">    </span>compact<span class="org-whitespace-space"> </span>unusable<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>IDs<span class="org-whitespace-space"> </span>and<span class="org-whitespace-space"> </span>remove<span class="org-whitespace-space"> </span>all<span class="org-whitespace-space"> </span>signatures<span class="org-whitespace-space"> </span>from<span class="org-whitespace-space"> </span>key

*<span class="org-whitespace-space"> </span>The<span class="org-whitespace-space"> </span><span class="org-string">'sign'</span><span class="org-whitespace-space"> </span>command<span class="org-whitespace-space"> </span>may<span class="org-whitespace-space"> </span>be<span class="org-whitespace-space"> </span>prefixed<span class="org-whitespace-space"> </span>with<span class="org-whitespace-space"> </span>an<span class="org-whitespace-space"> </span><span class="org-string">'l'</span><span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>local<span class="org-whitespace-space"> </span>signatures<span class="org-whitespace-space"> </span>(lsign),
<span class="org-whitespace-space">  </span>a<span class="org-whitespace-space"> </span><span class="org-string">'t'</span><span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>trust<span class="org-whitespace-space"> </span>signatures<span class="org-whitespace-space"> </span>(tsign),<span class="org-whitespace-space"> </span>an<span class="org-whitespace-space"> </span><span class="org-string">'nr'</span><span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>non-revocable<span class="org-whitespace-space"> </span>signatures
<span class="org-whitespace-space">  </span>(nrsign),<span class="org-whitespace-space"> </span>or<span class="org-whitespace-space"> </span>any<span class="org-whitespace-space"> </span>combination<span class="org-whitespace-space"> </span>thereof<span class="org-whitespace-space"> </span>(ltsign,<span class="org-whitespace-space"> </span>tnrsign,<span class="org-whitespace-space"> </span>etc.)<span class="org-builtin">.</span>

gpg&gt;<span class="org-whitespace-space"> </span>trust
pub<span class="org-whitespace-space">  </span>rsa4096/82159169CFBF69E6
<span class="org-whitespace-space">     </span>created:<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space">  </span>expires:<span class="org-whitespace-space"> </span>never<span class="org-whitespace-space">       </span>usage:<span class="org-whitespace-space"> </span>SC
<span class="org-whitespace-space">     </span>trust:<span class="org-whitespace-space"> </span>unknown<span class="org-whitespace-space">       </span>validity:<span class="org-whitespace-space"> </span>unknown
sub<span class="org-whitespace-space">  </span>rsa4096/9D5CD5E32EF4FC4B
<span class="org-whitespace-space">     </span>created:<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space">  </span>expires:<span class="org-whitespace-space"> </span>never<span class="org-whitespace-space">       </span>usage:<span class="org-whitespace-space"> </span>E
[<span class="org-whitespace-space"> </span>unknown]<span class="org-whitespace-space"> </span>(1)<span class="org-builtin">.</span><span class="org-whitespace-space"> </span>gpgtest<span class="org-whitespace-space"> </span>(GPG<span class="org-whitespace-space"> </span>test<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>blog)<span class="org-whitespace-space"> </span><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>

Please<span class="org-whitespace-space"> </span>decide<span class="org-whitespace-space"> </span>how<span class="org-whitespace-space"> </span>far<span class="org-whitespace-space"> </span>you<span class="org-whitespace-space"> </span>trust<span class="org-whitespace-space"> </span>this<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>correctly<span class="org-whitespace-space"> </span>verify<span class="org-whitespace-space"> </span>other<span class="org-whitespace-space"> </span>users<span class="org-string">'</span><span class="org-whitespace-space"> </span><span class="org-string">keys</span>
<span class="org-string">(by</span><span class="org-whitespace-space"> </span><span class="org-string">looking</span><span class="org-whitespace-space"> </span><span class="org-string">at</span><span class="org-whitespace-space"> </span><span class="org-string">passports,</span><span class="org-whitespace-space"> </span><span class="org-string">checking</span><span class="org-whitespace-space"> </span><span class="org-string">fingerprints</span><span class="org-whitespace-space"> </span><span class="org-string">from</span><span class="org-whitespace-space"> </span><span class="org-string">different</span><span class="org-whitespace-space"> </span><span class="org-string">sources,</span><span class="org-whitespace-space"> </span><span class="org-string">etc.)</span>

<span class="org-whitespace-space">  </span><span class="org-string">1</span><span class="org-whitespace-space"> </span><span class="org-string">=</span><span class="org-whitespace-space"> </span><span class="org-string">I</span><span class="org-whitespace-space"> </span><span class="org-string">don'</span>t<span class="org-whitespace-space"> </span>know<span class="org-whitespace-space"> </span>or<span class="org-whitespace-space"> </span>won<span class="org-string">'t</span><span class="org-whitespace-space"> </span><span class="org-string">say</span>
<span class="org-whitespace-space">  </span><span class="org-string">2</span><span class="org-whitespace-space"> </span><span class="org-string">=</span><span class="org-whitespace-space"> </span><span class="org-string">I</span><span class="org-whitespace-space"> </span><span class="org-string">do</span><span class="org-whitespace-space"> </span><span class="org-string">NOT</span><span class="org-whitespace-space"> </span><span class="org-string">trust</span>
<span class="org-whitespace-space">  </span><span class="org-string">3</span><span class="org-whitespace-space"> </span><span class="org-string">=</span><span class="org-whitespace-space"> </span><span class="org-string">I</span><span class="org-whitespace-space"> </span><span class="org-string">trust</span><span class="org-whitespace-space"> </span><span class="org-string">marginally</span>
<span class="org-whitespace-space">  </span><span class="org-string">4</span><span class="org-whitespace-space"> </span><span class="org-string">=</span><span class="org-whitespace-space"> </span><span class="org-string">I</span><span class="org-whitespace-space"> </span><span class="org-string">trust</span><span class="org-whitespace-space"> </span><span class="org-string">fully</span>
<span class="org-whitespace-space">  </span><span class="org-string">5</span><span class="org-whitespace-space"> </span><span class="org-string">=</span><span class="org-whitespace-space"> </span><span class="org-string">I</span><span class="org-whitespace-space"> </span><span class="org-string">trust</span><span class="org-whitespace-space"> </span><span class="org-string">ultimately</span>
<span class="org-whitespace-space">  </span><span class="org-string">m</span><span class="org-whitespace-space"> </span><span class="org-string">=</span><span class="org-whitespace-space"> </span><span class="org-string">back</span><span class="org-whitespace-space"> </span><span class="org-string">to</span><span class="org-whitespace-space"> </span><span class="org-string">the</span><span class="org-whitespace-space"> </span><span class="org-string">main</span><span class="org-whitespace-space"> </span><span class="org-string">menu</span>

<span class="org-string">Your</span><span class="org-whitespace-space"> </span><span class="org-string">decision?</span><span class="org-whitespace-space"> </span><span class="org-string">4</span>

<span class="org-string">pub</span><span class="org-whitespace-space">  </span><span class="org-string">rsa4096/82159169CFBF69E6</span>
<span class="org-whitespace-space">     </span><span class="org-string">created:</span><span class="org-whitespace-space"> </span><span class="org-string">2018-06-11</span><span class="org-whitespace-space">  </span><span class="org-string">expires:</span><span class="org-whitespace-space"> </span><span class="org-string">never</span><span class="org-whitespace-space">       </span><span class="org-string">usage:</span><span class="org-whitespace-space"> </span><span class="org-string">SC</span>
<span class="org-whitespace-space">     </span><span class="org-string">trust:</span><span class="org-whitespace-space"> </span><span class="org-string">full</span><span class="org-whitespace-space">          </span><span class="org-string">validity:</span><span class="org-whitespace-space"> </span><span class="org-string">unknown</span>
<span class="org-string">sub</span><span class="org-whitespace-space">  </span><span class="org-string">rsa4096/9D5CD5E32EF4FC4B</span>
<span class="org-whitespace-space">     </span><span class="org-string">created:</span><span class="org-whitespace-space"> </span><span class="org-string">2018-06-11</span><span class="org-whitespace-space">  </span><span class="org-string">expires:</span><span class="org-whitespace-space"> </span><span class="org-string">never</span><span class="org-whitespace-space">       </span><span class="org-string">usage:</span><span class="org-whitespace-space"> </span><span class="org-string">E</span>
<span class="org-string">[</span><span class="org-whitespace-space"> </span><span class="org-string">unknown]</span><span class="org-whitespace-space"> </span><span class="org-string">(1).</span><span class="org-whitespace-space"> </span><span class="org-string">gpgtest</span><span class="org-whitespace-space"> </span><span class="org-string">(GPG</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">blog)</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a></span>
<span class="org-string">Please</span><span class="org-whitespace-space"> </span><span class="org-string">note</span><span class="org-whitespace-space"> </span><span class="org-string">that</span><span class="org-whitespace-space"> </span><span class="org-string">the</span><span class="org-whitespace-space"> </span><span class="org-string">shown</span><span class="org-whitespace-space"> </span><span class="org-string">key</span><span class="org-whitespace-space"> </span><span class="org-string">validity</span><span class="org-whitespace-space"> </span><span class="org-string">is</span><span class="org-whitespace-space"> </span><span class="org-string">not</span><span class="org-whitespace-space"> </span><span class="org-string">necessarily</span><span class="org-whitespace-space"> </span><span class="org-string">correct</span>
<span class="org-string">unless</span><span class="org-whitespace-space"> </span><span class="org-string">you</span><span class="org-whitespace-space"> </span><span class="org-string">restart</span><span class="org-whitespace-space"> </span><span class="org-string">the</span><span class="org-whitespace-space"> </span><span class="org-string">program.</span>

<span class="org-string">gpg&gt;</span><span class="org-whitespace-space"> </span><span class="org-string">save</span>
<span class="org-string">Key</span><span class="org-whitespace-space"> </span><span class="org-string">not</span><span class="org-whitespace-space"> </span><span class="org-string">changed</span><span class="org-whitespace-space"> </span><span class="org-string">so</span><span class="org-whitespace-space"> </span><span class="org-string">no</span><span class="org-whitespace-space"> </span><span class="org-string">update</span><span class="org-whitespace-space"> </span><span class="org-string">needed.</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org880ec5c" class="outline-4">
<h4 id="org880ec5c"><span class="section-number-4">3.2.6</span> 导入私钥</h4>
<div class="outline-text-4" id="text-3-2-6">
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--export-secret-keys<span class="org-whitespace-space"> </span>gpgtest<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>gpgtest.priv
<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">Change</span><span class="org-whitespace-space"> </span><span class="org-comment">to</span><span class="org-whitespace-space"> </span><span class="org-comment">another</span><span class="org-whitespace-space"> </span><span class="org-comment">account</span>
~#<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--allow-secret-key-import<span class="org-whitespace-space"> </span>--import<span class="org-whitespace-space"> </span>gpgtest.priv
<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">change</span><span class="org-whitespace-space"> </span><span class="org-comment">trust</span><span class="org-whitespace-space"> </span><span class="org-comment">to</span><span class="org-whitespace-space"> </span><span class="org-comment">5</span>
gpg<span class="org-whitespace-space"> </span>--edit-key<span class="org-whitespace-space"> </span>gpgtest
<span class="org-function-name">gpg</span><span class="org-whitespace-space"> </span>(GnuPG)<span class="org-whitespace-space"> </span>2.1.18;<span class="org-whitespace-space"> </span>Copyright<span class="org-whitespace-space"> </span>(C)<span class="org-whitespace-space"> </span>2017<span class="org-whitespace-space"> </span>Free<span class="org-whitespace-space"> </span>Software<span class="org-whitespace-space"> </span>Foundation,<span class="org-whitespace-space"> </span>Inc.
This<span class="org-whitespace-space"> </span>is<span class="org-whitespace-space"> </span>free<span class="org-whitespace-space"> </span>software:<span class="org-whitespace-space"> </span>you<span class="org-whitespace-space"> </span>are<span class="org-whitespace-space"> </span>free<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>change<span class="org-whitespace-space"> </span>and<span class="org-whitespace-space"> </span>redistribute<span class="org-whitespace-space"> </span>it.
There<span class="org-whitespace-space"> </span>is<span class="org-whitespace-space"> </span>NO<span class="org-whitespace-space"> </span>WARRANTY,<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>the<span class="org-whitespace-space"> </span>extent<span class="org-whitespace-space"> </span>permitted<span class="org-whitespace-space"> </span>by<span class="org-whitespace-space"> </span>law.

Secret<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>is<span class="org-whitespace-space"> </span>available.

sec<span class="org-whitespace-space">  </span>rsa4096/82159169CFBF69E6
<span class="org-whitespace-space">     </span>created:<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space">  </span>expires:<span class="org-whitespace-space"> </span>never<span class="org-whitespace-space">       </span>usage:<span class="org-whitespace-space"> </span>SC
<span class="org-whitespace-space">     </span>trust:<span class="org-whitespace-space"> </span>full<span class="org-whitespace-space">          </span>validity:<span class="org-whitespace-space"> </span>unknown
ssb<span class="org-whitespace-space">  </span>rsa4096/9D5CD5E32EF4FC4B
<span class="org-whitespace-space">     </span>created:<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space">  </span>expires:<span class="org-whitespace-space"> </span>never<span class="org-whitespace-space">       </span>usage:<span class="org-whitespace-space"> </span>E
[<span class="org-whitespace-space"> </span>unknown]<span class="org-whitespace-space"> </span>(1)<span class="org-builtin">.</span><span class="org-whitespace-space"> </span>gpgtest<span class="org-whitespace-space"> </span>(GPG<span class="org-whitespace-space"> </span>test<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>blog)<span class="org-whitespace-space"> </span><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>

gpg&gt;<span class="org-whitespace-space"> </span>trust
sec<span class="org-whitespace-space">  </span>rsa4096/82159169CFBF69E6
<span class="org-whitespace-space">     </span>created:<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space">  </span>expires:<span class="org-whitespace-space"> </span>never<span class="org-whitespace-space">       </span>usage:<span class="org-whitespace-space"> </span>SC
<span class="org-whitespace-space">     </span>trust:<span class="org-whitespace-space"> </span>full<span class="org-whitespace-space">          </span>validity:<span class="org-whitespace-space"> </span>unknown
ssb<span class="org-whitespace-space">  </span>rsa4096/9D5CD5E32EF4FC4B
<span class="org-whitespace-space">     </span>created:<span class="org-whitespace-space"> </span>2018-06-11<span class="org-whitespace-space">  </span>expires:<span class="org-whitespace-space"> </span>never<span class="org-whitespace-space">       </span>usage:<span class="org-whitespace-space"> </span>E
[<span class="org-whitespace-space"> </span>unknown]<span class="org-whitespace-space"> </span>(1)<span class="org-builtin">.</span><span class="org-whitespace-space"> </span>gpgtest<span class="org-whitespace-space"> </span>(GPG<span class="org-whitespace-space"> </span>test<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>blog)<span class="org-whitespace-space"> </span><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>

Please<span class="org-whitespace-space"> </span>decide<span class="org-whitespace-space"> </span>how<span class="org-whitespace-space"> </span>far<span class="org-whitespace-space"> </span>you<span class="org-whitespace-space"> </span>trust<span class="org-whitespace-space"> </span>this<span class="org-whitespace-space"> </span>user<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>correctly<span class="org-whitespace-space"> </span>verify<span class="org-whitespace-space"> </span>other<span class="org-whitespace-space"> </span>users<span class="org-string">'</span><span class="org-whitespace-space"> </span><span class="org-string">keys</span>
<span class="org-string">(by</span><span class="org-whitespace-space"> </span><span class="org-string">looking</span><span class="org-whitespace-space"> </span><span class="org-string">at</span><span class="org-whitespace-space"> </span><span class="org-string">passports,</span><span class="org-whitespace-space"> </span><span class="org-string">checking</span><span class="org-whitespace-space"> </span><span class="org-string">fingerprints</span><span class="org-whitespace-space"> </span><span class="org-string">from</span><span class="org-whitespace-space"> </span><span class="org-string">different</span><span class="org-whitespace-space"> </span><span class="org-string">sources,</span><span class="org-whitespace-space"> </span><span class="org-string">etc.)</span>

<span class="org-whitespace-space">  </span><span class="org-string">1</span><span class="org-whitespace-space"> </span><span class="org-string">=</span><span class="org-whitespace-space"> </span><span class="org-string">I</span><span class="org-whitespace-space"> </span><span class="org-string">don'</span>t<span class="org-whitespace-space"> </span>know<span class="org-whitespace-space"> </span>or<span class="org-whitespace-space"> </span>won<span class="org-string">'t</span><span class="org-whitespace-space"> </span><span class="org-string">say</span>
<span class="org-whitespace-space">  </span><span class="org-string">2</span><span class="org-whitespace-space"> </span><span class="org-string">=</span><span class="org-whitespace-space"> </span><span class="org-string">I</span><span class="org-whitespace-space"> </span><span class="org-string">do</span><span class="org-whitespace-space"> </span><span class="org-string">NOT</span><span class="org-whitespace-space"> </span><span class="org-string">trust</span>
<span class="org-whitespace-space">  </span><span class="org-string">3</span><span class="org-whitespace-space"> </span><span class="org-string">=</span><span class="org-whitespace-space"> </span><span class="org-string">I</span><span class="org-whitespace-space"> </span><span class="org-string">trust</span><span class="org-whitespace-space"> </span><span class="org-string">marginally</span>
<span class="org-whitespace-space">  </span><span class="org-string">4</span><span class="org-whitespace-space"> </span><span class="org-string">=</span><span class="org-whitespace-space"> </span><span class="org-string">I</span><span class="org-whitespace-space"> </span><span class="org-string">trust</span><span class="org-whitespace-space"> </span><span class="org-string">fully</span>
<span class="org-whitespace-space">  </span><span class="org-string">5</span><span class="org-whitespace-space"> </span><span class="org-string">=</span><span class="org-whitespace-space"> </span><span class="org-string">I</span><span class="org-whitespace-space"> </span><span class="org-string">trust</span><span class="org-whitespace-space"> </span><span class="org-string">ultimately</span>
<span class="org-whitespace-space">  </span><span class="org-string">m</span><span class="org-whitespace-space"> </span><span class="org-string">=</span><span class="org-whitespace-space"> </span><span class="org-string">back</span><span class="org-whitespace-space"> </span><span class="org-string">to</span><span class="org-whitespace-space"> </span><span class="org-string">the</span><span class="org-whitespace-space"> </span><span class="org-string">main</span><span class="org-whitespace-space"> </span><span class="org-string">menu</span>

<span class="org-string">Your</span><span class="org-whitespace-space"> </span><span class="org-string">decision?</span><span class="org-whitespace-space"> </span><span class="org-string">5</span>
<span class="org-string">Do</span><span class="org-whitespace-space"> </span><span class="org-string">you</span><span class="org-whitespace-space"> </span><span class="org-string">really</span><span class="org-whitespace-space"> </span><span class="org-string">want</span><span class="org-whitespace-space"> </span><span class="org-string">to</span><span class="org-whitespace-space"> </span><span class="org-string">set</span><span class="org-whitespace-space"> </span><span class="org-string">this</span><span class="org-whitespace-space"> </span><span class="org-string">key</span><span class="org-whitespace-space"> </span><span class="org-string">to</span><span class="org-whitespace-space"> </span><span class="org-string">ultimate</span><span class="org-whitespace-space"> </span><span class="org-string">trust?</span><span class="org-whitespace-space"> </span><span class="org-string">(y/N)</span><span class="org-whitespace-space"> </span><span class="org-string">y</span>
<span class="org-string">sec</span><span class="org-whitespace-space">  </span><span class="org-string">rsa4096/82159169CFBF69E6</span>
<span class="org-whitespace-space">     </span><span class="org-string">created:</span><span class="org-whitespace-space"> </span><span class="org-string">2018-06-11</span><span class="org-whitespace-space">  </span><span class="org-string">expires:</span><span class="org-whitespace-space"> </span><span class="org-string">never</span><span class="org-whitespace-space">       </span><span class="org-string">usage:</span><span class="org-whitespace-space"> </span><span class="org-string">SC</span>
<span class="org-whitespace-space">     </span><span class="org-string">trust:</span><span class="org-whitespace-space"> </span><span class="org-string">ultimate</span><span class="org-whitespace-space">      </span><span class="org-string">validity:</span><span class="org-whitespace-space"> </span><span class="org-string">unknown</span>
<span class="org-string">ssb</span><span class="org-whitespace-space">  </span><span class="org-string">rsa4096/9D5CD5E32EF4FC4B</span>
<span class="org-whitespace-space">     </span><span class="org-string">created:</span><span class="org-whitespace-space"> </span><span class="org-string">2018-06-11</span><span class="org-whitespace-space">  </span><span class="org-string">expires:</span><span class="org-whitespace-space"> </span><span class="org-string">never</span><span class="org-whitespace-space">       </span><span class="org-string">usage:</span><span class="org-whitespace-space"> </span><span class="org-string">E</span>
<span class="org-string">[</span><span class="org-whitespace-space"> </span><span class="org-string">unknown]</span><span class="org-whitespace-space"> </span><span class="org-string">(1).</span><span class="org-whitespace-space"> </span><span class="org-string">gpgtest</span><span class="org-whitespace-space"> </span><span class="org-string">(GPG</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">blog)</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a></span>
<span class="org-string">Please</span><span class="org-whitespace-space"> </span><span class="org-string">note</span><span class="org-whitespace-space"> </span><span class="org-string">that</span><span class="org-whitespace-space"> </span><span class="org-string">the</span><span class="org-whitespace-space"> </span><span class="org-string">shown</span><span class="org-whitespace-space"> </span><span class="org-string">key</span><span class="org-whitespace-space"> </span><span class="org-string">validity</span><span class="org-whitespace-space"> </span><span class="org-string">is</span><span class="org-whitespace-space"> </span><span class="org-string">not</span><span class="org-whitespace-space"> </span><span class="org-string">necessarily</span><span class="org-whitespace-space"> </span><span class="org-string">correct</span>
<span class="org-string">unless</span><span class="org-whitespace-space"> </span><span class="org-string">you</span><span class="org-whitespace-space"> </span><span class="org-string">restart</span><span class="org-whitespace-space"> </span><span class="org-string">the</span><span class="org-whitespace-space"> </span><span class="org-string">program.</span>

<span class="org-string">gpg&gt;</span><span class="org-whitespace-space"> </span><span class="org-string">save</span>
<span class="org-string">Key</span><span class="org-whitespace-space"> </span><span class="org-string">not</span><span class="org-whitespace-space"> </span><span class="org-string">changed</span><span class="org-whitespace-space"> </span><span class="org-string">so</span><span class="org-whitespace-space"> </span><span class="org-string">no</span><span class="org-whitespace-space"> </span><span class="org-string">update</span><span class="org-whitespace-space"> </span><span class="org-string">needed.</span>
<span class="org-string">~#</span><span class="org-whitespace-space"> </span><span class="org-string">gpg</span><span class="org-whitespace-space"> </span><span class="org-string">--list-keys</span>
<span class="org-string">gpg:</span><span class="org-whitespace-space"> </span><span class="org-string">checking</span><span class="org-whitespace-space"> </span><span class="org-string">the</span><span class="org-whitespace-space"> </span><span class="org-string">trustdb</span>
<span class="org-string">gpg:</span><span class="org-whitespace-space"> </span><span class="org-string">marginals</span><span class="org-whitespace-space"> </span><span class="org-string">needed:</span><span class="org-whitespace-space"> </span><span class="org-string">3</span><span class="org-whitespace-space">  </span><span class="org-string">completes</span><span class="org-whitespace-space"> </span><span class="org-string">needed:</span><span class="org-whitespace-space"> </span><span class="org-string">1</span><span class="org-whitespace-space">  </span><span class="org-string">trust</span><span class="org-whitespace-space"> </span><span class="org-string">model:</span><span class="org-whitespace-space"> </span><span class="org-string">pgp</span>
<span class="org-string">gpg:</span><span class="org-whitespace-space"> </span><span class="org-string">depth:</span><span class="org-whitespace-space"> </span><span class="org-string">0</span><span class="org-whitespace-space">  </span><span class="org-string">valid:</span><span class="org-whitespace-space">   </span><span class="org-string">2</span><span class="org-whitespace-space">  </span><span class="org-string">signed:</span><span class="org-whitespace-space">   </span><span class="org-string">0</span><span class="org-whitespace-space">  </span><span class="org-string">trust:</span><span class="org-whitespace-space"> </span><span class="org-string">0-,</span><span class="org-whitespace-space"> </span><span class="org-string">0q,</span><span class="org-whitespace-space"> </span><span class="org-string">0n,</span><span class="org-whitespace-space"> </span><span class="org-string">0m,</span><span class="org-whitespace-space"> </span><span class="org-string">0f,</span><span class="org-whitespace-space"> </span><span class="org-string">2u</span>
<span class="org-string">gpg:</span><span class="org-whitespace-space"> </span><span class="org-string">next</span><span class="org-whitespace-space"> </span><span class="org-string">trustdb</span><span class="org-whitespace-space"> </span><span class="org-string">check</span><span class="org-whitespace-space"> </span><span class="org-string">due</span><span class="org-whitespace-space"> </span><span class="org-string">at</span><span class="org-whitespace-space"> </span><span class="org-string">2020-06-09</span>
<span class="org-string">/root/.gnupg/pubring.kbx</span>
<span class="org-string">------------------------</span>
<span class="org-string">pub</span><span class="org-whitespace-space">   </span><span class="org-string">rsa2048</span><span class="org-whitespace-space"> </span><span class="org-string">2018-06-10</span><span class="org-whitespace-space"> </span><span class="org-string">[SC]</span><span class="org-whitespace-space"> </span><span class="org-string">[expires:</span><span class="org-whitespace-space"> </span><span class="org-string">2020-06-09]</span>
<span class="org-whitespace-space">      </span><span class="org-string">321A80E17CFEB82B9913E30F43886FD7AC849DDB</span>
<span class="org-string">uid</span><span class="org-whitespace-space">           </span><span class="org-string">[ultimate]</span><span class="org-whitespace-space"> </span><span class="org-string">root1</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:root1%40test.com">&lt;root1@test.com&gt;</a></span>
<span class="org-string">sub</span><span class="org-whitespace-space">   </span><span class="org-string">rsa2048</span><span class="org-whitespace-space"> </span><span class="org-string">2018-06-10</span><span class="org-whitespace-space"> </span><span class="org-string">[E]</span><span class="org-whitespace-space"> </span><span class="org-string">[expires:</span><span class="org-whitespace-space"> </span><span class="org-string">2020-06-09]</span>

<span class="org-string">pub</span><span class="org-whitespace-space">   </span><span class="org-string">rsa4096</span><span class="org-whitespace-space"> </span><span class="org-string">2018-06-11</span><span class="org-whitespace-space"> </span><span class="org-string">[SC]</span>
<span class="org-whitespace-space">      </span><span class="org-string">4F2F97E03BFBF466032ADFB382159169CFBF69E6</span>
<span class="org-string">uid</span><span class="org-whitespace-space">           </span><span class="org-string">[ultimate]</span><span class="org-whitespace-space"> </span><span class="org-string">gpgtest</span><span class="org-whitespace-space"> </span><span class="org-string">(GPG</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">blog)</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a></span>
<span class="org-string">sub</span><span class="org-whitespace-space">   </span><span class="org-string">rsa4096</span><span class="org-whitespace-space"> </span><span class="org-string">2018-06-11</span><span class="org-whitespace-space"> </span><span class="org-string">[E]</span>
</pre>
</div>
<p>
修改后信任模式从unknown改为ultimate。
</p>
</div>
</div>
</div>

<div id="outline-container-orgd9ca38f" class="outline-3">
<h3 id="orgd9ca38f"><span class="section-number-3">3.3</span> 签名与签名验证</h3>
<div class="outline-text-3" id="text-3-3">
<p>
对文件进行签名：
</p>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">generate</span><span class="org-whitespace-space"> </span><span class="org-comment">test</span><span class="org-whitespace-space"> </span><span class="org-comment">files</span>
~$<span class="org-whitespace-space"> </span>dd<span class="org-whitespace-space"> </span><span class="org-variable-name">if</span>=/dev/urandom<span class="org-whitespace-space"> </span><span class="org-variable-name">of</span>=test.data<span class="org-whitespace-space"> </span><span class="org-variable-name">bs</span>=1K<span class="org-whitespace-space"> </span><span class="org-variable-name">count</span>=4
~$<span class="org-whitespace-space"> </span>ls<span class="org-whitespace-space"> </span>-lh<span class="org-whitespace-space"> </span>test.data
-rw-r--r--<span class="org-whitespace-space"> </span>1<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>4.0K<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>14:32<span class="org-whitespace-space"> </span>test.data
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--local-user<span class="org-whitespace-space"> </span>gpgtest<span class="org-whitespace-space"> </span>--sign<span class="org-whitespace-space"> </span>test.data
~$<span class="org-whitespace-space"> </span>ls<span class="org-whitespace-space"> </span>-lh<span class="org-whitespace-space"> </span>test.data*
-rw-r--r--<span class="org-whitespace-space"> </span>1<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>4.0K<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>14:32<span class="org-whitespace-space"> </span>test.data
-rw-r--r--<span class="org-whitespace-space"> </span>1<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>4.7K<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>14:34<span class="org-whitespace-space"> </span>test.data.gpg
gpg<span class="org-whitespace-space"> </span>--verify<span class="org-whitespace-space"> </span>test.data.gpg
gpg:<span class="org-whitespace-space"> </span>Signature<span class="org-whitespace-space"> </span>made<span class="org-whitespace-space"> </span>Mon<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>2018<span class="org-whitespace-space"> </span>02:34:03<span class="org-whitespace-space"> </span>PM<span class="org-whitespace-space"> </span>CST
gpg:<span class="org-whitespace-space">                </span>using<span class="org-whitespace-space"> </span>RSA<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>4F2F97E03BFBF466032ADFB382159169CFBF69E6
gpg:<span class="org-whitespace-space">                </span>issuer<span class="org-whitespace-space"> </span><span class="org-string">"gpgtest@gmail.com"</span>
gpg:<span class="org-whitespace-space"> </span>Good<span class="org-whitespace-space"> </span>signature<span class="org-whitespace-space"> </span>from<span class="org-whitespace-space"> </span><span class="org-string">"gpgtest</span><span class="org-whitespace-space"> </span><span class="org-string">(GPG</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">blog)</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>"</span><span class="org-whitespace-space"> </span>[ulti<span class="org-whitespace-line">mate]</span>
~$<span class="org-whitespace-space"> </span>echo<span class="org-whitespace-space"> </span>$<span class="org-variable-name">?</span>
0
</pre>
</div>

<p>
针对特定 <i>key</i> 进行签名验证：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--output<span class="org-whitespace-space"> </span>gpgtest.gpg<span class="org-whitespace-space"> </span>--export<span class="org-whitespace-space"> </span>gpgtest
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--no-default-keyring<span class="org-whitespace-space"> </span>--keyring<span class="org-whitespace-space"> </span>$<span class="org-variable-name">PWD</span>/gpgtest.gpg<span class="org-whitespace-space"> </span>--verify<span class="org-whitespace-space"> </span>test.data.gpg
gpg:<span class="org-whitespace-space"> </span>Signature<span class="org-whitespace-space"> </span>made<span class="org-whitespace-space"> </span>Mon<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>2018<span class="org-whitespace-space"> </span>02:34:03<span class="org-whitespace-space"> </span>PM<span class="org-whitespace-space"> </span>CST
gpg:<span class="org-whitespace-space">                </span>using<span class="org-whitespace-space"> </span>RSA<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>4F2F97E03BFBF466032ADFB382159169CFBF69E6
gpg:<span class="org-whitespace-space">                </span>issuer<span class="org-whitespace-space"> </span><span class="org-string">"gpgtest@gmail.com"</span>
gpg:<span class="org-whitespace-space"> </span>Good<span class="org-whitespace-space"> </span>signature<span class="org-whitespace-space"> </span>from<span class="org-whitespace-space"> </span><span class="org-string">"gpgtest</span><span class="org-whitespace-space"> </span><span class="org-string">(GPG</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">blog)</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>"</span><span class="org-whitespace-space"> </span>[ulti<span class="org-whitespace-line">mate]</span>
~$<span class="org-whitespace-space"> </span>echo<span class="org-whitespace-space"> </span>$<span class="org-variable-name">?</span>
0
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--no-default-keyring<span class="org-whitespace-space"> </span>--keyring<span class="org-whitespace-space"> </span>$<span class="org-variable-name">PWD</span>/yanyg.gpg<span class="org-whitespace-space"> </span>--verify<span class="org-whitespace-space"> </span>test.data.gpg
gpg:<span class="org-whitespace-space"> </span>Signature<span class="org-whitespace-space"> </span>made<span class="org-whitespace-space"> </span>Mon<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>2018<span class="org-whitespace-space"> </span>02:34:03<span class="org-whitespace-space"> </span>PM<span class="org-whitespace-space"> </span>CST
gpg:<span class="org-whitespace-space">                </span>using<span class="org-whitespace-space"> </span>RSA<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>4F2F97E03BFBF466032ADFB382159169CFBF69E6
gpg:<span class="org-whitespace-space">                </span>issuer<span class="org-whitespace-space"> </span><span class="org-string">"gpgtest@gmail.com"</span>
gpg:<span class="org-whitespace-space"> </span>Can<span class="org-string">'t</span><span class="org-whitespace-space"> </span><span class="org-string">check</span><span class="org-whitespace-space"> </span><span class="org-string">signature:</span><span class="org-whitespace-space"> </span><span class="org-string">No</span><span class="org-whitespace-space"> </span><span class="org-string">public</span><span class="org-whitespace-space"> </span><span class="org-string">key</span>
<span class="org-string">~$</span><span class="org-whitespace-space"> </span><span class="org-string">echo</span><span class="org-whitespace-space"> </span><span class="org-string">$?</span>
<span class="org-string">2</span>
</pre>
</div>
<p>
<i>&#x2013;keyring</i> 参数需要使用绝对路径，否则报告找不到密钥。
</p>

<p>
<i>&#x2013;sign</i> 签名采用二进制存储，如果想保存为纯文本，使用参数 <i>&#x2013;cleansign</i> ：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>echo<span class="org-whitespace-space"> </span><span class="org-string">"plain</span><span class="org-whitespace-space"> </span><span class="org-string">text"</span><span class="org-whitespace-space"> </span>&gt;&gt;<span class="org-whitespace-space"> </span>test.txt
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--clearsign<span class="org-whitespace-space"> </span>test.txt
~$<span class="org-whitespace-space"> </span>ls<span class="org-whitespace-space"> </span>-lh<span class="org-whitespace-space"> </span>test.txt*
-rw-r--r--<span class="org-whitespace-space"> </span>1<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space">  </span>11<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>14:45<span class="org-whitespace-space"> </span>test.txt
-rw-r--r--<span class="org-whitespace-space"> </span>1<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>548<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>14:45<span class="org-whitespace-space"> </span>test.txt.asc
~$<span class="org-whitespace-space"> </span>cat<span class="org-whitespace-space"> </span>test.txt.asc
cat<span class="org-whitespace-space"> </span>test.txt.asc
-----BEGIN<span class="org-whitespace-space"> </span>PGP<span class="org-whitespace-space"> </span>SIGNED<span class="org-whitespace-space"> </span>MESSAGE-----
Hash:<span class="org-whitespace-space"> </span>SHA256

plain<span class="org-whitespace-space"> </span>text
-----BEGIN<span class="org-whitespace-space"> </span>PGP<span class="org-whitespace-space"> </span>SIGNATURE-----

iQEzBAEBCAAdFiEE0BqO3vjy8KO1xif3Ux7dTb+fD1sFAlseGooACgkQUx7dTb+f
D1v/DQgAnn75lyOmcX4TJFMj2FV8J2JVjY8Hbp71jMO68x9j1Kao8pemvMMXC87w
zi80ZfQbiMImpRZG90ObF/8NHkDT/uqcg4yqHnTbfpmMvlTvUcX6AbOBqINC4WG9
89P8JelyfiA/3x5asow3iL2HBITtCEVoYKtwrMJSgfFHd9q/CJjdAx67O0hakzEZ
i1E94rBslfguzO8mRlqvj7b8vEWdGJpXtCPTLhgNKg1Grx9vOhAfhLHl3Vgb+PKB
bVl1EZ2CTBuVk4ruNWBlS0FUo5+gAolicYoNT4v4uDy7AXjKY6dIs9qsbmKBbNN0
<span class="org-variable-name">lXAROEL0pBiIOtYkx531LfwfX69bkg</span>==
=VsDH
-----END<span class="org-whitespace-space"> </span>PGP<span class="org-whitespace-space"> </span>SIGNATURE-----
</pre>
</div>

<p>
一般建议签名与文件分离：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--local-user<span class="org-whitespace-space"> </span>gpgtest<span class="org-whitespace-space"> </span>--detach-sign<span class="org-whitespace-space"> </span>test.data
~$<span class="org-whitespace-space"> </span>ls<span class="org-whitespace-space"> </span>-lh<span class="org-whitespace-space"> </span>test.data*
-rw-r--r--<span class="org-whitespace-space"> </span>1<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>4.0K<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>14:32<span class="org-whitespace-space"> </span>test.data
-rw-r--r--<span class="org-whitespace-space"> </span>1<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>4.7K<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>14:34<span class="org-whitespace-space"> </span>test.data.gpg
-rw-r--r--<span class="org-whitespace-space"> </span>1<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space">  </span>585<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>14:47<span class="org-whitespace-space"> </span>test.data.sig
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--verify<span class="org-whitespace-space"> </span>test.data.sig<span class="org-whitespace-space"> </span>test.data
gpg:<span class="org-whitespace-space"> </span>Signature<span class="org-whitespace-space"> </span>made<span class="org-whitespace-space"> </span>Mon<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>2018<span class="org-whitespace-space"> </span>02:47:22<span class="org-whitespace-space"> </span>PM<span class="org-whitespace-space"> </span>CST
gpg:<span class="org-whitespace-space">                </span>using<span class="org-whitespace-space"> </span>RSA<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>4F2F97E03BFBF466032ADFB382159169CFBF69E6
gpg:<span class="org-whitespace-space">                </span>issuer<span class="org-whitespace-space"> </span><span class="org-string">"gpgtest@gmail.com"</span>
gpg:<span class="org-whitespace-space"> </span>Good<span class="org-whitespace-space"> </span>signature<span class="org-whitespace-space"> </span>from<span class="org-whitespace-space"> </span><span class="org-string">"gpgtest</span><span class="org-whitespace-space"> </span><span class="org-string">(GPG</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">blog)</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>"</span><span class="org-whitespace-space"> </span>[ulti<span class="org-whitespace-line">mate]</span>
<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">Give</span><span class="org-whitespace-space"> </span><span class="org-comment">wrong</span><span class="org-whitespace-space"> </span><span class="org-comment">file:</span>
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--verify<span class="org-whitespace-space"> </span>test.data.sig<span class="org-whitespace-space">  </span>test.txt
gpg:<span class="org-whitespace-space"> </span>Signature<span class="org-whitespace-space"> </span>made<span class="org-whitespace-space"> </span>Mon<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>2018<span class="org-whitespace-space"> </span>02:47:22<span class="org-whitespace-space"> </span>PM<span class="org-whitespace-space"> </span>CST
gpg:<span class="org-whitespace-space">                </span>using<span class="org-whitespace-space"> </span>RSA<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>4F2F97E03BFBF466032ADFB382159169CFBF69E6
gpg:<span class="org-whitespace-space">                </span>issuer<span class="org-whitespace-space"> </span><span class="org-string">"gpgtest@gmail.com"</span>
gpg:<span class="org-whitespace-space"> </span>BAD<span class="org-whitespace-space"> </span>signature<span class="org-whitespace-space"> </span>from<span class="org-whitespace-space"> </span><span class="org-string">"gpgtest</span><span class="org-whitespace-space"> </span><span class="org-string">(GPG</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">blog)</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>"</span><span class="org-whitespace-space"> </span>[ultim<span class="org-whitespace-line">ate]</span>
</pre>
</div>

<p>
ASCII格式签名分离：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--armor<span class="org-whitespace-space"> </span>--detach-sign<span class="org-whitespace-space"> </span>test.txt
File<span class="org-whitespace-space"> </span><span class="org-string">'test.txt.asc'</span><span class="org-whitespace-space"> </span>exists.<span class="org-whitespace-space"> </span>Overwrite?<span class="org-whitespace-space"> </span>(y/N)<span class="org-whitespace-space"> </span>y
yanyg@pc:~/org$<span class="org-whitespace-space"> </span>cat<span class="org-whitespace-space"> </span>test.txt.asc
-----BEGIN<span class="org-whitespace-space"> </span>PGP<span class="org-whitespace-space"> </span>SIGNATURE-----

iQEzBAABCAAdFiEE0BqO3vjy8KO1xif3Ux7dTb+fD1sFAlseG20ACgkQUx7dTb+f
D1sCpgf/d7gh5oaQ50K6CeL6VnFNL54olDcVIaGd6Trjz0smCYuszmVZ2s2j7C0d
ScZkNVQW9yGHj7QURF8HiFfHU44bLvSSkE7H7sS4lhPI1x1EFRNziyeyL4tCQVNj
/muhyDMgAEJ+I8YBsTew5bAT3c7+EyvKACOP0HUqN0ePJFHBeN4hjzeQ+L2Tr6k4
rUETZPmRmYbEKS0Sn85J2ztQbKbHQr5VQ11UmdIsGHIM4tZuf57BBXoD0QCzPzJg
OQBs4tQZfPsC1rfVZgg8GgxhVcfCRRNOO/vtz+aiVgzIf+IIRAQnnVvj2lkpVi2E
IuSb+9CDA/f4W2VFUka8xFg/h2EBvw==
=YAAi
-----END<span class="org-whitespace-space"> </span>PGP<span class="org-whitespace-space"> </span>SIGNATURE-----
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--verify<span class="org-whitespace-space"> </span>test.txt.asc<span class="org-whitespace-space"> </span>test.txt
gpg:<span class="org-whitespace-space"> </span>Signature<span class="org-whitespace-space"> </span>made<span class="org-whitespace-space"> </span>Mon<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>2018<span class="org-whitespace-space"> </span>02:49:17<span class="org-whitespace-space"> </span>PM<span class="org-whitespace-space"> </span>CST
gpg:<span class="org-whitespace-space">                </span>using<span class="org-whitespace-space"> </span>RSA<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>D01A8EDEF8F2F0A3B5C627F7531EDD4DBF9F0F5B
gpg:<span class="org-whitespace-space"> </span>Good<span class="org-whitespace-space"> </span>signature<span class="org-whitespace-space"> </span>from<span class="org-whitespace-space"> </span><span class="org-string">"yanyg</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:yanyg%40inspur.com">&lt;yanyg@inspur.com&gt;</a>"</span><span class="org-whitespace-space"> </span>[ultimate]
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--verify<span class="org-whitespace-space"> </span>test.txt.asc<span class="org-whitespace-space"> </span>test.data
gpg:<span class="org-whitespace-space"> </span>Signature<span class="org-whitespace-space"> </span>made<span class="org-whitespace-space"> </span>Mon<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>2018<span class="org-whitespace-space"> </span>02:49:17<span class="org-whitespace-space"> </span>PM<span class="org-whitespace-space"> </span>CST
gpg:<span class="org-whitespace-space">                </span>using<span class="org-whitespace-space"> </span>RSA<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>D01A8EDEF8F2F0A3B5C627F7531EDD4DBF9F0F5B
gpg:<span class="org-whitespace-space"> </span>BAD<span class="org-whitespace-space"> </span>signature<span class="org-whitespace-space"> </span>from<span class="org-whitespace-space"> </span><span class="org-string">"yanyg</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:yanyg%40inspur.com">&lt;yanyg@inspur.com&gt;</a>"</span><span class="org-whitespace-space"> </span>[ultimate]
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf319a5a" class="outline-3">
<h3 id="orgf319a5a"><span class="section-number-3">3.4</span> 加密解密</h3>
<div class="outline-text-3" id="text-3-4">
<p>
使用 <i>&#x2013;encrypt</i> 参数加密， <i>&#x2013;decrypt</i> 参数解密：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--recipient<span class="org-whitespace-space"> </span>gpgtest<span class="org-whitespace-space"> </span>--output<span class="org-whitespace-space"> </span>test.txt.enc<span class="org-whitespace-space"> </span>--encrypt<span class="org-whitespace-space"> </span>test.txt
~$<span class="org-whitespace-space"> </span>ls<span class="org-whitespace-space"> </span>-lh<span class="org-whitespace-space"> </span>test.txt<span class="org-whitespace-space"> </span>test.txt.enc
-rw-r--r--<span class="org-whitespace-space"> </span>1<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space">  </span>11<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>14:45<span class="org-whitespace-space"> </span>test.txt
-rw-r--r--<span class="org-whitespace-space"> </span>1<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>yanyg<span class="org-whitespace-space"> </span>607<span class="org-whitespace-space"> </span>Jun<span class="org-whitespace-space"> </span>11<span class="org-whitespace-space"> </span>14:53<span class="org-whitespace-space"> </span>test.txt.enc
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--decrypt<span class="org-whitespace-space"> </span>test.txt.enc
gpg:<span class="org-whitespace-space"> </span>encrypted<span class="org-whitespace-space"> </span>with<span class="org-whitespace-space"> </span>4096-bit<span class="org-whitespace-space"> </span>RSA<span class="org-whitespace-space"> </span>key,<span class="org-whitespace-space"> </span>ID<span class="org-whitespace-space"> </span>9D5CD5E32EF4FC4B,<span class="org-whitespace-space"> </span>created<span class="org-whitespace-space"> </span>2018-06-11
<span class="org-whitespace-space">      </span><span class="org-string">"gpgtest</span><span class="org-whitespace-space"> </span><span class="org-string">(GPG</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">blog)</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmail.com&gt;</a>"</span>
plain<span class="org-whitespace-space"> </span>text
~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--quiet<span class="org-whitespace-space"> </span>--decrypt<span class="org-whitespace-space"> </span>test.txt.enc
plain<span class="org-whitespace-space"> </span>text
</pre>
</div>

<p>
在当前版本中， <i>&#x2013;secret-keyring</i> 已经标记为废弃的，私钥必须导入之后才可使用：
</p>
<blockquote>
<p>
man:
&#x2013;secret-keyring file
         This is an obsolete option and ignored.  All secret keys are stored in
         the ‘private-keys-v1.d’ directory  below  the  GnuPG  home directory.
</p>
</blockquote>

<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--export-secret-keys<span class="org-whitespace-space"> </span>gpgtest<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>gpgtest.priv
<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">change</span><span class="org-whitespace-space"> </span><span class="org-comment">to</span><span class="org-whitespace-space"> </span><span class="org-comment">root</span>
~#<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--allow-secret-key-import<span class="org-whitespace-space"> </span>--import<span class="org-whitespace-space"> </span>gpgtest.priv
gpg:<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>82159169CFBF69E6:<span class="org-whitespace-space"> </span>public<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span><span class="org-string">"gpgtest</span><span class="org-whitespace-space"> </span><span class="org-string">(GPG</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">blog)</span><span class="org-whitespace-space"> </span><span class="org-string"><a href="mailto:gpgtest%40gmail.com">&lt;gpgtest@gmai</a></span><span class="org-string"><span class="org-whitespace-line"><a href="mailto:gpgtest%40gmail.com">l.com&gt;</a>"</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">imported</span>
gpg:<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>82159169CFBF69E6:<span class="org-whitespace-space"> </span>secret<span class="org-whitespace-space"> </span>key<span class="org-whitespace-space"> </span>imported
gpg:<span class="org-whitespace-space"> </span>Total<span class="org-whitespace-space"> </span>number<span class="org-whitespace-space"> </span>processed:<span class="org-whitespace-space"> </span>1
gpg:<span class="org-whitespace-space">               </span>imported:<span class="org-whitespace-space"> </span>1
gpg:<span class="org-whitespace-space">       </span>secret<span class="org-whitespace-space"> </span>keys<span class="org-whitespace-space"> </span>read:<span class="org-whitespace-space"> </span>1
gpg:<span class="org-whitespace-space">   </span>secret<span class="org-whitespace-space"> </span>keys<span class="org-whitespace-space"> </span>imported:<span class="org-whitespace-space"> </span>1
~#<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--quiet<span class="org-whitespace-space"> </span>--decrypt<span class="org-whitespace-space"> </span>test.txt.enc
plain<span class="org-whitespace-space"> </span>text
</pre>
</div>
</div>
</div>

<div id="outline-container-org324b6c5" class="outline-3">
<h3 id="org324b6c5"><span class="section-number-3">3.5</span> 加密同时签名</h3>
<div class="outline-text-3" id="text-3-5">
<p>
使用本地私钥签名，使用接收者公钥加密：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--local-user<span class="org-whitespace-space"> </span>gpgtest<span class="org-whitespace-space"> </span>--recipient<span class="org-whitespace-space"> </span>root1<span class="org-whitespace-space"> </span>--output<span class="org-whitespace-space"> </span>my.enc<span class="org-whitespace-space"> </span>--sign<span class="org-whitespace-space"> </span>--encrypt<span class="org-whitespace-space"> </span>m<span class="org-whitespace-line">y.txt</span>
<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">Change</span><span class="org-whitespace-space"> </span><span class="org-comment">to</span><span class="org-whitespace-space"> </span><span class="org-comment">root</span><span class="org-whitespace-space"> </span><span class="org-comment">to</span><span class="org-whitespace-space"> </span><span class="org-comment">verify</span><span class="org-whitespace-space"> </span><span class="org-comment">&amp;</span><span class="org-whitespace-space"> </span><span class="org-comment">decrypt</span>
~#<span class="org-whitespace-space"> </span>gpg<span class="org-whitespace-space"> </span>--quiet<span class="org-whitespace-space"> </span>--decrypt<span class="org-whitespace-space"> </span>my.enc
</pre>
</div>
<p>
接收者需要有发送者的公钥进行签名验证，私钥进行解密。可能会发生告警，此时需要设置
<i>key</i> 为可信的。
</p>

<p>
加密同时采用分离签名(<i>&#x2013;detach-sign</i>)，无法进行解密验证。或者我未找到正确组合
参数。
</p>
</div>
</div>
</div>

<div id="outline-container-org2e197ad" class="outline-2">
<h2 id="org2e197ad"><span class="section-number-2">4</span> 其他</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org4b321df" class="outline-3">
<h3 id="org4b321df"><span class="section-number-3">4.1</span> 私钥备份保护</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>没有完美的方法</li>
<li>设置健壮的密码</li>
<li>保存到本地GIT或拷贝到安全、私有介质上</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf3e4838" class="outline-2">
<h2 id="orgf3e4838"><span class="section-number-2">5</span> References</h2>
<div class="outline-text-2" id="text-5">
<dl class="org-dl">
<dt>阮一峰GPG入门教程</dt><dd><a href="http://www.ruanyifeng.com/blog/2013/07/gpg.html">http://www.ruanyifeng.com/blog/2013/07/gpg.html</a></dd>
<dt>GnuPG home</dt><dd><a href="https://gnupg.org/">https://gnupg.org/</a></dd>
<dt>GnuPG Manuals</dt><dd><a href="https://www.gnupg.org/documentation/manuals.html">https://www.gnupg.org/documentation/manuals.html</a></dd>
</dl>
</div>
</div>

<script src="https://utteranc.es/client.js"
        repo="yygcode/yygcode.github.io"
        issue-term="pathname"
        label=" Utterances"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
<noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>
</div>
<div id="postamble" class="status">
<div class="copyright">
2012-2020 Copyright&copy; <i> YANYG - Powered by Emacs Orgmode</i>
</div>
</div>
</body>
</html>
