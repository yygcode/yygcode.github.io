<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<meta charset="utf-8" />
<title>GNU Autotools (autoconf, automake, libtool) 编译简单示例2</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="yanyg" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="/themes/blogs/css/blog.css" />
<script type="text/javascript" src="/themes/blogs/js/blog.js"> </script>
</head>
<body>
<div id="preamble" class="status">
<a href="../../../index.html">Yanyg - SAN Software Engineer</a>
<div class="sitelinks">
  <a href="../../archives.html">Archives</a> |
  <a href="../../theindex.html">Index</a> |
  <a href="../../tags.html">TAGS</a> |
  <a href="https://github.com/yygcode">Github</a> |
  <a href="../../../about.html">About Me</a>
</div>
</div>
<div id="content">
<h1 class="title">GNU Autotools (autoconf, automake, libtool) 编译简单示例2</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org2b3df56">1. 基础</a></li>
<li><a href="#org876a044">2. configure.ac 分析说明</a></li>
<li><a href="#org06e76b5">3. Makefile.am 分析说明</a></li>
<li><a href="#org1375351">4. autoconf 生成的 Makefile 提供的几种常用目标</a></li>
<li><a href="#orgadf70c2">5. 资源推荐</a></li>
</ul>
</div>
</div>

<div id="outline-container-org2b3df56" class="outline-2">
<h2 id="org2b3df56"><span class="section-number-2">1</span> 基础</h2>
<div class="outline-text-2" id="text-1">
<p>
先阅读GNU Autotools (autoconf, automake, libtool, etc.) <a href="autoconf.html">autoconf</a>简单示例并成功执行、理解所说内容。
</p>

<p>
先提供一个脚本。拷贝所有内容保存为文件atdir.sh并添加可执行权限，然后执行。注意，最好不要以根用户身份执行它。
</p>
<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/bin/</span><span class="org-keyword">sh</span>

<span class="org-builtin">echo</span><span class="org-whitespace-space"> </span><span class="org-string">"Autotools</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">autotools</span><span class="org-whitespace-space"> </span><span class="org-string">multi</span><span class="org-whitespace-space"> </span><span class="org-string">directories</span><span class="org-whitespace-space"> </span><span class="org-string">(stands</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">atdirs)"</span>

<span class="org-function-name">echo_exit</span>()
{
<span class="org-whitespace-space">    </span><span class="org-builtin">echo</span><span class="org-whitespace-space"> </span><span class="org-string">"ERROR:</span><span class="org-whitespace-space"> </span><span class="org-string">$@"</span>
<span class="org-whitespace-space">    </span><span class="org-keyword">exit</span><span class="org-whitespace-space"> </span>1
}

<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">1.</span><span class="org-whitespace-space"> </span><span class="org-comment">prepare</span><span class="org-whitespace-space"> </span><span class="org-comment">directories</span><span class="org-whitespace-space"> </span><span class="org-comment">and</span><span class="org-whitespace-space"> </span><span class="org-comment">dummy</span><span class="org-whitespace-space"> </span><span class="org-comment">files</span>
[<span class="org-whitespace-space"> </span><span class="org-negation-char">!</span><span class="org-whitespace-space"> </span>-e<span class="org-whitespace-space"> </span><span class="org-string">"atdirs"</span><span class="org-whitespace-space"> </span>]<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span>echo_exit<span class="org-whitespace-space"> </span><span class="org-string">"atdirs</span><span class="org-whitespace-space"> </span><span class="org-string">exists,</span><span class="org-whitespace-space"> </span><span class="org-string">please</span><span class="org-whitespace-space"> </span><span class="org-string">remove</span><span class="org-whitespace-space"> </span><span class="org-string">or</span><span class="org-whitespace-space"> </span><span class="org-string">rename</span><span class="org-whitespace-space"> </span><span class="org-string">it"</span>
mkdir<span class="org-whitespace-space"> </span>atdirs<span class="org-whitespace-space"> </span>&amp;&amp;<span class="org-whitespace-space"> </span><span class="org-builtin">cd</span><span class="org-whitespace-space"> </span>atdirs<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span>echo_exit<span class="org-whitespace-space"> </span><span class="org-string">"mkdir</span><span class="org-whitespace-space"> </span><span class="org-string">-p</span><span class="org-whitespace-space"> </span><span class="org-string">atdirs</span><span class="org-whitespace-space"> </span><span class="org-string">or</span><span class="org-whitespace-space"> </span><span class="org-string">cd</span><span class="org-whitespace-space"> </span><span class="org-string">atdirs</span><span class="org-whitespace-space"> </span><span class="org-string">failed"</span>

mkdir<span class="org-whitespace-space"> </span>-p<span class="org-whitespace-space"> </span>doc<span class="org-whitespace-space"> </span>build-aux<span class="org-whitespace-space"> </span>m4<span class="org-whitespace-space"> </span>man<span class="org-whitespace-space"> </span>src/{include/atdirs,lib{1,2},tests}<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span><span class="org-sh-escaped-newline">\</span>
<span class="org-whitespace-space">    </span>echo_exit<span class="org-whitespace-space"> </span><span class="org-string">"create</span><span class="org-whitespace-space"> </span><span class="org-string">subdirectory</span><span class="org-whitespace-space"> </span><span class="org-string">failed"</span>
touch<span class="org-whitespace-space"> </span>AUTHORS<span class="org-whitespace-space"> </span>BUGS<span class="org-whitespace-space"> </span>ChangeLog<span class="org-whitespace-space"> </span>COPYING<span class="org-whitespace-space"> </span>NEWS<span class="org-whitespace-space"> </span>README<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span><span class="org-sh-escaped-newline">\</span>
<span class="org-whitespace-space">    </span>echo_exit<span class="org-whitespace-space"> </span><span class="org-string">"touch</span><span class="org-whitespace-space"> </span><span class="org-string">dummy</span><span class="org-whitespace-space"> </span><span class="org-string">files</span><span class="org-whitespace-space"> </span><span class="org-string">failed"</span>

<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">2.</span><span class="org-whitespace-space"> </span><span class="org-comment">generates</span><span class="org-whitespace-space"> </span><span class="org-comment">source,</span><span class="org-whitespace-space"> </span><span class="org-comment">header</span><span class="org-whitespace-space"> </span><span class="org-comment">files</span>
cat<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>src/include/atdirs/lib1.h<span class="org-whitespace-space"> </span>&lt;&lt;EOF
<span class="org-sh-heredoc">#ifndef</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">__ATDIRS_LIB1_H_</span>
<span class="org-sh-heredoc">#define</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">__ATDIRS_LIB1_H_</span>

<span class="org-sh-heredoc">void</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">lib1_print();</span>

<span class="org-sh-heredoc">#endif</span>
<span class="org-sh-heredoc">EOF</span>
cat<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>src/include/atdirs/lib2.h<span class="org-whitespace-space"> </span>&lt;&lt;EOF
<span class="org-sh-heredoc">#ifndef</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">__ATDIRS_LIB2_H_</span>
<span class="org-sh-heredoc">#define</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">__ATDIRS_LIB2_H_</span>

<span class="org-sh-heredoc">void</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">lib2_print();</span>

<span class="org-sh-heredoc">#endif</span>
<span class="org-sh-heredoc">EOF</span>

cat<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>src/lib1/print.c<span class="org-whitespace-space"> </span>&lt;&lt;EOF
<span class="org-sh-heredoc">#ifdef</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">HAVE_CONFIG_H</span>
<span class="org-sh-heredoc">#include</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">&lt;config.h&gt;</span>
<span class="org-sh-heredoc">#endif</span>

<span class="org-sh-heredoc">#include</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">&lt;stdio.h&gt;</span>
<span class="org-sh-heredoc">#include</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">&lt;atdirs/lib1.h&gt;</span>

<span class="org-sh-heredoc">void</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">lib1_print()</span>
<span class="org-sh-heredoc">{</span>
<span class="org-whitespace-space">    </span><span class="org-sh-heredoc">printf("lib1-print:</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">"</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">PACKAGE_STRING</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">"</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">&lt;lib-1&gt;\n");</span>
<span class="org-sh-heredoc">}</span>
<span class="org-sh-heredoc">EOF</span>

cat<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>src/lib2/print.c<span class="org-whitespace-space"> </span>&lt;&lt;EOF
<span class="org-sh-heredoc">#ifdef</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">HAVE_CONFIG_H</span>
<span class="org-sh-heredoc">#include</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">&lt;config.h&gt;</span>
<span class="org-sh-heredoc">#endif</span>

<span class="org-sh-heredoc">#include</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">&lt;stdio.h&gt;</span>
<span class="org-sh-heredoc">#include</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">&lt;atdirs/lib2.h&gt;</span>

<span class="org-sh-heredoc">void</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">lib2_print()</span>
<span class="org-sh-heredoc">{</span>
<span class="org-whitespace-space">    </span><span class="org-sh-heredoc">printf("lib2-print:</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">"</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">PACKAGE_STRING</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">"</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">&lt;lib-2&gt;\n");</span>
<span class="org-sh-heredoc">}</span>
<span class="org-sh-heredoc">EOF</span>

cat<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>src/tests/test.c<span class="org-whitespace-space"> </span>&lt;&lt;EOF
<span class="org-sh-heredoc">#include</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">&lt;atdirs/lib1.h&gt;</span>
<span class="org-sh-heredoc">#include</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">&lt;atdirs/lib2.h&gt;</span>

<span class="org-sh-heredoc">int</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">main(void)</span>
<span class="org-sh-heredoc">{</span>
<span class="org-whitespace-space">    </span><span class="org-sh-heredoc">lib1_print();</span>
<span class="org-whitespace-space">    </span><span class="org-sh-heredoc">lib2_print();</span>
<span class="org-whitespace-space">    </span><span class="org-sh-heredoc">return</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">0;</span>
<span class="org-sh-heredoc">}</span>
<span class="org-sh-heredoc">EOF</span>

<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">2.</span><span class="org-whitespace-space"> </span><span class="org-comment">generates</span><span class="org-whitespace-space"> </span><span class="org-comment">Makefil.am</span><span class="org-whitespace-space"> </span><span class="org-comment">files</span>
cat<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>Makefile.am<span class="org-whitespace-space"> </span>&lt;&lt;<span class="org-whitespace-space"> </span>EOF
<span class="org-sh-heredoc">SUBDIRS</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">doc</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">man</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">src</span>

<span class="org-sh-heredoc">ACLOCAL_AMFLAGS</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">-I</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">m4</span>

<span class="org-sh-heredoc">EXTRA_DIST</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">ChangeLog</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">BUGS</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">COPYING</span>
<span class="org-sh-heredoc">EOF</span>
<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">doc,</span><span class="org-whitespace-space"> </span><span class="org-comment">man</span><span class="org-whitespace-space"> </span><span class="org-comment">needs</span><span class="org-whitespace-space"> </span><span class="org-comment">an</span><span class="org-whitespace-space"> </span><span class="org-comment">empty</span><span class="org-whitespace-space"> </span><span class="org-comment">Makefile.am</span>
touch<span class="org-whitespace-space"> </span>{doc,man}/Makefile.am
<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">src</span><span class="org-whitespace-space"> </span><span class="org-comment">needs</span><span class="org-whitespace-space"> </span><span class="org-comment">a</span><span class="org-whitespace-space"> </span><span class="org-comment">valid</span><span class="org-whitespace-space"> </span><span class="org-comment">Makefile.am</span>
cat<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>src/Makefile.am<span class="org-whitespace-space"> </span>&lt;&lt;<span class="org-whitespace-space"> </span>EOF
<span class="org-sh-heredoc">SUBDIRS</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">lib1</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">lib2</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">.</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">tests</span>

<span class="org-sh-heredoc">lib_LTLIBRARIES</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">libatdirs.la</span>
<span class="org-sh-heredoc">libatdirs_la_SOURCES</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span>
<span class="org-sh-heredoc">libatdirs_la_LIBADD</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">lib1/libatdirs_lib1.la</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">lib2/libatdirs_lib2.la</span>
<span class="org-sh-heredoc">libatdirs_la_LDFLAGS</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">-release</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">\$(</span><span class="org-sh-quoted-exec">PACKAGE_VERSION</span><span class="org-sh-heredoc">)</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">-version-info</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">1</span>

<span class="org-sh-heredoc">include_HEADERS</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">\$(</span><span class="org-sh-quoted-exec">top_srcdir</span><span class="org-sh-heredoc">)/\$(</span><span class="org-sh-quoted-exec">atdirs_includedir</span><span class="org-sh-heredoc">)/atdirs/lib1.h</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">\</span>
<span class="org-whitespace-space">              </span><span class="org-sh-heredoc">\$(</span><span class="org-sh-quoted-exec">top_srcdir</span><span class="org-sh-heredoc">)/\$(</span><span class="org-sh-quoted-exec">atdirs_includedir</span><span class="org-sh-heredoc">)/atdirs/lib2.h</span>
<span class="org-sh-heredoc">EOF</span>

cat<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>src/lib1/Makefile.am<span class="org-whitespace-space"> </span>&lt;&lt;<span class="org-whitespace-space"> </span>EOF
<span class="org-sh-heredoc">include</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">\$(</span><span class="org-sh-quoted-exec">top_srcdir</span><span class="org-sh-heredoc">)/Makefile.rules</span>

<span class="org-sh-heredoc">noinst_LTLIBRARIES</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">libatdirs_lib1.la</span>
<span class="org-sh-heredoc">libatdirs_lib1_la_SOURCES</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">print.c</span>
<span class="org-sh-heredoc">EOF</span>

cat<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>src/lib2/Makefile.am<span class="org-whitespace-space"> </span>&lt;&lt;<span class="org-whitespace-space"> </span>EOF
<span class="org-sh-heredoc">include</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">\$(</span><span class="org-sh-quoted-exec">top_srcdir</span><span class="org-sh-heredoc">)/Makefile.rules</span>

<span class="org-sh-heredoc">noinst_LTLIBRARIES</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">libatdirs_lib2.la</span>
<span class="org-sh-heredoc">libatdirs_lib2_la_SOURCES</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">print.c</span>
<span class="org-sh-heredoc">EOF</span>

cat<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>src/tests/Makefile.am<span class="org-whitespace-space"> </span>&lt;&lt;<span class="org-whitespace-space"> </span>EOF
<span class="org-sh-heredoc">include</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">\$(</span><span class="org-sh-quoted-exec">top_srcdir</span><span class="org-sh-heredoc">)/Makefile.rules</span>

<span class="org-sh-heredoc">bin_PROGRAMS</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">test</span>
<span class="org-sh-heredoc">test_SOURCES</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">test.c</span>
<span class="org-sh-heredoc">test_LDADD</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">../libatdirs.la</span>
<span class="org-sh-heredoc">EOF</span>

<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">Makefile.rules:</span>
cat<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>Makefile.rules<span class="org-whitespace-space"> </span>&lt;&lt;<span class="org-whitespace-space"> </span>EOF<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span>echo_exit<span class="org-whitespace-space"> </span><span class="org-string">"generates</span><span class="org-whitespace-space"> </span><span class="org-string">Makefile.rules</span><span class="org-whitespace-space"> </span><span class="org-string">failed"</span>
<span class="org-sh-heredoc">AM_CPPFLAGS</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">=</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">-I\$(</span><span class="org-sh-quoted-exec">top_srcdir</span><span class="org-sh-heredoc">)/\$(</span><span class="org-sh-quoted-exec">atdirs_includedir</span><span class="org-sh-heredoc">)</span>

<span class="org-sh-heredoc">install-header:</span>
<span class="org-whitespace-space">    </span><span class="org-sh-heredoc">\$(</span><span class="org-sh-quoted-exec">MKDIR_P</span><span class="org-sh-heredoc">)</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">"\$(</span><span class="org-sh-quoted-exec">DESTDIR</span><span class="org-sh-heredoc">)\$(</span><span class="org-sh-quoted-exec">includedir</span><span class="org-sh-heredoc">)"</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">||</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">exit</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">$?</span>
<span class="org-whitespace-space">    </span><span class="org-sh-heredoc">cp</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">-av</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">\$(</span><span class="org-sh-quoted-exec">top_srcdir</span><span class="org-sh-heredoc">)/\$(</span><span class="org-sh-quoted-exec">atdirs_includedir</span><span class="org-sh-heredoc">)</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">"\$(</span><span class="org-sh-quoted-exec">DESTDIR</span><span class="org-sh-heredoc">)\$(</span><span class="org-sh-quoted-exec">includedir</span><span class="org-sh-heredoc">)"</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">\</span>
<span class="org-whitespace-space">            </span><span class="org-sh-heredoc">||</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">exit</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">$?</span>
<span class="org-sh-heredoc">EOF</span>

<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">3.</span><span class="org-whitespace-space"> </span><span class="org-comment">generates</span><span class="org-whitespace-space"> </span><span class="org-comment">configure.ac</span>
cat<span class="org-whitespace-space"> </span>&gt;<span class="org-whitespace-space"> </span>configure.ac<span class="org-whitespace-space"> </span>&lt;&lt;<span class="org-whitespace-space"> </span>EOF
<span class="org-sh-heredoc">#</span><span class="org-whitespace-space">                                               </span><span class="org-sh-heredoc">-*-</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">Autoconf</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">-*-</span>
<span class="org-sh-heredoc">#</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">Process</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">this</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">file</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">with</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">autoconf</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">to</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">produce</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">a</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">configure</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">script.</span>

<span class="org-sh-heredoc">AC_PREREQ([2.67])</span>
<span class="org-sh-heredoc">AC_INIT([atdirs],</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">[1.0.0],</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">[cppgp@qq.com],</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">[ycc],</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">[http://blog.csdn.net/cppgp])</span>
<span class="org-sh-heredoc">AC_CONFIG_AUX_DIR([build-aux])</span>
<span class="org-sh-heredoc">AC_CANONICAL_BUILD</span>
<span class="org-sh-heredoc">AC_CANONICAL_HOST</span>
<span class="org-sh-heredoc">AM_INIT_AUTOMAKE([-Wall</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">-Werror</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">gnu])</span>
<span class="org-sh-heredoc">LT_INIT</span>
<span class="org-sh-heredoc">AC_COPYRIGHT([GPLv2])</span>
<span class="org-sh-heredoc">AC_REVISION([\$Revision:</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">1.0</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">\$])</span>
<span class="org-sh-heredoc">AC_CONFIG_SRCDIR([ChangeLog])</span>
<span class="org-sh-heredoc">AC_CONFIG_HEADERS([config.h])</span>
<span class="org-sh-heredoc">AC_CONFIG_MACRO_DIR([m4])</span>

<span class="org-sh-heredoc">#</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">Checks</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">for</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">programs.</span>
<span class="org-sh-heredoc">AC_</span><span class="custom">PROG</span><span class="org-sh-heredoc">_CC</span>

<span class="org-sh-heredoc">#</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">Checks</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">for</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">libraries.</span>

<span class="org-sh-heredoc">#</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">Checks</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">for</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">header</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">files.</span>

<span class="org-sh-heredoc">#</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">Checks</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">for</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">library</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">functions.</span>
<span class="org-sh-heredoc">AC_SUBST([atdirs_includedir],</span><span class="org-whitespace-space"> </span><span class="org-sh-heredoc">[src/include])</span>
<span class="org-sh-heredoc">AC_CONFIG_FILES([Makefile</span>
<span class="org-whitespace-space">             </span><span class="org-sh-heredoc">doc/Makefile</span>
<span class="org-whitespace-space">             </span><span class="org-sh-heredoc">man/Makefile</span>
<span class="org-whitespace-space">             </span><span class="org-sh-heredoc">src/Makefile</span>
<span class="org-whitespace-space">             </span><span class="org-sh-heredoc">src/lib1/Makefile</span>
<span class="org-whitespace-space">             </span><span class="org-sh-heredoc">src/lib2/Makefile</span>
<span class="org-whitespace-space">             </span><span class="org-sh-heredoc">src/tests/Makefile</span>
<span class="org-whitespace-space">             </span><span class="org-sh-heredoc">])</span>
<span class="org-sh-heredoc">AC_OUTPUT</span>
<span class="org-sh-heredoc">EOF</span>

<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">4.</span><span class="org-whitespace-space"> </span><span class="org-comment">generates</span><span class="org-whitespace-space"> </span><span class="org-comment">configure</span>
<span class="org-builtin">echo</span><span class="org-whitespace-space"> </span><span class="org-string">"now</span><span class="org-whitespace-space"> </span><span class="org-string">try</span><span class="org-whitespace-space"> </span><span class="org-string">to</span><span class="org-whitespace-space"> </span><span class="org-string">generates</span><span class="org-whitespace-space"> </span><span class="org-string">configure,</span><span class="org-whitespace-space"> </span><span class="org-string">it</span><span class="org-whitespace-space"> </span><span class="org-string">may</span><span class="org-whitespace-space"> </span><span class="org-string">take</span><span class="org-whitespace-space"> </span><span class="org-string">some</span><span class="org-whitespace-space"> </span><span class="org-string">seconds,</span><span class="org-whitespace-space"> </span><span class="org-string">please</span><span class="org-whitespace-space"> </span><span class="org-string">wait</span><span class="org-whitespace-space"> </span><span class="org-string">..."</span>
autoreconf<span class="org-whitespace-space"> </span>--install<span class="org-whitespace-space"> </span>-Wall<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span>echo_exit<span class="org-whitespace-space"> </span><span class="org-string">"autoreconf</span><span class="org-whitespace-space"> </span><span class="org-string">failed"</span>

<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">5.</span><span class="org-whitespace-space"> </span><span class="org-comment">builds</span><span class="org-whitespace-space"> </span><span class="org-comment">it</span>
mkdir<span class="org-whitespace-space"> </span>-p<span class="org-whitespace-space"> </span>build<span class="org-whitespace-space"> </span>&amp;&amp;<span class="org-whitespace-space"> </span><span class="org-builtin">cd</span><span class="org-whitespace-space"> </span>build<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span>echo_exit<span class="org-whitespace-space"> </span><span class="org-string">"mkdir</span><span class="org-whitespace-space"> </span><span class="org-string">-p</span><span class="org-whitespace-space"> </span><span class="org-string">build</span><span class="org-whitespace-space"> </span><span class="org-string">&amp;&amp;</span><span class="org-whitespace-space"> </span><span class="org-string">cd</span><span class="org-whitespace-space"> </span><span class="org-string">build</span><span class="org-whitespace-space"> </span><span class="org-string">failed"</span>
../configure<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span>echo_exit<span class="org-whitespace-space"> </span><span class="org-string">"configure</span><span class="org-whitespace-space"> </span><span class="org-string">failed"</span>
make<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span>echo_exit<span class="org-whitespace-space"> </span><span class="org-string">"make</span><span class="org-whitespace-space"> </span><span class="org-string">failed"</span>
make<span class="org-whitespace-space"> </span><span class="org-variable-name">DESTDIR</span>=$<span class="org-variable-name">PWD</span>/install<span class="org-whitespace-space"> </span>install<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span>echo_exit<span class="org-whitespace-space"> </span><span class="org-string">"install</span><span class="org-whitespace-space"> </span><span class="org-string">failed"</span>
<span class="org-builtin">echo</span><span class="org-whitespace-space"> </span><span class="org-string">"now</span><span class="org-whitespace-space"> </span><span class="org-string">try</span><span class="org-whitespace-space"> </span><span class="org-string">to</span><span class="org-whitespace-space"> </span><span class="org-string">make</span><span class="org-whitespace-space"> </span><span class="org-string">distcheck,</span><span class="org-whitespace-space"> </span><span class="org-string">it</span><span class="org-whitespace-space"> </span><span class="org-string">may</span><span class="org-whitespace-space"> </span><span class="org-string">take</span><span class="org-whitespace-space"> </span><span class="org-string">some</span><span class="org-whitespace-space"> </span><span class="org-string">seconds,</span><span class="org-whitespace-space"> </span><span class="org-string">please</span><span class="org-whitespace-space"> </span><span class="org-string">wait</span><span class="org-whitespace-space"> </span><span class="org-string">..."</span>
make<span class="org-whitespace-space"> </span>dist<span class="org-whitespace-space"> </span>&amp;&amp;<span class="org-whitespace-space"> </span>make<span class="org-whitespace-space"> </span>distcheck<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span>echo_exit<span class="org-whitespace-space"> </span><span class="org-string">"make</span><span class="org-whitespace-space"> </span><span class="org-string">dist</span><span class="org-whitespace-space"> </span><span class="org-string">&amp;&amp;</span><span class="org-whitespace-space"> </span><span class="org-string">make</span><span class="org-whitespace-space"> </span><span class="org-string">distcheck</span><span class="org-whitespace-space"> </span><span class="org-string">failed"</span>

<span class="org-comment-delimiter">#</span><span class="org-whitespace-space"> </span><span class="org-comment">6.</span><span class="org-whitespace-space"> </span><span class="org-comment">run</span><span class="org-whitespace-space"> </span><span class="org-comment">test</span>
<span class="org-builtin">echo</span><span class="org-whitespace-space"> </span><span class="org-string">"Run</span><span class="org-whitespace-space"> </span><span class="org-string">test:"</span>
./src/tests/test<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span>echo_exit<span class="org-whitespace-space"> </span><span class="org-string">"run</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">failed"</span>
<span class="org-builtin">echo</span><span class="org-whitespace-space"> </span><span class="org-string">"If</span><span class="org-whitespace-space"> </span><span class="org-string">you</span><span class="org-whitespace-space"> </span><span class="org-string">want</span><span class="org-whitespace-space"> </span><span class="org-string">run</span><span class="org-whitespace-space"> </span><span class="org-string">test</span><span class="org-whitespace-space"> </span><span class="org-string">positioned</span><span class="org-whitespace-space"> </span><span class="org-string">at</span><span class="org-whitespace-space"> </span><span class="org-string">install,</span><span class="org-whitespace-space"> </span><span class="org-string">you</span><span class="org-whitespace-space"> </span><span class="org-string">should</span><span class="org-whitespace-space"> </span><span class="org-string">set</span><span class="org-whitespace-space"> </span><span class="org-string">LD_LIBRARY_PATH</span><span class="org-string"><span class="org-whitespace-line">,</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-string"><span class="org-whitespace-line">or</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-string"><span class="org-whitespace-line">else</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-string"><span class="org-whitespace-line">you</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-string"><span class="org-whitespace-line">need</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-string"><span class="org-whitespace-line">install</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-string"><span class="org-whitespace-line">it</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-string"><span class="org-whitespace-line">in</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-string"><span class="org-whitespace-line">standard</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-string"><span class="org-whitespace-line">directory</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-string"><span class="org-whitespace-line">with</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-string"><span class="org-whitespace-line">root</span></span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-string"><span class="org-whitespace-line">privilege"</span></span>
<span class="org-builtin">echo</span><span class="org-whitespace-space"> </span><span class="org-string">"Autoconf</span><span class="org-whitespace-space"> </span><span class="org-string">for</span><span class="org-whitespace-space"> </span><span class="org-string">multi</span><span class="org-whitespace-space"> </span><span class="org-string">directories</span><span class="org-whitespace-space"> </span><span class="org-string">tests</span><span class="org-whitespace-space"> </span><span class="org-string">success</span><span class="org-whitespace-space"> </span><span class="org-string">over</span><span class="org-whitespace-space"> </span><span class="org-string">!"</span>
</pre>
</div>

<p>
执行方法如下：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$<span class="org-whitespace-space"> </span>chmod<span class="org-whitespace-space"> </span>+x<span class="org-whitespace-space"> </span>atdirs.sh<span class="org-whitespace-space"> </span>&amp;&amp;<span class="org-whitespace-space"> </span>./atdirs.sh
</pre>
</div>

<p>
如果一切正常，你应该看到类似如下的结果：
</p>
<div class="org-src-container">
<pre class="src src-text">Autotools<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>autotools<span class="org-whitespace-space"> </span>multi<span class="org-whitespace-space"> </span>directories<span class="org-whitespace-space"> </span>(stands<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>atdirs)
now<span class="org-whitespace-space"> </span>try<span class="org-whitespace-space"> </span>to<span class="org-whitespace-space"> </span>generates<span class="org-whitespace-space"> </span>configure,<span class="org-whitespace-space"> </span>it<span class="org-whitespace-space"> </span>may<span class="org-whitespace-space"> </span>take<span class="org-whitespace-space"> </span>some<span class="org-whitespace-space"> </span>seconds,<span class="org-whitespace-space"> </span>please<span class="org-whitespace-space"> </span>wait<span class="org-whitespace-space"> </span>...
libtoolize:<span class="org-whitespace-space"> </span>putting<span class="org-whitespace-space"> </span>auxiliary<span class="org-whitespace-space"> </span>files<span class="org-whitespace-space"> </span>in<span class="org-whitespace-space"> </span>AC_CONFIG_AUX_DIR,<span class="org-whitespace-space"> </span>`build-aux'.
libtoolize:<span class="org-whitespace-space"> </span>copying<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span>`build-aux/ltmain.sh'
libtoolize:<span class="org-whitespace-space"> </span>putting<span class="org-whitespace-space"> </span>macros<span class="org-whitespace-space"> </span>in<span class="org-whitespace-space"> </span>AC_CONFIG_MACRO_DIR,<span class="org-whitespace-space"> </span>`m4'.
libtoolize:<span class="org-whitespace-space"> </span>copying<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span>`m4/libtool.m4'
libtoolize:<span class="org-whitespace-space"> </span>copying<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span>`m4/ltoptions.m4'
libtoolize:<span class="org-whitespace-space"> </span>copying<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span>`m4/ltsugar.m4'
libtoolize:<span class="org-whitespace-space"> </span>copying<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span>`m4/ltversion.m4'
libtoolize:<span class="org-whitespace-space"> </span>copying<span class="org-whitespace-space"> </span>file<span class="org-whitespace-space"> </span>`m4/lt~obsolete.m4'
configure.ac:7:<span class="org-whitespace-space"> </span>installing<span class="org-whitespace-space"> </span>`build-aux/config.guess'
configure.ac:7:<span class="org-whitespace-space"> </span>installing<span class="org-whitespace-space"> </span>`build-aux/config.sub'
configure.ac:9:<span class="org-whitespace-space"> </span>installing<span class="org-whitespace-space"> </span>`build-aux/install-sh'
configure.ac:9:<span class="org-whitespace-space"> </span>installing<span class="org-whitespace-space"> </span>`build-aux/missing'
src/lib1/Makefile.am:<span class="org-whitespace-space"> </span>installing<span class="org-whitespace-space"> </span>`build-aux/depcomp'
Makefile.am:<span class="org-whitespace-space"> </span>installing<span class="org-whitespace-space"> </span>`./INSTALL'
checking<span class="org-whitespace-space"> </span>build<span class="org-whitespace-space"> </span>system<span class="org-whitespace-space"> </span>type...<span class="org-whitespace-space"> </span>x86_64-unknown-linux-gnu
checking<span class="org-whitespace-space"> </span>host<span class="org-whitespace-space"> </span>system<span class="org-whitespace-space"> </span>type...<span class="org-whitespace-space"> </span>x86_64-unknown-linux-gnu
checking<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>a<span class="org-whitespace-space"> </span>BSD-compatible<span class="org-whitespace-space"> </span>install...<span class="org-whitespace-space"> </span>/usr/bin/install<span class="org-whitespace-space"> </span>-c
&lt;--------------------------------------
&#20013;&#38388;&#24456;&#38271;&#30340;&#19968;&#27573;&#30465;&#30053;&#25481;&#20102;&#12290;&#12290;&#12290;
---------------------------------------&gt;
make[2]:<span class="org-whitespace-space"> </span>Leaving<span class="org-whitespace-space"> </span>directory<span class="org-whitespace-space"> </span>`/home/yanyg/work/git/t410/github.yanyg/misc/auto-too<span class="org-whitespace-line">ls/example/atdirs/build/ycc-1.0.0/_build'</span>
rm<span class="org-whitespace-space"> </span>-f<span class="org-whitespace-space"> </span>config.status<span class="org-whitespace-space"> </span>config.cache<span class="org-whitespace-space"> </span>config.log<span class="org-whitespace-space"> </span>configure.lineno<span class="org-whitespace-space"> </span>config.status.linen<span class="org-whitespace-line">o</span>
rm<span class="org-whitespace-space"> </span>-f<span class="org-whitespace-space"> </span>Makefile
make[1]:<span class="org-whitespace-space"> </span>Leaving<span class="org-whitespace-space"> </span>directory<span class="org-whitespace-space"> </span>`/home/yanyg/work/git/t410/github.yanyg/misc/auto-too<span class="org-whitespace-line">ls/example/atdirs/build/ycc-1.0.0/_build'</span>
{<span class="org-whitespace-space"> </span>test<span class="org-whitespace-space"> </span>!<span class="org-whitespace-space"> </span>-d<span class="org-whitespace-space"> </span>"ycc-1.0.0"<span class="org-whitespace-space"> </span>||<span class="org-whitespace-space"> </span>{<span class="org-whitespace-space"> </span>find<span class="org-whitespace-space"> </span>"ycc-1.0.0"<span class="org-whitespace-space"> </span>-type<span class="org-whitespace-space"> </span>d<span class="org-whitespace-space"> </span>!<span class="org-whitespace-space"> </span>-perm<span class="org-whitespace-space"> </span>-200<span class="org-whitespace-space"> </span>-exec<span class="org-whitespace-space"> </span>chmod<span class="org-whitespace-space"> </span>u<span class="org-whitespace-line">+w</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">{}</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">';'</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">&amp;&amp;</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">rm</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">-fr</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">"ycc-1.0.0";</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">};</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">}</span>
===========================================
ycc-1.0.0<span class="org-whitespace-space"> </span>archives<span class="org-whitespace-space"> </span>ready<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>distribution:
ycc-1.0.0.tar.gz
===========================================
Run<span class="org-whitespace-space"> </span>test:
lib1-print:<span class="org-whitespace-space"> </span>atdirs<span class="org-whitespace-space"> </span>1.0.0<span class="org-whitespace-space"> </span>&lt;lib-1&gt;
lib2-print:<span class="org-whitespace-space"> </span>atdirs<span class="org-whitespace-space"> </span>1.0.0<span class="org-whitespace-space"> </span>&lt;lib-2&gt;
If<span class="org-whitespace-space"> </span>you<span class="org-whitespace-space"> </span>want<span class="org-whitespace-space"> </span>run<span class="org-whitespace-space"> </span>test<span class="org-whitespace-space"> </span>positioned<span class="org-whitespace-space"> </span>at<span class="org-whitespace-space"> </span>install,<span class="org-whitespace-space"> </span>you<span class="org-whitespace-space"> </span>should<span class="org-whitespace-space"> </span>set<span class="org-whitespace-space"> </span>LD_LIBRARY_PATH,<span class="org-whitespace-space"> </span>or<span class="org-whitespace-space"> </span>e<span class="org-whitespace-line">lse</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">you</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">need</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">install</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">it</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">in</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">standard</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">directory</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">with</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">root</span><span class="org-whitespace-space"><span class="org-whitespace-line"> </span></span><span class="org-whitespace-line">privilege</span>
Autoconf<span class="org-whitespace-space"> </span>for<span class="org-whitespace-space"> </span>multi<span class="org-whitespace-space"> </span>directories<span class="org-whitespace-space"> </span>tests<span class="org-whitespace-space"> </span>success<span class="org-whitespace-space"> </span>over<span class="org-whitespace-space"> </span>!
</pre>
</div>

<p>
libtool编译后生成的atdirs/build/src/tests/test实际上是一个脚本，实际的可执行文件在atdirs/build/src/tests/.libs下。
</p>
</div>
</div>

<div id="outline-container-org876a044" class="outline-2">
<h2 id="org876a044"><span class="section-number-2">2</span> configure.ac 分析说明</h2>
</div>

<div id="outline-container-org06e76b5" class="outline-2">
<h2 id="org06e76b5"><span class="section-number-2">3</span> Makefile.am 分析说明</h2>
</div>

<div id="outline-container-org1375351" class="outline-2">
<h2 id="org1375351"><span class="section-number-2">4</span> autoconf 生成的 Makefile 提供的几种常用目标</h2>
</div>

<div id="outline-container-orgadf70c2" class="outline-2">
<h2 id="orgadf70c2"><span class="section-number-2">5</span> 资源推荐</h2>
</div>

<script src="https://utteranc.es/client.js"
        repo="yygcode/yygcode.github.io"
        issue-term="pathname"
        label=" Utterances"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
<noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>
</div>
<div id="postamble" class="status">
<div class="copyright">
2012-2020 Copyright&copy; <i> YANYG - Powered by Emacs Orgmode</i>
</div>
</div>
</body>
</html>
