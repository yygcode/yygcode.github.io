<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<!-- 2018-03-22 Thu 23:56 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<title>大学时一份作业代码备案</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="yanyg" />
<link rel="stylesheet" type="text/css" href="../r/org-code.css" />
<link rel="stylesheet" type="text/css" href="../r/blog-bluetopbar.css" />
<script type="text/javascript" src="../r/MathJax.js?config=TeX-AMS_HTML"> </script>
<script type="text/javascript" src="../r/bootstrap.min.js"></script>
<script type="text/javascript" src="../r/jquery.stickytableheaders.min.js"></script>
</head>
<body>
<div id="preamble" class="status">
<a href="../index.html">Yanyg - SAN Software Engineer</a>
<div class="sitelinks">
  <a href="archives.html">Archives</a> |
  <a href="theindex.html">Index</a> |
  <a href="tags.html">TAGS</a> |
  <a href="https://github.com/yygcode">Github</a> |
  <a href="../about.html">About Me</a>
</div>
</div>
<div id="content">
<h1 class="title">大学时一份作业代码备案</h1>
<p>
这是大学的一份作业，最近整理时在网上搜到，备份到这里。用TurboC编译，运行显示一个柱状图。还记得当时这个作业是拷贝在3.5寸软盘里执行的。临交作业前软盘损坏，紧急的重新输入了一次。当时对C语言是多么的有兴趣。
</p>

<div class="org-src-container">
<pre class="src src-C"><span class="org-preprocessor">#include</span><span class="org-string">&lt;stdio.h&gt;</span>

<span class="org-preprocessor">#define</span> <span class="org-variable-name">SC</span> scanf
<span class="org-preprocessor">#define</span> <span class="org-variable-name">PR</span> printf

<span class="org-keyword">struct</span> <span class="org-type">person</span>
{
        <span class="org-type">char</span> <span class="org-variable-name">name</span>[20];
        <span class="org-type">int</span> <span class="org-variable-name">count</span>,<span class="org-variable-name">code</span>;
        <span class="org-type">float</span> <span class="org-variable-name">pec</span>;
} <span class="org-variable-name">leader</span>[20];

<span class="org-type">int</span> <span class="org-function-name">main</span>()
{
        <span class="org-type">int</span> <span class="org-variable-name">n</span>,<span class="org-variable-name">i</span>;
        <span class="org-type">char</span> <span class="org-variable-name">c</span>;
        <span class="org-type">void</span> <span class="org-function-name">scan</span>(<span class="org-keyword">struct</span> <span class="org-type">person</span> <span class="org-variable-name">leader</span>[],<span class="org-type">int</span> <span class="org-variable-name">n</span>);
        <span class="org-type">void</span> <span class="org-function-name">arith</span>(<span class="org-keyword">struct</span> <span class="org-type">person</span> <span class="org-variable-name">leader</span>[],<span class="org-type">int</span> <span class="org-variable-name">n</span>);
        <span class="org-type">void</span> <span class="org-function-name">diagram</span>(<span class="org-keyword">struct</span> <span class="org-type">person</span> <span class="org-variable-name">leader</span>[],<span class="org-type">int</span> <span class="org-variable-name">n</span>);
        PR(<span class="org-string">"The Course Is Made By Tongxin'Yiban Yan Yonggang.\nNow Press Enter For Running The Course.\n"</span>);
        <span class="org-keyword">while</span>(getchar()!=<span class="org-string">'\n'</span>);
        <span class="org-keyword">while</span>(1)
                {PR(<span class="org-string">"\nInput the number of candidates:"</span>);
                        <span class="org-keyword">do</span>
                                {SC(<span class="org-string">"%d"</span>,&amp;n);
                                        <span class="org-keyword">if</span>(n&gt;1&amp;&amp;n&lt;=20)<span class="org-keyword">break</span>;
                                        <span class="org-keyword">else</span> <span class="org-keyword">if</span>(n&lt;=1)PR(<span class="org-string">"The candidates'number is too small.Input again!"</span>);
                                        <span class="org-keyword">else</span> <span class="org-keyword">if</span>(n&gt;20)PR(<span class="org-string">"The candidates'number is too large.Input again!"</span>);
                                }<span class="org-keyword">while</span>(1);
                        scan(leader,n);
                        arith(leader,n);
                        PR(<span class="org-string">"\nNow press any key for looking diagram."</span>);
                        getchar();
                        getchar();
                        diagram(leader,n);
                        <span class="org-keyword">for</span>(;;)
                                {
                                        PR(<span class="org-string">"\nContinued(Y/N)?"</span>);
                                        c=getchar();
                                        getchar();
                                        <span class="org-keyword">if</span>(c==<span class="org-string">'Y'</span>||c==<span class="org-string">'y'</span>||c==<span class="org-string">'N'</span>||c==<span class="org-string">'n'</span>)<span class="org-keyword">break</span>;
                                }
                        <span class="org-keyword">if</span>(c==<span class="org-string">'y'</span>||c==<span class="org-string">'Y'</span>){<span class="org-keyword">for</span>(i=0;i&lt;20;i++)leader[i].count=0;<span class="org-keyword">continue</span>;}
                        <span class="org-keyword">else</span> <span class="org-keyword">break</span>;
                }
}
<span class="org-type">void</span> <span class="org-function-name">scan</span>(<span class="org-keyword">struct</span> <span class="org-type">person</span> <span class="org-variable-name">leader</span>[],<span class="org-type">int</span> <span class="org-variable-name">n</span>)
{
        <span class="org-type">int</span> <span class="org-variable-name">i</span>,<span class="org-variable-name">j</span>,<span class="org-variable-name">k</span>,<span class="org-variable-name">flag</span>=1;
        <span class="org-keyword">static</span> <span class="org-type">char</span> <span class="org-variable-name">a1</span>[67][35];
        <span class="org-type">char</span> <span class="org-variable-name">c</span>;
        <span class="org-keyword">for</span>(j=0;j&lt;34;j++)
                <span class="org-keyword">for</span>(i=0;i&lt;67;i+=3)
                        a1[i][j]=196;
        <span class="org-keyword">for</span>(i=0;i&lt;67;i++)
                {
                        a1[i][0]=179;a1[i][20]=179;a1[i][34]=179;
                }
        <span class="org-keyword">for</span>(i=3;i&lt;=3*n;i+=3)
                {
                        a1[i][0]=195;a1[i][20]=197;a1[i][34]=180;
                }
        a1[0][0]=218;a1[0][20]=194;a1[0][34]=191;a1[3*n+3][0]=192;a1[3*n+3][20]=193;a1[3*n+3][34]=190;
        <span class="org-keyword">while</span>(flag)
                {
                        PR(<span class="org-string">"\nInput the candidates name and code.If only input name,system will \ngive code one by one.\n"</span>);
                        PR(<span class="org-string">"If only input name,press S,else press others."</span>);
                        getchar();
                        c=getchar();
                        <span class="org-keyword">if</span>(c==<span class="org-string">'s'</span>||c==<span class="org-string">'S'</span>)
                                {
                                        PR(<span class="org-string">"Input name:"</span>);
                                        <span class="org-keyword">for</span>(i=0;i&lt;n;i++){SC(<span class="org-string">"%s"</span>,&amp;leader[i].name);leader[i].code=i+1;}
                                }
                        <span class="org-keyword">else</span>
                                {PR(<span class="org-string">"Input name and code:"</span>);
                                        <span class="org-keyword">for</span>(i=0;i&lt;n;i++)SC(<span class="org-string">"%s%d"</span>,&amp;leader[i].name,&amp;leader[i].code);}
                        PR(<span class="org-string">"This is candidates'name and code:"</span>);
                        a1[1][9]=<span class="org-string">'N'</span>;a1[1][10]=<span class="org-string">'a'</span>;a1[1][11]=<span class="org-string">'m'</span>;a1[1][12]=<span class="org-string">'e'</span>;
                        a1[1][27]=<span class="org-string">'C'</span>;a1[1][28]=<span class="org-string">'o'</span>;a1[1][29]=<span class="org-string">'d'</span>;a1[1][30]=<span class="org-string">'e'</span>;
                        <span class="org-keyword">for</span>(i=0;i&lt;2;i++)
                                {PR(<span class="org-string">"\n\t\t"</span>);
                                        <span class="org-keyword">for</span>(j=0;j&lt;35;j++)PR(<span class="org-string">"%c"</span>,a1[i][j]);}
                        <span class="org-keyword">for</span>(i=0;i&lt;4;i++){a1[1][i+9]=0;a1[1][i+27]=0;}
                        <span class="org-keyword">for</span>(i=3;i&lt;=3*n+3;i+=3)
                                <span class="org-keyword">for</span>(j=0;leader[i/3-1].name[j]!=<span class="org-string">'\0'</span>;j++)a1[i+1][j+1]=leader[i/3-1].name[j];
                        <span class="org-keyword">for</span>(i=3;i&lt;=3*n+3;i++)
                                {PR(<span class="org-string">"\n\t\t"</span>);
                                        <span class="org-keyword">if</span>((i+2)%3!=0||i&lt;3)<span class="org-keyword">for</span>(j=0;j&lt;35;j++)PR(<span class="org-string">"%c"</span>,a1[i][j]);
                                        <span class="org-keyword">else</span> PR(<span class="org-string">"%c%-19s%c%10d %c"</span>,a1[i][0],leader[i/3-1].name,a1[i][20],leader[i/3-1].code,a1[i][34]);
                                }
                        <span class="org-keyword">for</span>(;;)
                                {
                                        PR(<span class="org-string">"\nRight(Y/N)?"</span>);
                                        getchar();
                                        c=getchar();
                                        <span class="org-keyword">if</span>(c==<span class="org-string">'Y'</span>||c==<span class="org-string">'y'</span>){flag=0;<span class="org-keyword">break</span>;}
                                        <span class="org-keyword">else</span> <span class="org-keyword">if</span>(c==<span class="org-string">'N'</span>||c==<span class="org-string">'n'</span>)<span class="org-keyword">break</span>;
                                }
                }
}
<span class="org-type">void</span> <span class="org-function-name">arith</span>(<span class="org-keyword">struct</span> <span class="org-type">person</span> <span class="org-variable-name">leader</span>[],<span class="org-type">int</span> <span class="org-variable-name">n</span>)
{
        <span class="org-type">int</span> <span class="org-variable-name">i</span>,<span class="org-variable-name">j</span>,<span class="org-variable-name">k</span>,<span class="org-variable-name">s</span>=0,<span class="org-variable-name">x</span>,<span class="org-variable-name">flag</span>=1;
        <span class="org-type">float</span> <span class="org-variable-name">m</span>,<span class="org-variable-name">p</span>;
        <span class="org-keyword">static</span> <span class="org-type">char</span> <span class="org-variable-name">c</span>,<span class="org-variable-name">a1</span>[67][55];
        <span class="org-keyword">for</span>(j=0;j&lt;55;j++)
                <span class="org-keyword">for</span>(i=0;i&lt;67;i+=3)
                        a1[i][j]=196;
        <span class="org-keyword">for</span>(i=0;i&lt;67;i++)
                {
                        a1[i][0]=179;a1[i][20]=179;a1[i][34]=179;a1[i][44]=179;a1[i][54]=179;
                }
        <span class="org-keyword">for</span>(i=3;i&lt;=3*n;i+=3)
                {
                        a1[i][0]=195;a1[i][20]=197;a1[i][34]=197;a1[i][44]=197;a1[i][54]=180;
                }
        a1[0][0]=218;a1[0][20]=194;a1[0][34]=194;a1[0][44]=194;a1[0][54]=191;a1[3*n+3][0]=192;a1[3*n+3][20]=193;a1[3*n+3][34]=193;a1[3*n+3][44]=193;a1[3*n+3][54]=190;
        <span class="org-keyword">while</span>(flag)
                {
                        PR(<span class="org-string">"Input the total of vote(an integar):"</span>);
                        SC(<span class="org-string">"%d"</span>,&amp;k);
                        PR(<span class="org-string">"Input the needed revery(a persontage):"</span>);
                        SC(<span class="org-string">"%f%c"</span>,&amp;m,&amp;c);
                        PR(<span class="org-string">"Now beginning vote:\n"</span>);
                        <span class="org-keyword">for</span>(;;)
                                {SC(<span class="org-string">"%d"</span>,&amp;x);
                                        <span class="org-keyword">if</span>(x==0)<span class="org-keyword">break</span>;
                                        <span class="org-keyword">for</span>(j=0;j&lt;n;j++)
                                                <span class="org-keyword">if</span>(x==leader[j].code){leader[j].count++;<span class="org-keyword">break</span>;}
                                        s++;
                                        <span class="org-keyword">if</span>(s&gt;=k)<span class="org-keyword">break</span>;
                                }
                        p=(<span class="org-type">float</span>)s/k*100;
                        <span class="org-keyword">if</span>(p&gt;=m)
                                {
                                        <span class="org-keyword">for</span>(i=0;i&lt;n;i++)leader[i].pec=(<span class="org-type">float</span>)leader[i].count/s*100;
                                        a1[1][5]=<span class="org-string">'N'</span>;a1[1][6]=<span class="org-string">'a'</span>;a1[1][7]=<span class="org-string">'m'</span>;a1[1][8]=<span class="org-string">'e'</span>;
                                        a1[1][24]=<span class="org-string">'C'</span>;a1[1][25]=<span class="org-string">'o'</span>;a1[1][26]=<span class="org-string">'d'</span>;a1[1][27]=<span class="org-string">'e'</span>;
                                        a1[1][37]=<span class="org-string">'C'</span>;a1[1][38]=<span class="org-string">'o'</span>;a1[1][39]=<span class="org-string">'u'</span>;a1[1][40]=<span class="org-string">'n'</span>;a1[1][41]=<span class="org-string">'t'</span>;
                                        a1[1][46]=<span class="org-string">'P'</span>;a1[1][47]=<span class="org-string">'e'</span>;a1[1][48]=<span class="org-string">'r'</span>;a1[1][49]=<span class="org-string">'c'</span>;a1[1][50]=<span class="org-string">'e'</span>;a1[1][51]=<span class="org-string">'e'</span>;a1[1][52]=<span class="org-string">'n'</span>;a1[1][53]=<span class="org-string">'t'</span>;
                                        <span class="org-keyword">for</span>(i=3;i&lt;=3*n+3;i+=3)
                                                <span class="org-keyword">for</span>(j=0;leader[i/3-1].name[j]!=<span class="org-string">'\0'</span>;j++)a1[i+1][j+1]=leader[i/3-1].name[j];
                                        <span class="org-keyword">for</span>(i=0;i&lt;=3*n+3;i++)
                                                {PR(<span class="org-string">"\n\t"</span>);
                                                        <span class="org-keyword">if</span>((i+2)%3!=0||i&lt;3)<span class="org-keyword">for</span>(j=0;j&lt;55;j++)PR(<span class="org-string">"%c"</span>,a1[i][j]);
                                                        <span class="org-keyword">else</span> PR(<span class="org-string">"%c%-19s%c%10d %c%7d %c%8.2f%%%c "</span>,a1[i][0],leader[i/3-1].name,a1[i][20],leader[i/3-1].code,a1[i][34],leader[i/3-1].count,a1[i][44],leader[i/3-1].pec,a1[i][54]);
                                                }
                                }
                        <span class="org-keyword">else</span>
                                {PR(<span class="org-string">"Less of needed revery,It's a invalid vote,input again!\n"</span>);
                                        <span class="org-keyword">for</span>(i=0;i&lt;20;i++)leader[i].count=0;s=0;<span class="org-keyword">continue</span>;}
                        <span class="org-keyword">break</span>;
                }
}
<span class="org-type">void</span> <span class="org-function-name">diagram</span>(<span class="org-keyword">struct</span> <span class="org-type">person</span> <span class="org-variable-name">leader</span>[],<span class="org-type">int</span> <span class="org-variable-name">n</span>)
{
        <span class="org-type">int</span> <span class="org-variable-name">i</span>,<span class="org-variable-name">j</span>,<span class="org-variable-name">k</span>=0;
        <span class="org-keyword">static</span> <span class="org-type">char</span> <span class="org-variable-name">a</span>[21][66],*<span class="org-variable-name">p1</span>,*<span class="org-variable-name">p2</span>;
        p1=<span class="org-string">"Percent"</span>;
        p2=<span class="org-string">"Code"</span>;
        a[0][0]=24;a[20][65]=62;
        <span class="org-keyword">for</span>(i=1;i&lt;21;i++)a[i][0]=179;
        <span class="org-keyword">for</span>(i=1;i&lt;65;i++)a[20][i]=196;
        <span class="org-keyword">for</span>(j=5;j&lt;=5*n;j+=5)
                {<span class="org-keyword">for</span>(i=20-(<span class="org-type">int</span>)leader[k].pec/5;i&lt;20;i++)
                                a[i][j]=219;k++;}
        a[20][0]=192;
        PR(<span class="org-string">" %s\n"</span>,p1);
        <span class="org-keyword">for</span>(i=0;i&lt;21;i++)
                {
                        <span class="org-keyword">if</span>(i%2==0)PR(<span class="org-string">" "</span>);
                        <span class="org-keyword">else</span> PR(<span class="org-string">"%6.2f%%"</span>,(<span class="org-type">float</span>)(20-i)*5);
                        <span class="org-keyword">for</span>(j=0;j&lt;66;j++)
                                PR(<span class="org-string">"%c"</span>,a[i][j]);
                        <span class="org-keyword">if</span>(i==20)PR(<span class="org-string">"%s"</span>,p2);
                        PR(<span class="org-string">"\n"</span>);
                }
        PR(<span class="org-string">" "</span>);
        <span class="org-keyword">for</span>(i=0;i&lt;5*n;i+=5)PR(<span class="org-string">"%5d"</span>,leader[i/5].code);
        <span class="org-keyword">for</span>(j=5;j&lt;=5*n;j+=5)
                <span class="org-keyword">for</span>(i=1;i&lt;20;i++)
                        a[i][j]=0;
        PR(<span class="org-string">"\n"</span>);
}

</pre>
</div>
</div>
<div id="postamble" class="status">
<div id="disqus_thread" class="disqus container"></div>
<script>
  var disqus_config = function () {
    this.page.url = 'http://ycode.org/blogs/vote.html';
    this.page.identifier = 'vote.html';
  };

  (function() {
    var d = document, s = d.createElement('script');
    s.src = 'https://yanyg.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

<div class="copyright">
2012-2020 Copyright&copy; <i> YANYG - Powered by Emacs Orgmode</i>
</div>
</div>
</body>
</html>
