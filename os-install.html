<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<!-- 2018-02-21 Wed 19:59 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<title>OS安装与基本配置</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="yanyg" />
<link rel="stylesheet" type="text/css" href="css/htmlize.css" />
<link rel="stylesheet" type="text/css" href="css/readtheorg.css" />
<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="js/readtheorg.js"></script>
<link rel="stylesheet" type="text/css" href="css/htmlize.css" />
<link rel="stylesheet" type="text/css" href="css/readtheorg.css" />
<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="js/readtheorg.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">OS安装与基本配置</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#win">1. Windows</a>
<ul>
<li><a href="#org6906b09">1.1. 安装</a></li>
<li><a href="#orgc60700d">1.2. 配置</a>
<ul>
<li><a href="#org08f6bc4">1.2.1. 输入法</a></li>
<li><a href="#org30f4a98">1.2.2. Shell环境</a></li>
<li><a href="#orgc2221ad">1.2.3. 快捷键(热键)</a></li>
<li><a href="#orgdf935d5">1.2.4. 文件搜索</a></li>
<li><a href="#orgd926564">1.2.5. Win7鼠标设置自然滚动（反方向滚动）</a></li>
<li><a href="#orge4553b9">1.2.6. C盘空间管理（使用一段时间后空间占用变大）</a></li>
<li><a href="#org8e84e12">1.2.7. 其他</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#linux">2. Linux</a>
<ul>
<li><a href="#linux-debian">2.1. Debian</a>
<ul>
<li><a href="#debian-install">2.1.1. 安装</a></li>
<li><a href="#orgda06a42">2.1.2. 配置(9.3.0)</a></li>
<li><a href="#orgdc4d1eb">2.1.3. 配置(8.x.x)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgd80207c">3. Common</a>
<ul>
<li><a href="#org1d27a90">3.1. Google</a></li>
</ul>
</li>
<li><a href="#partition">4. Partition</a></li>
<li><a href="#usb-stick">5. <span class="todo TODO">TODO</span> 随身USB盘</a>
<ul>
<li><a href="#org7ac53ee">5.1. 工作原理</a></li>
<li><a href="#org1bcc0e4">5.2. 制作方式</a>
<ul>
<li><a href="#org3a92b52">5.2.1. 分区</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org2a45dcc" class="outline-2">
<h2 id="win"><a id="org2a45dcc"></a><span class="section-number-2">1</span> Windows</h2>
<div class="outline-text-2" id="text-win">
</div>
<div id="outline-container-org6906b09" class="outline-3">
<h3 id="org6906b09"><span class="section-number-3">1.1</span> 安装</h3>
<div class="outline-text-3" id="text-1-1">
<p>
新的设备一般不再提供CD/DVD驱动器，而只有USB接口。<a href="https://www.microsoft.com/zh-cn/download/windows-usb-dvd-download-tool">Windows USB DVD Download Tool</a>是微软提供的USB安装盘制作工具。USB盘分区复杂或异常可能导致引导失败。最简单可靠的分区是只保留一个分区，格式化为NTFS。如果想用一个大容量USB制作随身USB盘，请参考
<a href="#usb-stick">随身USB盘</a>。
</p>

<p>
Win7/Win10在安装时会自动生成一个小的隐藏分区，存放引导文件。对分区无特殊规划的用户，这不会有问题。如果要控制分区方式，需安装前完成分区，此时Win7/Win10把引导分区内容放置到系统分区内(C盘)。定制分区参见<a href="#partition">Partition</a>。
</p>

<p>
Win单系统安装十分简单。制作USB安装盘，(可选的)准备分区，接入USB盘开机，配置BIOS
或使用F12(部分硬件可能是F9~F12的其他键)，用USB引导安装。
</p>

<p>
部分用户使用盗版系统，Win7破解程序(比如WIN7 Activation.exe)，需要引导分区可见，右键“我的电脑”，选择“管理”-&gt;“磁盘管理”，右键引导分区，分配驱动器号。
</p>

<p>
Win/Linux双系统参考<a href="#partition">Partition</a>分区。先安装Win系统，完成后安装Linux系统，设置GRUB
引导两个系统，细节参见<a href="#debian-install">Debian Install</a>。如已安装好Linux系统，先在Linux系统下准备好
Windows系统分区，备份磁盘前1MB数据，之后正常Windows，安装完成后使用Live Linux或
Linux安装盘引导，重新刷入备份的1MB数据，调用"update-grub"更新grub，即可完成双系统引导。
</p>
</div>
</div>

<div id="outline-container-orgc60700d" class="outline-3">
<h3 id="orgc60700d"><span class="section-number-3">1.2</span> 配置</h3>
<div class="outline-text-3" id="text-1-2">
</div>
<div id="outline-container-org08f6bc4" class="outline-4">
<h4 id="org08f6bc4"><span class="section-number-4">1.2.1</span> 输入法</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
谷歌拼音(google pinyin)输入法是我一直在用的输入法，高效安静。默认配置英文输入，使用Ctrl+Shift切换，去除Ctrl+Space等配置(因<a href="emacs.html">Emacs</a>频繁使用Ctrl+Space)。
</p>

<p>
谷歌拼音配置关闭状态切换，初始状态中文语言、标点，半角。皮肤黑白分明。词典自动记录自造词，并调整词频。状态栏取消浮动状态栏。
</p>

<p>
Window 10热键设置路径控制面板\时钟、语言和区域\语言\高级设置\更改语言栏热键。操作“在输入语言之间”配置为Ctrl+Shift，中英标点符号配置"Ctrl+."，全半角切换
"Shift+Space"。
</p>
</div>
</div>

<div id="outline-container-org30f4a98" class="outline-4">
<h4 id="org30f4a98"><span class="section-number-4">1.2.2</span> Shell环境</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
大量文件需分类在各级文件夹下保存，相对Linux下的Shell(cd)，Windows的目录切换操作非常低效。<a href="software.html#msys2">MSYS2</a>和<a href="software.html#cygwin">Cygwin</a>均可提供功能Shell环境。之前多年一直在用Cygwin，后切换到MSYS2，因为Cygwin缺少一个良好的包管理器(参见分析什么是好的<a href="software-design.html#package-manage">包管理器</a>)，且性能较MSYS2差，切换到了MSYS2，MSYS2的pacman在安装各类软件时，速度和便捷性都不错。
</p>

<p>
安装配置参见<a href="software.html#msys2">MSYS2</a>。
</p>
</div>
</div>

<div id="outline-container-orgc2221ad" class="outline-4">
<h4 id="orgc2221ad"><span class="section-number-4">1.2.3</span> 快捷键(热键)</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
每天需要频繁重复打开切换多个可执行程序和文件夹，操作乏味低效。自定义丰富的组合热键，快速启动/退出/切换软件、进入指定文件夹，能大幅度提高效率和工作愉悦度。
</p>

<p>
典型地，"Ctrl+Win+I"进入工作目录，"Ctrl+Win+E"启动Emacs，"Ctrl+Win+M"启动MSYS2，
"Win+g"启动浏览器Google搜索剪贴板内容<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>。
</p>

<p>
AutoHotKey是Windows平台好用的工具之一，请参考<a href="software.html#autohotkey">AutoHotkey</a>学习安装配置。
</p>
</div>
</div>

<div id="outline-container-orgdf935d5" class="outline-4">
<h4 id="orgdf935d5"><span class="section-number-4">1.2.4</span> 文件搜索</h4>
<div class="outline-text-4" id="text-1-2-4">
<p>
在硬盘空间动辄TB级的大数据时代，Windows的文件搜索效率导致其已不具有可用性。
<a href="https://www.voidtools.com/downloads/">Everything</a>完美的解决了这个问题，支持正则，秒级完成。
</p>
</div>
</div>
<div id="outline-container-orgd926564" class="outline-4">
<h4 id="orgd926564"><span class="section-number-4">1.2.5</span> Win7鼠标设置自然滚动（反方向滚动）</h4>
<div class="outline-text-4" id="text-1-2-5">
<ul class="org-ul">
<li><a href="http://www.vvse.com/blog/blog/2012/02/27/reverse-scrolling-on-windows-7/">http://www.vvse.com/blog/blog/2012/02/27/reverse-scrolling-on-windows-7/</a></li>
</ul>
<p>
Windows8以下不支持直接配置自然滚动。需要自行更改注册表。
</p>
<ul class="org-ul">
<li>控制面板查找鼠标（控制面板-&gt;硬件和声音-&gt;设备和打印机-&gt;鼠标）</li>
<li>选择"硬件"页，点击需要更改的鼠标，一般是触控板</li>
<li>查看详细信息页中的硬件ID，触控板可能是ACPI\LEN0036类似数值，鼠标是VID_*数值</li>
<li>打开注册表编辑器，进入HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum</li>
<li>ACPI设备不提供FlipFlopWheel项，无法配置
<ul class="org-ul">
<li>在ACPI\LEN0036-&gt;DeviceParameters下添加FlipFlopWheel DWORD，设置1，结果无效</li>
<li>Thinkpad在控制面板下打开鼠标，在Thinkpad标签页选择高级-&gt;滚动，选中“切换方向”即可</li>
</ul></li>
<li>VID设备在HID\VID_xxxx\设备下修改DeviceParameters为1</li>
<li>注销重新登录，或者插拔鼠标</li>
</ul>
</div>
</div>

<div id="outline-container-orge4553b9" class="outline-4">
<h4 id="orge4553b9"><span class="section-number-4">1.2.6</span> C盘空间管理（使用一段时间后空间占用变大）</h4>
<div class="outline-text-4" id="text-1-2-6">
<ul class="org-ul">
<li>Windows.ecb
<ul class="org-ul">
<li>文件位置 C:\ProgramData\Microsoft\Search\Data\Applications\Windows</li>
<li>Windows搜索索引文件，用以加速搜索。此文件可以安全删除，但之后随着搜索使用</li>
</ul></li>
</ul>
<p>
再次变大。
</p>
<ul class="org-ul">
<li>在“控制面板-&gt;索引选项-&gt;高级”中，可设置目标文件夹到其他分区</li>
<li>我使用<a href="software.html#everything">everything</a>搜索，效率更高。用此方法停止此服务：</li>
</ul>
<p>
开始-&gt;设置-&gt;组件服务（或开始-&gt;cmd, 运行services.msc），设置Windows Search
启动类型为禁止，并手动停止服务。
</p>
</div>
</div>

<div id="outline-container-org8e84e12" class="outline-4">
<h4 id="org8e84e12"><span class="section-number-4">1.2.7</span> 其他</h4>
<div class="outline-text-4" id="text-1-2-7">
<p>
请参考<a href="software.html">我的软件</a>。
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgebbbad9" class="outline-2">
<h2 id="linux"><a id="orgebbbad9"></a><span class="section-number-2">2</span> Linux</h2>
<div class="outline-text-2" id="text-linux">
</div>
<div id="outline-container-org5032d22" class="outline-3">
<h3 id="linux-debian"><a id="org5032d22"></a><span class="section-number-3">2.1</span> Debian</h3>
<div class="outline-text-3" id="text-linux-debian">
</div>
<div id="outline-container-org9083908" class="outline-4">
<h4 id="debian-install"><a id="org9083908"></a><span class="section-number-4">2.1.1</span> 安装</h4>
<div class="outline-text-4" id="text-debian-install">
<p>
使用<a href="https://unetbootin.github.io/">unetbootin</a>制作USB安装盘，U盘引导安装。当前unetbootin支持FAT32，不支持NTFS。
</p>

<p>
Linux分区尝试过将/、boot、swap、home使用不同分区，多年使用经验证明几乎没有必要。将home分区分离一定程度是有价值的————将来重格做新系统时，只格系统分区，保留home
分区，避免数据备份工作。
</p>

<p>
Win/Linux双系统安装，先安装Windows，再安装Linux，安装完Linux后，root权限下运行
<code>update-grub</code> 更新配置文件, 手动修改 <code>defaults</code> 设置默认操作系统，如果只安装了
Debian和Windows，一般更改/boot/grub/grub.cfg <code>set defaults="2"</code> 默认从Windows
启动。
</p>

<p>
GRUB图形配置和Windows图形配置在部分平台上有缺陷，会导致Windows开机过程中出现花屏死机。设置GRUB为console模式解决此问题。Debian系统修改/etc/default/grub文件，去掉 <code>GRUB_TERMINAL=console</code> 行注释，如没有此行直接在最后加入。修改完成后，需执行 <code>update-grub</code> 使其生效。
</p>
</div>
</div>

<div id="outline-container-orgda06a42" class="outline-4">
<h4 id="orgda06a42"><span class="section-number-4">2.1.2</span> 配置(9.3.0)</h4>
<div class="outline-text-4" id="text-2-1-2">
</div>
<div id="outline-container-orge11c27e" class="outline-5">
<h5 id="orge11c27e"><span class="section-number-5">2.1.2.1</span> APT源(apt source)</h5>
<div class="outline-text-5" id="text-2-1-2-1">
<p>
打开终端，使用su升级为root用户，执行本节操作。
</p>

<p>
参考<a href="https://wiki.debian.org/SourcesList">https://wiki.debian.org/SourcesList</a>。修改/etc/apt/sources.list如下，该文件其他内容可用#打头注释或直接移除。
</p>
<div class="org-src-container">
<pre class="src src-conf">deb  http://deb.debian.org/debian stretch main contrib non-free
deb-src  http://deb.debian.org/debian stretch main contrib non-free

deb  http://deb.debian.org/debian stretch-updates main contrib non-free
deb-src  http://deb.debian.org/debian stretch-updates main contrib non-free

deb http://security.debian.org/ stretch/updates main contrib non-free
deb-src http://security.debian.org/ stretch/updates main contrib non-free
</pre>
</div>

<p>
9.3.0版本自启动服务unattended-upgrades后台更新，这会占用/var/lib/dpkg/lock锁，导致后面的安装失败。我个人更喜欢自己控制更新与软件包安装，因此直接停掉该服务：
</p>
<dl class="org-dl">
<dt>Step 1</dt><dd>修改文件/etc/apt/apt.conf.d/20auto-upgrades停止自动升级：<br /></dd>
</dl>
<p>
APT::Periodic::Update-Package-Lists "0";
APT::Periodic::Unattended-Upgrade "0";
</p>
<dl class="org-dl">
<dt>Step 2</dt><dd>立即停止服务 systemctl stop unattended-upgrades</dd>
</dl>
<p>
查看可以看是否已停止：
</p>
<div class="org-src-container">
<pre class="src src-sh">~# systemctl list-units -t service | grep unattended-upgrades
<span class="org-comment-delimiter"># </span><span class="org-comment">or use lsof</span>
~# sudo lsof | grep /var/lib/dpkg/lock
</pre>
</div>

<p>
执行更新，超级用户安装vim和sudo：
</p>
<div class="org-src-container">
<pre class="src src-shell">~# apt-get update
~# apt-get install vim sudo
</pre>
</div>

<p>
编辑/etc/sudoers，在root行下面添加yanyg用户：
</p>
<div class="org-src-container">
<pre class="src src-sh">~# vim /etc/sudoers
root    <span class="org-variable-name">ALL</span>=(ALL:ALL) ALL
yanyg   <span class="org-variable-name">ALL</span>=(ALL:ALL) ALL
</pre>
</div>
<p>
/etc/sudoers禁止普通写入，vim执行 :x!强制写入。
</p>

<p>
请退出超级用户，后续安装使用sudo进行，降低操作风险。
</p>
</div>
</div>

<div id="outline-container-org724e795" class="outline-5">
<h5 id="org724e795"><span class="section-number-5">2.1.2.2</span> 安装研发环境</h5>
<div class="outline-text-5" id="text-2-1-2-2">
<p>
APT源已配置好sudo，请使用添加了sudo的普通用户安装如下软件包。
</p>

<p>
研发环境软件包下载大小为200MB~300MB，安装后占用在600MB~1GB之间。如下开发环境安装后可构建Emacs、内核、模块。
</p>

<div class="org-src-container">
<pre class="src src-sh">~$ yes | <span class="org-sh-escaped-newline">\</span>
    sudo apt-get install gcc linux-headers-4.9.0-4-amd64 tmux terminator <span class="org-sh-escaped-newline">\</span>
         manpages manpages-dev manpages-zh manpages-posix manpages-posix-dev <span class="org-sh-escaped-newline">\</span>
         gnome-shell-extension-taskbar gnome-shell-extension-weather <span class="org-sh-escaped-newline">\</span>
         gnome-shell-extension-system-monitor <span class="org-sh-escaped-newline">\</span>
         gnome-shell-extension-autohidetopbar <span class="org-sh-escaped-newline">\</span>
         gnome-shell-extension-multi-monitors <span class="org-sh-escaped-newline">\</span>
         gconf-service gconf2-common libappindicator1 libdbusmenu-glib4 <span class="org-sh-escaped-newline">\</span>
         libdbusmenu-gtk4 libgconf-2-4 libindicator7 <span class="org-sh-escaped-newline">\</span>
         libappindicator3-0.1-cil ntp <span class="org-sh-escaped-newline">\</span>
         autoconf automake libtool cmake info texinfo texi2html gettext <span class="org-sh-escaped-newline">\</span>
         gettext-doc autopoint libasprintf-dev libgettextpo-dev <span class="org-sh-escaped-newline">\</span>
         libxaw7-dev libxaw3dxft8-dev libxaw-doc libxt-doc <span class="org-sh-escaped-newline">\</span>
         libx11-dev libgtk3.0-cil-dev libwxgtk3.0-dev <span class="org-sh-escaped-newline">\</span>
         libgnutls28-dev libtiff5-dev giflib-tools libgif-dev libjpeg-dev <span class="org-sh-escaped-newline">\</span>
         gmp-doc libgmp10-doc libmpfr-dev gnutls-doc gnutls-bin liblzma-doc <span class="org-sh-escaped-newline">\</span>
         libtinfo-dev libncursesw5-dev libncurses5-dev <span class="org-sh-escaped-newline">\</span>
         mailutils mailutils-doc xaw3dg-dev libcairo2-dev librsvg2-dev <span class="org-sh-escaped-newline">\</span>
         liblcms2-dev imagemagick libmagick++-dev <span class="org-sh-escaped-newline">\</span>
         libdbus-1-dev libdbus-glib-1-dev libdbus-c++-dev gconf2 <span class="org-sh-escaped-newline">\</span>
         libgconf2-dev libm17n-dev libotf-dev libxft-dev libcairo2-dev <span class="org-sh-escaped-newline">\</span>
         gir1.2-poppler-0.18 libpoppler-dev libpoppler-glib-dev <span class="org-sh-escaped-newline">\</span>
         libpoppler-dev libpoppler-glib-dev libpoppler-private-dev <span class="org-sh-escaped-newline">\</span>
         global fcitx-googlepinyin <span class="org-sh-escaped-newline">\</span>
         fonts-arphic-bkai00mp fonts-arphic-bsmi00lp <span class="org-sh-escaped-newline">\</span>
         fonts-arphic-gbsn00lp fonts-arphic-gkai00mp fonts-arphic-ukai <span class="org-sh-escaped-newline">\</span>
         rdesktop mplayer ffmpeg vlc libgtk-3-dev mjpegtools mediainfo <span class="org-sh-escaped-newline">\</span>
         libwebkitgtk-3.0-dev libwebkitgtk-dev libwebkit2gtk-4.0-dev <span class="org-sh-escaped-newline">\</span>
</pre>
</div>

<p>
默认安装为英文en_US.UTF-8的，中文环境需要安装locales zh_CN.UTF-8：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$ sudo dpkg-reconfigure locales
</pre>
</div>
<p>
不安装zh_CN.UTF-8 locales时，emacs无法输入中文。
</p>
</div>
</div>

<div id="outline-container-orgff5a3e5" class="outline-5">
<h5 id="orgff5a3e5"><span class="section-number-5">2.1.2.3</span> 配置上网环境</h5>
<div class="outline-text-5" id="text-2-1-2-3">
<p>
安装Google Chrome浏览器，并安装lantern代理：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$ sudo dpkg -i google-chrome-stable-20171220.deb
~$ sudo dpkg -i lantern-installer-64-bit-20171219.deb
</pre>
</div>
<p>
安装后在终端运行lantern，确认可以正常启动运行，如果报告缺少某些库退出，用apt-get
手动安装对应软件包。
</p>

<dl class="org-dl">
<dt>Lantern Debian</dt><dd><a href="https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb">GitHub Lantern 4.4.1 Deb</a></dd>
<dt>Google Chrome</dt><dd><a href="https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb">Google Chrome Amd64 Deb (Current Version)</a></dd>
</dl>
</div>
</div>

<div id="outline-container-org5c9fd4d" class="outline-5">
<h5 id="org5c9fd4d"><span class="section-number-5">2.1.2.4</span> 配置X11界面</h5>
<div class="outline-text-5" id="text-2-1-2-4">
<p>
启动tweak tool配置自己预期的X桌面环境：
</p>
<ul class="org-ul">
<li>static workspace: 4</li>
<li>auto hide top bar</li>
<li>config weather: Beijing, CN</li>
</ul>
</div>
</div>

<div id="outline-container-org108df69" class="outline-5">
<h5 id="org108df69"><span class="section-number-5">2.1.2.5</span> 时间配置</h5>
<div class="outline-text-5" id="text-2-1-2-5">
<p>
通常会遇到时间Linux/Windows下时间不一致问题。这是因为两者一个使用UTC，一个使用
Local-RTC导致，修改为一致即可。修改时间与时区命令如下：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$ sudo timedatectl set-local-rtc 0
~$ sudo timedatectl set-timezone Asia/Shanghai
~$ sudo timedatectl set-ntp yes
</pre>
</div>

<p>
重启NTP服务，立即与网络时间同步：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$ sudo /etc/init.d/ntp restart
</pre>
</div>
</div>
</div>

<div id="outline-container-org50dcb16" class="outline-5">
<h5 id="debian-config-font"><a id="org50dcb16"></a><span class="section-number-5">2.1.2.6</span> 字体增强</h5>
<div class="outline-text-5" id="text-debian-config-font">
<p>
Windows微软雅黑字体设计良好，是我的Emacs默认配置。Linux系统下创建
/usr/share/fonts/windows目录，从Windows系统目录Windows/Fonts(一般是
c:\Windows\Fonts)拷贝文件到新建目录/usr/share/fonts/windows，执行 <code>sudo fc-cache -fsrv</code> 更新缓存。
</p>

<p>
Debian APT有提供更多字体，使用如下方式查找安装：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$ apt-cache search chinese | grep font
</pre>
</div>

<p>
目前的配置英文字体使用<a href="software.html#source-code-pro">Source Code Pro</a>，中文使用微软雅黑(来自Windows)。
</p>
</div>
</div>

<div id="outline-container-orgd79cd89" class="outline-5">
<h5 id="orgd79cd89"><span class="section-number-5">2.1.2.7</span> 其他配置</h5>
<div class="outline-text-5" id="text-2-1-2-7">
<ul class="org-ul">
<li>参考<a href="software.html">我的软件</a></li>
<li>Emacs参考<a href="emacs.html">Emacs笔记</a>
<ul class="org-ul">
<li>Debian 9.3 + emacs 26.0.90 en_US.UTF-8安装，需要安装zh_CN.UTF-8 locales、配置 LC_CTYPE=zh_CN.UTF-8、设置 fcitx后才可输入中文。</li>
</ul></li>
<li>Alt-Tab切换只显示当前workspace窗口
<ul class="org-ul">
<li>follows:
<ol class="org-ol">
<li>install dconf-editor</li>
</ol></li>
</ul></li>
</ul>
<div class="org-src-container">
<pre class="src src-sh">~$ sudo apt-get install dconf-editor
</pre>
</div>
<ol class="org-ol">
<li>exec dconf-editor, Navigate to: org -&gt; gnome -&gt; shell -&gt; app-switcher, Set "current-workspace-only" to true</li>
<li>Another: gsettings set org.gnome.shell.app-switcher current-workspace-only true</li>
</ol>
<ul class="org-ul">
<li><a href="https://askubuntu.com/questions/464946/ubuntu-gnome-force-alt-tab-to-only-switch-on-current-workspace">https://askubuntu.com/questions/464946/ubuntu-gnome-force-alt-tab-to-only-switch-on-current-workspace</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgdc4d1eb" class="outline-4">
<h4 id="orgdc4d1eb"><span class="section-number-4">2.1.3</span> 配置(8.x.x)</h4>
<div class="outline-text-4" id="text-2-1-3">
</div>
<div id="outline-container-orgb1a0a65" class="outline-5">
<h5 id="orgb1a0a65"><span class="section-number-5">2.1.3.1</span> APT源(apt source)</h5>
<div class="outline-text-5" id="text-2-1-3-1">
<p>
配置 <code>/etc/apt/sources.list</code>
</p>
<div class="org-src-container">
<pre class="src src-conf">deb http://httpredir.debian.org/debian jessie main contrib non-free
deb-src http://httpredir.debian.org/debian jessie main contrib non-free

deb http://httpredir.debian.org/debian jessie-updates main contrib non-free
deb-src http://httpredir.debian.org/debian jessie-updates main contrib non-free

deb http://security.debian.org/ jessie/updates main contrib non-free
deb-src http://security.debian.org/ jessie/updates main contrib non-free
</pre>
</div>
</div>
</div>

<div id="outline-container-org9cdd3b6" class="outline-5">
<h5 id="org9cdd3b6"><span class="section-number-5">2.1.3.2</span> Thinkpad Trackpoint(小红点)配置</h5>
<div class="outline-text-5" id="text-2-1-3-2">
<p>
<a href="https://wiki.debian.org/InstallingDebianOn/Thinkpad/Trackpoint">Debian WIKI</a>中配置介绍, 不同Debian配置方式有差异. 示例如下:
</p>
<div class="org-src-container">
<pre class="src src-shell">~$ uname -a
Linux t400 3.16.0-4-amd64 <span class="org-comment-delimiter">#</span><span class="org-comment">1 SMP Debian 3.16.43-2 (2017-04-30) x86_64 GNU/Linux</span>
~$ su
~# cat &gt; /usr/share/X11/xorg.conf.d/20-thinkpad.conf.1 &lt;&lt;EOF
<span class="org-sh-heredoc">&gt;  Section "InputClass"</span>
<span class="org-sh-heredoc">&gt;      Identifier "Trackpoint Wheel Emulation"</span>
<span class="org-sh-heredoc">&gt;      MatchProduct       "TPPS/2 IBM TrackPoint|DualPoint Stick|Synaptics Inc. Composite TouchPad / TrackPoint|ThinkPad USB Keyboard with TrackPoint|ThinkPad Compact USB Keyboard with TrackPoint|USB Trackpoint pointing device"</span>
<span class="org-sh-heredoc">&gt;      MatchDevicePath    "/dev/input/event*"</span>
<span class="org-sh-heredoc">&gt;      Option             "EmulateWheel"          "true"</span>
<span class="org-sh-heredoc">&gt;      Option             "EmulateWheelButton"    "2"</span>
<span class="org-sh-heredoc">&gt;      Option             "Emulate3Buttons"       "false"</span>
<span class="org-sh-heredoc">&gt;      Option             "XAxisMapping"          "6 7"</span>
<span class="org-sh-heredoc">&gt;      Option             "YAxisMapping"          "4 5"</span>
<span class="org-sh-heredoc">&gt;  EndSection</span>
<span class="org-sh-heredoc">&gt; EOF</span>

<span class="org-sh-heredoc"># comment: save all your X11 work and exit, then restart X11</span>
<span class="org-sh-heredoc">~# /etc/init.d/gdm3 restart</span>
</pre>
</div>
<p>
<a href="https://wiki.archlinux.org/index.php/TrackPoint">ArchLinux</a>和<a href="http://thinkwiki.org/wiki/How_to_configure_the_TrackPoint">thinkwiki</a>也有介绍. 单击真心不好用. :)
</p>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd80207c" class="outline-2">
<h2 id="orgd80207c"><span class="section-number-2">3</span> Common</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org1d27a90" class="outline-3">
<h3 id="org1d27a90"><span class="section-number-3">3.1</span> Google</h3>
<div class="outline-text-3" id="text-3-1">
<p>
使用代理设置时，google会选择错误的位置，默认搜索优先当地语言结果。通过链接
<a href="https://www.google.com/preferences">https://www.google.com/preferences</a>配置Region Settings。
</p>
</div>
</div>
</div>

<div id="outline-container-orgd7bf7ab" class="outline-2">
<h2 id="partition"><a id="orgd7bf7ab"></a><span class="section-number-2">4</span> Partition</h2>
<div class="outline-text-2" id="text-partition">
<p>
T440分区清单示例如下。sda1安装Windows，sda2安装Debian，sdb做数据盘：
</p>
<div class="org-src-container">
<pre class="src src-sh">~$ sudo fdisk -luc
Disk /dev/sda: 232.9 GiB, 250059350016 bytes, 488397168 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xbfdedd62

Device     Boot     Start       End   Sectors   Size Id Type
/dev/sda1  *         2048 251660287 251658240   120G  7 HPFS/NTFS/exFAT
/dev/sda2       251660288 488397167 236736880 112.9G 83 Linux


Disk /dev/sdb: 931.5 GiB, 1000204886016 bytes, 1953525168 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
Disklabel type: dos
Disk identifier: 0xa348c330

Device     Boot      Start        End   Sectors   Size Id Type
/dev/sdb1             2048  419432447 419430400   200G 83 Linux
/dev/sdb2        419432448  943720447 524288000   250G  7 HPFS/NTFS/exFAT
/dev/sdb3  *     943720448 1153435647 209715200   100G  7 HPFS/NTFS/exFAT
/dev/sdb4       1153437694 1953525167 800087474 381.5G  f W95 Ext<span class="org-string">'d (LBA)</span>
<span class="org-string">/dev/sdb5       1468016640 1572874239 104857600    50G 83 Linux</span>
<span class="org-string">/dev/sdb6       1572876288 1589653503  16777216     8G 82 Linux swap / Solaris</span>
<span class="org-string">/dev/sdb7       1589655552 1835415551 245760000 117.2G  7 HPFS/NTFS/exFAT</span>
<span class="org-string">/dev/sdb8       1835417600 1953523711 118106112  56.3G  7 HPFS/NTFS/exFAT</span>
<span class="org-string">/dev/sdb9       1153439744 1468016639 314576896   150G  7 HPFS/NTFS/exFAT</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4432d37" class="outline-2">
<h2 id="usb-stick"><a id="org4432d37"></a><span class="section-number-2">5</span> <span class="todo TODO">TODO</span> 随身USB盘</h2>
<div class="outline-text-2" id="text-usb-stick">
<p>
随身携带一个大容量USB(32G/64G), 包含完整可引导的操作系统, 以及Debian, Redhat,
CentOS, Win 7, Win 10操作系统的安装包, 在特定环境下直接运行USB系统工作, 或者解决系统引导异常. 这在开发底层系统, 或对系统做深度定制时是常见的.
</p>
</div>
<div id="outline-container-org7ac53ee" class="outline-3">
<h3 id="org7ac53ee"><span class="section-number-3">5.1</span> 工作原理</h3>
<div class="outline-text-3" id="text-5-1">
<p>
用<a href="https://www.gnu.org/software/grub/">GRUB</a>和<a href="https://sourceforge.net/projects/grub4dos/">grub4dos</a>提供多系统引导, 安装Linux到USB盘, 或用<a href="http://www.linuxfromscratch.org/">LFS</a>制作自己的系统.
</p>
</div>
</div>

<div id="outline-container-org1bcc0e4" class="outline-3">
<h3 id="org1bcc0e4"><span class="section-number-3">5.2</span> 制作方式</h3>
<div class="outline-text-3" id="text-5-2">
</div>
<div id="outline-container-org3a92b52" class="outline-4">
<h4 id="org3a92b52"><span class="section-number-4">5.2.1</span> 分区</h4>
<div class="outline-text-4" id="text-5-2-1">
<p>
使用fdisk分区. part1用做grub, part2用做live linux, part3用做Linux安装系统, part4
是扩展分区, part5/6分别用做win安装盘和win下数据盘. 各分区大小根据USB和安装盘大小进行随意调整. 如下是64GB USB示例:
</p>
<div class="org-src-container">
<pre class="src src-shell">yanyg@t:~$ sudo fdisk -l /dev/sdc

Disk /dev/sdc: 57.9 GiB, 62109253632 bytes, 121307136 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xcad4ebea

Device     Boot     Start       End  Sectors  Size Id Type
/dev/sdc1            2048  33556479 33554432   16G 83 Linux
/dev/sdc2        33556480  75499519 41943040   20G 83 Linux
/dev/sdc3        75499520  88082431 12582912    6G 83 Linux
/dev/sdc4        88082432 121307135 33224704 15.9G  5 Extended
/dev/sdc5        88084480 100667391 12582912    6G  7 HPFS/NTFS/exFAT
/dev/sdc6       100669440 121307135 20637696  9.9G  7 HPFS/NTFS/exFAT
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">&#33050;&#27880;: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara">Win10游戏录制占用该快捷键，进入
开始-&gt;设置-&gt;游戏-&gt;关掉“使用游戏栏记录游戏剪辑、屏幕截图和广播”。</div></div>


</div>
</div></div>
<div id="postamble" class="status">
2012-2020 (&copy;) <i>yanyg</i>

<div id="disqus_thread"></div>
<script>
  var disqus_developer = 1;
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = 'https://yanyg.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>
</body>
</html>
