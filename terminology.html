<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN" xml:lang="zh-CN">
<head>
<!-- 2018-01-01 Mon 21:12 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>术语/Terminology</title>
<meta name="generator" content="Org mode" />
<link rel="stylesheet" type="text/css" href="css/htmlize.css" />
<link rel="stylesheet" type="text/css" href="css/readtheorg.css" />
<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="https://ycode.org"> HOME </a>
</div><div id="content">
<h1 class="title">术语/Terminology</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#dom">1. DOM</a></li>
<li><a href="#hyper">2. Hyper</a></li>
<li><a href="#memory-barrier">3. Memory Barrier</a></li>
<li><a href="#mmio">4. MMIO</a></li>
<li><a href="#pcie">5. PCIe</a></li>
<li><a href="#pmio">6. PMIO</a></li>
<li><a href="#orgdffc086">7. Positional Parameters</a></li>
<li><a href="#sr-iov">8. SR-IOV</a>
<ul>
<li><a href="#org4f3fbad">8.1. Microsoft Doc View</a></li>
</ul>
</li>
<li><a href="#ssd">9. SSD</a></li>
</ul>
</div>
</div>

<div id="outline-container-org58291f5" class="outline-2">
<h2 id="dom"><a id="org58291f5"></a><span class="section-number-2">1</span> DOM</h2>
<div class="outline-text-2" id="text-dom">
</div>
</div>
<div id="outline-container-org6290906" class="outline-2">
<h2 id="hyper"><a id="org6290906"></a><span class="section-number-2">2</span> Hyper</h2>
<div class="outline-text-2" id="text-hyper">
</div>
</div>
<div id="outline-container-orge921f99" class="outline-2">
<h2 id="memory-barrier"><a id="orge921f99"></a><span class="section-number-2">3</span> Memory Barrier</h2>
<div class="outline-text-2" id="text-memory-barrier">
</div>
</div>
<div id="outline-container-org10af1dc" class="outline-2">
<h2 id="mmio"><a id="org10af1dc"></a><span class="section-number-2">4</span> MMIO</h2>
<div class="outline-text-2" id="text-mmio">
<p>
MMIO(Memory-Mapped I/O)与PMIO(Port-Mapped I/O，也称为Isolated I/O)，是CPU与外设
交互的两种方式。
</p>

<p>
MMIO模式下，内存与IO外设寄存器使用相同的地址空间，CPU使用相同的指令存取内存与IO
外设寄存器。
</p>

<p>
LINUX系统下cat /proc/iomem查看物理地址空间布局。
</p>
</div>
</div>

<div id="outline-container-org15c44e4" class="outline-2">
<h2 id="pcie"><a id="org15c44e4"></a><span class="section-number-2">5</span> PCIe</h2>
<div class="outline-text-2" id="text-pcie">
</div>
</div>

<div id="outline-container-org090b177" class="outline-2">
<h2 id="pmio"><a id="org090b177"></a><span class="section-number-2">6</span> PMIO</h2>
<div class="outline-text-2" id="text-pmio">
</div>
</div>

<div id="outline-container-orgdffc086" class="outline-2">
<h2 id="orgdffc086"><span class="section-number-2">7</span> Positional Parameters</h2>
<div class="outline-text-2" id="text-7">
<p>
位置参数。C程序中通过argv[1], argv[2], &#x2026;引用。Shell中通过$1, \(2, ...引用，在
Shell位置参数索引大于10时，数值需要用{}括起来。比如\){10}, ${11}, &#x2026;。
</p>
</div>
</div>

<div id="outline-container-orgcb31830" class="outline-2">
<h2 id="sr-iov"><a id="orgcb31830"></a><span class="section-number-2">8</span> SR-IOV</h2>
<div class="outline-text-2" id="text-sr-iov">
<p>
SR-IOV(Single Root Input/Ouput Virtualization)是PCIe规范的扩展。
</p>
</div>

<div id="outline-container-org4f3fbad" class="outline-3">
<h3 id="org4f3fbad"><span class="section-number-3">8.1</span> Microsoft Doc View</h3>
<div class="outline-text-3" id="text-8-1">
<ul class="org-ul">
<li>Ref to <a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/network/overview-of-single-root-i-o-virtualization--sr-iov-">this URL</a>.</li>
</ul>
<blockquote>
<p>
The single root I/O virtualization (SR-IOV) interface is an extension to the PCI Express (PCIe) specification.
SR-IOV allows a device, such as a network adapter, to separate access to its resources among various PCIe
hardware functions. These functions consist of the following types:
</p>

<ul class="org-ul">
<li>A PCIe Physical Function (PF). This function is the primary function of the device and advertises the device's
SR-IOV capabilities. The PF is associated with the Hyper-V parent partition in a virtualized environment.</li>

<li>One or more PCIe Virtual Functions (VFs). Each VF is associated with the device's PF. A VF shares one or
more physical resources of the device, such as a memory and a network port, with the PF and other VFs on
the device. Each VF is associated with a Hyper-V child partition in a virtualized environment.</li>
</ul>

<p>
Each PF and VF is assigned a unique PCI Express Requester ID (RID) that allows an I/O memory
management unit (IOMMU) to differentiate between different traffic streams and apply memory and interrupt
translations between the PF and VFs. This allows traffic streams to be delivered directly to the appropriate
Hyper-V parent or child partition. As a result, nonprivileged data traffic flows from the PF to VF without affecting
other VFs.
</p>

<p>
SR-IOV enables network traffic to bypass the software switch layer of the Hyper-V virtualization stack. Because
the VF is assigned to a child partition, the network traffic flows directly between the VF and child partition. As a
result, the I/O overhead in the software emulation layer is diminished and achieves network performance that is
nearly the same performance as in nonvirtualized environments.
</p>
</blockquote>
<ul class="org-ul">
<li>Translation</li>
</ul>
<blockquote>
<p>
SR-IOV是PCIe规范的扩展，它允许一个设备（比如网络适配器）在多个硬件功能中分离其
资源访问。这些功能包括如下两类：
</p>
<ol class="org-ol">
<li>一个PCIe物理功能(PF)。此功能是设备主要功能，通告此设备有SR-IOV能力。在虚拟化
环境中，此PF与Hyper-V父分区关联；</li>
<li>一个或多个虚拟功能(VFs)。每个VF与此设备的PF关联。一个VF与PF及其他VF分享此
设备的一个或多个物理资源，如内存或网络端口。在虚拟化环境中，每个VF关联到
Hyper-V子分区；</li>
</ol>

<p>
每个PF与VF分配一个唯一的PCI Express Requester ID (RID)，这允许IOMMU可以区分PF和
VF的业务流，实现PF和VFs内存和中断转换。这允许业务流直接投递给合适的Hyper-V父分区
或子分区。结果是非特权数据业务从PF流向VF，而不影响其他VFs。
</p>

<p>
SR-IOV使网络流绕过Hyper-V虚拟化栈的软件层。因为VF分配给一个子分区，网络业务直接
在VF和子分区之间流动。因此，消除了仿真软件层的IO负载，达到接近非虚拟化环境网络
性能。
</p>
</blockquote>
</div>
</div>
</div>
<div id="outline-container-org9591291" class="outline-2">
<h2 id="ssd"><a id="org9591291"></a><span class="section-number-2">9</span> SSD</h2>
<div class="outline-text-2" id="text-ssd">
</div>
</div>
</div>
</body>
</html>
